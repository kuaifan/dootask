import{m as ve}from"./@micro-zoe.c2e1472d.js";import{v as Ae}from"./jquery.f44c3c79.js";import{v as ke,a as be,b as Te}from"./dayjs.aaefe451.js";import{v as Se}from"./localforage.bd4872f5.js";import{m as ye}from"./markdown-it.6846e2b0.js";import{H as W}from"./highlight.js.ab8aeea4.js";import{m as Ie}from"./markdown-it-link-attributes.e1d5d151.js";import{m as De}from"./@traptitech.64308959.js";import{V as g}from"./vue.296078bd.js";import{m as C,a as $e,V as J}from"./vuex.cc7cb26e.js";import{_ as m,c as xe,V as Ce,d as Ee,n as Le,l as Me,W as Pe,p as je,r as Be}from"./openpgp_hi.15f91b1d.js";import{a as F}from"./axios.6ec123f8.js";import{l as x}from"./le5le-store.d4b5b622.js";import{V as N}from"./vue-router.2d566cd7.js";import{V as Oe}from"./vue-clipboard2.ad7135d3.js";import{V as I}from"./view-design-hi.609f8897.js";import{D as Ue}from"./vuedraggable.6ea348a4.js";import{V as Re}from"./vue-resize-observer.e788af6d.js";import{e as B}from"./element-sea.c283d284.js";import"./@babel.43d8d0a5.js";import"./entities.797c3e49.js";import"./uc.micro.700527ef.js";import"./mdurl.95c1032c.js";import"./linkify-it.96515e28.js";import"./punycode.50f384b0.js";import"./clipboard.3f21bed6.js";import"./sortablejs.982d79d6.js";import"./deepmerge.cecf392e.js";import"./resize-observer-polyfill.37526d89.js";import"./throttle-debounce.7c3948b2.js";import"./babel-helper-vue-jsx-merge-props.5ed215c3.js";import"./normalize-wheel.2a034b9f.js";import"./async-validator.e7e40052.js";import"./babel-runtime.4773988a.js";import"./core-js.314b4a1d.js";function Ne(){let e={},i={loader(t,s){return t}};e["micro-app"]=[i],e["okr-details"]=[i],ve.start({plugins:{modules:e}})}var We={languageList:{zh:"\u7B80\u4F53\u4E2D\u6587","zh-CHT":"\u7E41\u9AD4\u4E2D\u6587",en:"English",ko:"\uD55C\uAD6D\uC5B4",ja:"\u65E5\u672C\u8A9E",de:"Deutsch",fr:"Fran\xE7ais",id:"Indonesia",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A"},replaceArgumentsLanguage(e,i){let t=1;for(;e.indexOf("(*)")!==-1;)typeof i[t]=="object"?e=e.replace("(*)",""):e=e.replace("(*)",i[t]),t++;return e},replaceEscape(e){return!e||e==""?"":e.replace(/\(\*\)/g,"~%~").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/~%~/g,"(.*?)")},getLanguage(){let e=window.localStorage.getItem("__system:languageName__");if(typeof e=="string"&&typeof this.languageList[e]!="undefined")return e;e="en";let i=((window.navigator.language||navigator.userLanguage)+"").toLowerCase();switch(i){case"zh":case"cn":case"zh-cn":e="zh";break;case"zh-tw":case"zh-tr":case"zh-hk":case"zh-cnt":case"zh-cht":e="zh-CHT";break;default:typeof this.languageList[i]!="undefined"&&(e=i);break}return this.saveLanguage(e),e},saveLanguage(e){window.localStorage.setItem("__system:languageName__",e)}};const U=We,Fe=U.languageList,P=U.getLanguage(),j={};typeof window.LANGUAGE_DATA=="undefined"&&(window.LANGUAGE_DATA={});function Zi(e){if(!$A.isArray(e))return;const i=Object.assign(Object.keys(Fe));e.some(t=>{let s=-1;t.key&&i.some(n=>{const o=t[n]||t.general||null;o&&typeof window.LANGUAGE_DATA[n]!="undefined"&&(s=window.LANGUAGE_DATA[n].push(o)-1)}),s>-1&&(window.LANGUAGE_DATA.key[t.key]=s)})}function Ve(e,i=!1){e!==void 0&&(i?(U.saveLanguage(e),$A.reloadUrl()):$A.modalConfirm({content:"\u5207\u6362\u8BED\u8A00\u9700\u8981\u5237\u65B0\u540E\u751F\u6548\uFF0C\u662F\u5426\u786E\u5B9A\u5237\u65B0\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A",onOk:()=>Ve(e,!0)}))}function K(e){var t;if(typeof arguments[1]!="undefined")return K(U.replaceArgumentsLanguage(e,arguments));if(typeof e!="string"||!e||typeof window.LANGUAGE_DATA=="undefined"||typeof window.LANGUAGE_DATA.key=="undefined"||typeof window.LANGUAGE_DATA[P]=="undefined")return e;const i=window.LANGUAGE_DATA.key[e]||-1;if(i>-1)return window.LANGUAGE_DATA[P][i]||e;if(typeof j[e]=="undefined"){j[e]=!1;for(let s in window.LANGUAGE_DATA.key)if(s.indexOf("(*)")>-1){const n=new RegExp("^"+U.replaceEscape(s)+"$","g");if(n.test(e)){let o=0;const r=window.LANGUAGE_DATA.key[s],a=(t=window.LANGUAGE_DATA[P][r]||s)==null?void 0:t.replace(/\(\*\)/g,function(){return"$"+ ++o});j[e]={rege:n,value:a};break}}}return j[e]?e.replace(j[e].rege,j[e].value):(window.systemInfo.debug==="yes"&&setTimeout(s=>{try{let n="__language:Undefined__",o=JSON.parse(window.localStorage.getItem(n)||"[]");$A.isArray(o)||(o=[]);let r=null;o.find(l=>(r=new RegExp("^"+l.replace(/\(\*\)/g,"(.*?)")+"$","g"),!!e.match(r)))||(o.push(e),window.localStorage.setItem(n,JSON.stringify(o)))}catch{}},10),e)}const E=Se,L=ke,ze=be,He=Te;(function(e,i,t){e.systemInfo=e.systemInfo||{},e.modalTransferIndex=1e3,E.config({name:"DooTask",storeName:"common"}),i.extend({isArray(s){return typeof s=="object"&&Object.prototype.toString.call(s).toLowerCase()=="[object array]"&&typeof s.length=="number"},isJson(s){return typeof s=="object"&&Object.prototype.toString.call(s).toLowerCase()=="[object object]"&&typeof s.length=="undefined"},inArray(s,n,o=!1){return this.isArray(n)?o?!!n.find(r=>r&&r.indexOf("*")&&new RegExp("^"+r.replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*")+"$","g").test(s)?!0:r==s):n.includes(s):!1},randNum(s,n){let o=n-s,r=Math.random();return s+Math.round(r*o)},last(s){let n=!1;return typeof s=="object"&&s.length>0&&(n=s[s.length-1]),n},strExists(s,n,o=!1){return s+="",n+="",o!==!0&&(s=s.toLowerCase(),n=n.toLowerCase()),s.indexOf(n)!==-1},leftExists(s,n,o=!1){return s+="",n+="",o!==!0&&(s=s.toLowerCase(),n=n.toLowerCase()),s.substring(0,n.length)===n},leftDelete(s,n,o=!1){return s+="",n+="",this.leftExists(s,n,o)&&(s=s.substring(n.length)),s||""},rightExists(s,n,o=!1){return s+="",n+="",o!==!0&&(s=s.toLowerCase(),n=n.toLowerCase()),s.substring(s.length-n.length)===n},rightDelete(s,n,o=!1){return s+="",n+="",this.rightExists(s,n,o)&&(s=s.substring(0,s.length-n.length)),s||""},getMiddle(s,n=null,o=null){return s=s.toString(),this.isHave(n)&&this.strExists(s,n)&&(s=s.substring(s.indexOf(n)+n.length)),this.isHave(o)&&this.strExists(s,o)&&(s=s.substring(0,s.indexOf(o))),s},subString(s,n,o){return s+="",this.isHave(o)||(o=s.length),s.substring(n,o)},randomString(s){s=s||32;let n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678oOLl9gqVvUuI1",o=n.length,r="";for(let a=0;a<s;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},isHave(s){return!!(s!==null&&s!=="null"&&s!==t&&s!=="undefined"&&s)},runNum(s,n=null){let o=Number(s);if(o+""=="NaN"&&(o=0),n&&/^[0-9]*[1-9][0-9]*$/.test(n)&&(o=o.toFixed(n),o.indexOf(".")<0)){o+=".";for(let a=0;a<n;a++)o+="0"}return o},zeroFill(s,n,o=!1){return o?`${s}`.padEnd(n,"0"):`${s}`.padStart(n,"0")},isMobile(s){return/^1([3456789])\d{9}$/.test(s)},isEmail(s){return/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*\.)+[a-zA-Z]*)$/i.test(s)},getDistance(s,n,o,r){let a=3.14159265359,l=6.28318530712,c=.01745329252,u=63706935e-1,f,d,h,p,_,v,k,w;return f=s*c,d=n*c,h=o*c,p=r*c,k=f-h,k>a?k=l-k:k<-a&&(k=l+k),_=u*Math.cos(d)*k,v=u*(d-p),w=Math.sqrt(_*_+v*v).toFixed(0),w},setTile(s){document.title=s;let n=navigator.userAgent.toLowerCase();if(/iphone|ipad|ipod/.test(n)){let o=document.createElement("iframe");o.style.display="none",o.setAttribute("src","/favicon.ico");let r=function(){setTimeout(function(){o.removeEventListener("load",r),document.body.removeChild(o)},0)};o.addEventListener("load",r),document.body.appendChild(o)}},cloneJSON(s){return typeof s!="object"||s===null?s:$A.jsonParse($A.jsonStringify(s))},jsonParse(s,n=t){if(s===null)return n||{};if(typeof s=="object")return s;try{return JSON.parse(s.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))}catch{return n||{}}},jsonStringify(s,n=t){if(typeof s!="object")return s;try{return JSON.stringify(s)}catch{return n||""}},resize(s,n){let o=$A(s);if(o.length===0)return;let r=parseInt(o.outerHeight()),a=parseInt(o.outerWidth()),l=setInterval(()=>{o.length===0&&clearInterval(l);let c=parseInt(o.outerHeight()),u=parseInt(o.outerWidth());(r!==c||a!==u)&&(r=c,a=u,$A.openLog&&console.log(a,r),typeof n=="function"&&n())},250)},screenOrientation(){return $A(e).width()-$A(e).height()>50?"landscape":"portrait"},isIos(){let s=typeof e!="undefined"&&e.navigator.userAgent.toLowerCase();return s&&/iphone|ipad|ipod|ios/.test(s)},isAndroid(){let s=typeof e!="undefined"&&e.navigator.userAgent.toLowerCase();return s&&s.indexOf("android")>0},isWeixin(){return(typeof e!="undefined"&&e.navigator.userAgent.toLowerCase()).match(/MicroMessenger/i)+""=="micromessenger"},isChrome(){return(typeof e!="undefined"&&e.navigator.userAgent.toLowerCase()).match(/Chrome/i)+""=="chrome"},isDesktop(){return!(typeof e!="undefined"&&e.navigator.userAgent).match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},getObject(s,n){let o=s;return this.count(s)===0||this.count(n)===0?"":(n.replace(/,/g,"|").replace(/\./g,"|").split("|").some(a=>{o=typeof o[a]=="undefined"?"":o[a]}),o)},count(s){try{if(typeof s=="undefined")return 0;if(typeof s=="number"&&(s+=""),typeof s.length=="number")return s.length;{let n=0,o;for(o in s)n++;return n}}catch{return 0}},stringLength(s){return typeof s=="number"||typeof s=="string"?(s+"").length:0},arrayLength(s){if(s)try{return s.length}catch{return 0}return 0},objImplode(s){if(s===null)return"";let n="";return $A.each(s,(o,r)=>{r!==null&&(typeof r=="object"&&this.count(r)>0?n+=this.objImplode(r):n+=String(r))}),n.replace(/\s/g,"").replace(/undefined/g,"")},urlParameter(s){let n=this.urlParameterAll();return typeof s=="undefined"?n:n[s]},urlParameterAll(){let s=e.location.search||e.location.hash||"",n=[];this.strExists(s,"?")&&(n=this.getMiddle(s,"?").split("&"));let o={};for(let r=0;r<n.length;r++){let a=n[r].split("=");a.length===2&&(o[a[0]]=a[1])}return o},removeURLParameter(s,n){if(n instanceof Array)return n.forEach(r=>{s=$A.removeURLParameter(s,r)}),s;let o=s.split("?");if(o.length>=2){let r=encodeURIComponent(n)+"=",a=o[1].split(/[&;]/g);for(let l=a.length;l-- >0;)a[l].lastIndexOf(r,0)!==-1&&a.splice(l,1);return o[0]+(a.length>0?"?"+a.join("&"):"")}return s},urlAddParams(s,n){if($A.isJson(n)){s&&(s=this.removeURLParameter(s,Object.keys(n))),s+="",s+=s.indexOf("?")===-1?"?":"";for(let o in n)!n.hasOwnProperty(o)||(s+="&"+o+"="+n[o])}return this.rightDelete(s.replace("?&","?"),"?")},reloadUrl(){if($A.isEEUiApp&&$A.isAndroid()){let s=e.location.href,n="_=",o=new RegExp(n+"\\d+"),r=$A.dayjs().valueOf();if(s.indexOf(n)>-1)s=s.replace(o,n+r);else if(s.indexOf("?")>-1){let a=s.split("?");a[1]?s=a[0]+"?"+n+r+"&"+a[1]:s=a[0]+"?"+n+r}else s.indexOf("#")>-1?s=s.split("#")[0]+"?"+n+r+location.hash:s=s+"?"+n+r;$A.eeuiAppSetUrl(s)}else e.location.reload()},stringConnect(...s){let n=null,o="";return s.forEach(r=>{n===null?n=r:r&&(r&&o&&(o+=n),o+=r)}),o},objEquals(s,n){let o=s instanceof Object,r=n instanceof Object;if(!o||!r)return s===n;if(Object.keys(s).length!==Object.keys(n).length)return!1;for(let a in s)if(s.hasOwnProperty(a)){let l=s[a]instanceof Object,c=n[a]instanceof Object;if(l&&c){if(!this.objEquals(s[a],n[a]))return!1}else if(s[a]!=n[a])return!1}return!0},insert2Input(s,n){if(s===null||typeof s!="object")return;typeof s.length=="number"&&s.length>0&&(s=s[0]);let o=typeof s.$el=="object"?$A(s.$el):$A(s);if(o.length===0)return;let r=o[0];if(r.tagName!="INPUT"&&r.tagName!="TEXTAREA"&&(o.find("input").length===0?o=o.find("textarea"):o=o.find("input")),o.length===0||(r=o[0],r.tagName!="INPUT"&&r.tagName!="TEXTAREA"))return;let a=o.val(),{selectionStart:l,selectionEnd:c}=r;o.val(`${a.substring(0,l)}${n}${a.substring(c,a.length)}`),r.dispatchEvent(new Event("input")),setTimeout(()=>{if(r.setSelectionRange){let u=a.substring(0,l).length+n.length;r.focus(),r.setSelectionRange(u,u)}},10)},iOSKeyboardFixer(){!this.isIos()||(document.body.scrollTop=document.body.scrollTop+1,document.body.scrollTop=document.body.scrollTop-1)},loadScript(s){return new Promise(async(n,o)=>{if(s=$A.originUrl(s),this.rightExists(s,".css"))return n(this.loadCss(s));let r=0;for(;this.__loadScript[s]==="loading";)if(await new Promise(l=>setTimeout(l,1e3)),r++,r>30)return o("\u52A0\u8F7D\u8D85\u65F6");if(this.__loadScript[s]==="loaded")return n(!1);this.__loadScript[s]="loading";const a=document.createElement("script");a.type="text/javascript",a.readyState?a.onreadystatechange=()=>{(a.readyState==="loaded"||a.readyState==="complete")&&(a.onreadystatechange=null,this.__loadScript[s]="loaded",n(!0))}:(a.onload=()=>{this.__loadScript[s]="loaded",n(!0)},a.onerror=l=>{this.__loadScript[s]="error",o(l)}),this.rightExists(s,".js")?a.src=s+"?hash="+e.systemInfo.version:a.src=s,document.body.appendChild(a)})},loadScriptS(s){return new Promise(n=>{let o=0;const r=()=>{++o<s.length?this.loadScript(s[o]).finally(r):n()};this.loadScript(s[0]).finally(r)})},__loadScript:{},loadCss(s){return new Promise(async(n,o)=>{if(s=$A.originUrl(s),this.rightExists(s,".js"))return n(this.loadScript(s));let r=0;for(;this.__loadCss[s]==="loading";)if(await new Promise(l=>setTimeout(l,1e3)),r++,r>30)return o("\u52A0\u8F7D\u8D85\u65F6");if(this.__loadCss[s]==="loaded")return n(!1);this.__loadCss[s]="loading";const a=document.createElement("link");a.readyState?a.onreadystatechange=()=>{(a.readyState=="loaded"||a.readyState=="complete")&&(a.onreadystatechange=null,this.__loadCss[s]="loaded",n(!0))}:(a.onload=()=>{this.__loadCss[s]="loaded",n(!0)},a.onerror=l=>{this.__loadCss[s]="error",o(l)}),a.rel="stylesheet",this.rightExists(s,".css")?a.href=s+"?hash="+e.systemInfo.version:a.href=s,document.getElementsByTagName("head").item(0).appendChild(a)})},loadCssS(s){return new Promise(n=>{let o=0;const r=()=>{++o<s.length?this.loadCss(s[o]).finally(r):n()};this.loadCss(s[0]).finally(r)})},__loadCss:{},loadIframe(s,n=0){return new Promise(async(o,r)=>{s=$A.originUrl(s);let a=0;for(;this.__loadIframe[s]==="loading";)if(await new Promise(c=>setTimeout(c,1e3)),a++,a>30)return r("\u52A0\u8F7D\u8D85\u65F6");if(this.__loadIframe[s]==="loaded")return o(!1);this.__loadIframe[s]="loading";const l=document.createElement("iframe");l.style.display="none",l.src=s,l.onload=()=>{this.__loadIframe[s]="loaded",o(!0),n>0&&setTimeout(()=>{document.body.removeChild(l),delete this.__loadIframe[s]},n)},l.onerror=c=>{this.__loadIframe[s]="error",r(c)},document.body.appendChild(l)})},loadIframes(s){return new Promise(n=>{let o=0;const r=()=>{++o<s.length?this.loadIframe(s[o]).finally(r):n()};this.loadIframe(s[0]).finally(r)})},__loadIframe:{},bytesToSize(s){if(s===0)return"0 B";let n=1024,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(s)/Math.log(n));return typeof o[r]=="undefined"?"0 B":$A.runNum(s/Math.pow(n,r),2)+" "+o[r]},html2Escape(s){return!s||s==""?"":s.replace(/[<>&"]/g,function(n){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[n]})},getDomain(s){let n=/http(s)?:\/\/([^\/]+)/i,o=(s+"").match(n);return o!=null&&o.length>0?o[2]:""},scrollToView(s,n){if(!!s){if(typeof n=="undefined"||n===!0?n={block:"start",inline:"nearest"}:n===!1&&(n={block:"end",inline:"nearest"}),typeof n.scrollMode!="undefined"&&typeof e.scrollIntoView=="function"){e.scrollIntoView(s,n);return}try{s.scrollIntoView(n)}catch{typeof e.scrollIntoView=="function"&&e.scrollIntoView(s,n)}}},scrollIntoViewIfNeeded(s){!s||(typeof s.scrollIntoViewIfNeeded=="function"?s.scrollIntoViewIfNeeded():$A.scrollToView(s,{block:"nearest",inline:"nearest"}))},scaleToScale(s,n,o,r){let a,l;return s>0&&n>0?(s/n>=o/r?s>o?(a=o,l=n*o/s):(a=s,l=n):n>r?(l=r,a=s*r/n):(a=s,l=n),{width:parseInt(a),height:parseInt(l)}):{width:s,height:n}},scrollPreventThrough(s){if(!s||s.getAttribute("data-prevent-through")==="yes")return;s.setAttribute("data-prevent-through","yes");let n=null;s.addEventListener("touchstart",function(o){n=Math.floor(o.targetTouches[0].clientY)}),s.addEventListener("touchmove",function(o){let r=Math.floor(o.targetTouches[0].clientY),a=s.scrollTop,l=s.scrollHeight,c=s.clientHeight;(a<=0&&r-n>0||a>=l-c&&r-n<0)&&o.preventDefault()},!1)},getAttr(s,n,o=""){return s?s.getAttribute(n):o},onBlur(s=null,n=!1){setTimeout(o=>{if($A.eeuiAppKeyboardHide(),typeof s=="boolean"&&(n=s,s=null),s)s.blur();else if(document.activeElement)if(n===!0&&document.activeElement.tagName==="BODY"){let r=document.getElementById("toLoseFocusInput");r||(r=document.createElement("input"),r.id="toLoseFocusInput",r.type="text",r.style.position="fixed",r.style.top="0px",r.style.left="0px",r.style.zIndex="-1",r.style.opacity="0",r.addEventListener("focus",a=>{document.activeElement.blur()}),document.body.appendChild(r)),setTimeout(a=>{r.focus()},1)}else document.activeElement.blur()},1)},sortObject(s,n=[]){return Object.keys(s).sort().reduce(function(o,r){return n.includes(r)||(o[r]=s[r]),o},{})}}),i.extend({__IDBTimer:{},async IDBTest(){try{$A.isIos()&&await E.setItem("__test__",$A.dayjs().valueOf()),$A.openLog&&console.log("IDBTest OK")}catch(s){$A.openLog?(console.error("IDBTest Error: ",s),$A.modalWarning({content:s.message,onOk:()=>{$A.reloadUrl()}})):$A.reloadUrl()}},IDBSave(s,n,o=100){typeof this.__IDBTimer[s]!="undefined"&&(clearTimeout(this.__IDBTimer[s]),delete this.__IDBTimer[s]),this.__IDBTimer[s]=setTimeout(async r=>{await E.setItem(s,n)},o)},IDBDel(s){E.removeItem(s).then(n=>{})},IDBSet(s,n){return E.setItem(s,n)},IDBRemove(s){return E.removeItem(s)},IDBClear(){return E.clear()},IDBValue(s){return E.getItem(s)},async IDBString(s,n=""){const o=await this.IDBValue(s);return typeof o=="string"||typeof o=="number"?o:n},async IDBInt(s,n=0){const o=await this.IDBValue(s);return typeof o=="number"?o:n},async IDBBoolean(s,n=!1){const o=await this.IDBValue(s);return typeof o=="boolean"?o:n},async IDBArray(s,n=[]){const o=await this.IDBValue(s);return this.isArray(o)?o:n},async IDBJson(s,n={}){const o=await this.IDBValue(s);return this.isJson(o)?o:n}}),i.extend({setStorage(s,n){return this.__operationStorage(s,n)},getStorageValue(s){return this.__operationStorage(s)},getStorageString(s,n=""){let o=this.__operationStorage(s);return typeof o=="string"||typeof o=="number"?o:n},getStorageInt(s,n=0){let o=this.__operationStorage(s);return typeof o=="number"?o:n},getStorageBoolean(s,n=!1){let o=this.__operationStorage(s);return typeof o=="boolean"?o:n},getStorageArray(s,n=[]){let o=this.__operationStorage(s);return this.isArray(o)?o:n},getStorageJson(s,n={}){let o=this.__operationStorage(s);return this.isJson(o)?o:n},__operationStorage(s,n){if(!s)return;let o="__state__";if(s.substring(0,5)==="cache"&&(o="__state:"+s+"__"),typeof n=="undefined")return this.__loadFromlLocal(s,"",o);this.__savaToLocal(s,n,o)},__savaToLocal(s,n,o){try{typeof o=="undefined"&&(o="__seller__");let r=e.localStorage[o];r?r=JSON.parse(r):r={},r[s]=n,e.localStorage[o]=JSON.stringify(r)}catch{}},__loadFromlLocal(s,n,o){try{typeof o=="undefined"&&(o="__seller__");let r=e.localStorage[o];return!r||(r=JSON.parse(r),!r||typeof r[s]=="undefined")?n:r[s]}catch{return n}}}),i.extend({setSessionStorage(s,n){return this.__operationSessionStorage(s,n)},getSessionStorageValue(s){return this.__operationSessionStorage(s)},getSessionStorageString(s,n=""){let o=this.__operationSessionStorage(s);return typeof o=="string"||typeof o=="number"?o:n},getSessionStorageInt(s,n=0){let o=this.__operationSessionStorage(s);return typeof o=="number"?o:n},__operationSessionStorage(s,n){if(!s)return;let o="__state__";if(s.substring(0,5)==="cache"&&(o="__state:"+s+"__"),typeof n=="undefined")return this.__loadFromlSession(s,"",o);this.__savaToSession(s,n,o)},__savaToSession(s,n,o){try{typeof o=="undefined"&&(o="__seller__");let r=e.sessionStorage.getItem(o);r?r=JSON.parse(r):r={},r[s]=n,e.sessionStorage.setItem(o,JSON.stringify(r))}catch{}},__loadFromlSession(s,n,o){try{typeof o=="undefined"&&(o="__seller__");let r=e.sessionStorage.getItem(o);return!r||(r=JSON.parse(r),!r||typeof r[s]=="undefined")?n:r[s]}catch{return n}}}),i.extend({serializeObject(s,n){if(typeof s=="string")return s;let o=[],r="&";n=n||[];let a;function l(u){if(n.length>0){let f="";for(let d=0;d<n.length;d++)d===0?f+=n[d]:f+="["+encodeURIComponent(n[d])+"]";return f+"["+encodeURIComponent(u)+"]"}else return encodeURIComponent(u)}function c(u){return encodeURIComponent(u)}for(let u in s)if(s.hasOwnProperty(u)){let f;if(Array.isArray(s[u])){f=[];for(let d=0;d<s[u].length;d++)!Array.isArray(s[u][d])&&typeof s[u][d]=="object"?(a=n.slice(),a.push(u),a.push(d+""),f.push(i.serializeObject(s[u][d],a))):f.push(l(u)+"[]="+c(s[u][d]));f.length>0&&o.push(f.join(r))}else s[u]===null?o.push(l(u)+"="):typeof s[u]=="object"?(a=n.slice(),a.push(u),f=i.serializeObject(s[u],a),f!==""&&o.push(f)):typeof s[u]!="undefined"&&s[u]!==""?o.push(l(u)+"="+c(s[u])):s[u]===""&&o.push(l(u))}return o.join(r)},globalAjaxOptions:{},ajaxSetup(s){s.type&&(s.method=s.type),i.each(s,function(n,o){i.globalAjaxOptions[n]=o})},_jsonpRequests:0,ihttp(s){let n={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},o=["beforeSend","error","complete","success","statusCode"];s.type&&(s.method=s.type),i.each(i.globalAjaxOptions,function(d,h){o.indexOf(d)<0&&(n[d]=h)});function r(d,h,p){let _=arguments;d&&i(document).trigger(d,h),p&&(p in i.globalAjaxOptions&&i.globalAjaxOptions[p](_[3],_[4],_[5],_[6]),s[p]&&s[p](_[3],_[4],_[5],_[6]))}i.each(n,function(d,h){d in s||(s[d]=h)}),s.url||(s.url=e.location.toString());let a=s.url.indexOf("?")>=0?"&":"?",l=s.method.toUpperCase();if((l==="GET"||l==="HEAD"||l==="OPTIONS"||l==="DELETE")&&s.data){let d;typeof s.data=="string"?s.data.indexOf("?")>=0?d=s.data.split("?")[1]:d=s.data:d=i.serializeObject(s.data),d.length&&(s.url+=a+d,a==="?"&&(a="&"))}if(s.dataType==="json"&&s.url.indexOf("callback=")>=0){let d="__jsonp_"+Date.now()+i._jsonpRequests++,h,p=s.url.split("callback="),_=p[0]+"callback="+d;if(p[1].indexOf("&")>=0){let k=p[1].split("&").filter(function(w){return w.indexOf("=")>0}).join("&");k.length>0&&(_+="&"+k)}let v=document.createElement("script");v.type="text/javascript",v.onerror=function(){clearTimeout(h),r(t,t,"error",null,"scripterror"),r("ajaxComplete ajax:complete",{scripterror:!0},"complete",null,"scripterror")},v.src=_,e[d]=function(k){clearTimeout(h),r(t,t,"success",k),v.parentNode.removeChild(v),v=null,delete e[d]},document.querySelector("head").appendChild(v),s.timeout>0&&(h=setTimeout(function(){v.parentNode.removeChild(v),v=null,r(t,t,"error",null,"timeout")},s.timeout));return}(l==="GET"||l==="HEAD"||l==="OPTIONS"||l==="DELETE")&&s.cache===!1&&(s.url+=a+"_nocache="+Date.now());let c=new XMLHttpRequest;c.requestUrl=s.url,c.requestParameters=s,c.open(l,s.url,s.async,s.user,s.password);let u=null;if((l==="POST"||l==="PUT"||l==="PATCH")&&s.data)if(s.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(s.data.constructor)>=0)u=s.data;else{let h="---------------------------"+Date.now().toString(16);s.contentType==="multipart/form-data"?c.setRequestHeader("Content-Type","multipart/form-data; boundary="+h):c.setRequestHeader("Content-Type",s.contentType),u="";let p=i.serializeObject(s.data);if(s.contentType==="multipart/form-data"){h="---------------------------"+Date.now().toString(16),p=p.split("&");let _=[];for(let v=0;v<p.length;v++)_.push('Content-Disposition: form-data; name="'+p[v].split("=")[0]+`"\r
\r
`+p[v].split("=")[1]+`\r
`);u="--"+h+`\r
`+_.join("--"+h+`\r
`)+"--"+h+`--\r
`}else u=p}else u=s.data;s.headers&&i.each(s.headers,function(d,h){c.setRequestHeader(d,h)}),typeof s.crossDomain=="undefined"&&(s.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(s.url)&&RegExp.$2!==e.location.host),s.crossDomain||c.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.xhrFields&&i.each(s.xhrFields,function(d,h){c[d]=h});let f;return c.onload=function(d){if(f&&clearTimeout(f),c.status>=200&&c.status<300||c.status===0){let h;if(s.dataType==="json")try{h=JSON.parse(c.responseText),r("ajaxSuccess ajax:success",{xhr:c},"success",h,c.status,c)}catch(p){console.error(p),r("ajaxError ajax:error",{xhr:c,parseerror:!0},"error",c,"parseerror")}else h=c.responseType==="text"||c.responseType===""?c.responseText:c.response,r("ajaxSuccess ajax:success",{xhr:c},"success",h,c.status,c)}else r("ajaxError ajax:error",{xhr:c},"error",c,c.status);s.statusCode&&(i.globalAjaxOptions.statusCode&&i.globalAjaxOptions.statusCode[c.status]&&i.globalAjaxOptions.statusCode[c.status](c),s.statusCode[c.status]&&s.statusCode[c.status](c)),r("ajaxComplete ajax:complete",{xhr:c},"complete",c,c.status)},c.onerror=function(d){f&&clearTimeout(f),r("ajaxError ajax:error",{xhr:c},"error",c,c.status),r("ajaxComplete ajax:complete",{xhr:c,error:!0},"complete",c,"error")},r("ajaxStart ajax:start",{xhr:c},"start",c),r(t,t,"beforeSend",c),s.timeout>0&&(c.onabort=function(){f&&clearTimeout(f)},f=setTimeout(function(){c.abort(),r("ajaxError ajax:error",{xhr:c,timeout:!0},"error",c,"timeout"),r("ajaxComplete ajax:complete",{xhr:c,timeout:!0},"complete",c,"timeout")},s.timeout)),c.send(u),c}}),i.extend({ajaxc(s){if(!s||typeof s.url=="undefined")return!1;typeof s.data=="undefined"&&(s.data={}),typeof s.cache=="undefined"&&(s.cache=!1),typeof s.method=="undefined"&&(s.method="GET"),typeof s.timeout=="undefined"&&(s.timeout=3e4),typeof s.dataType=="undefined"&&(s.dataType="json"),typeof s.before=="undefined"&&(s.before=()=>{}),typeof s.complete=="undefined"&&(s.complete=()=>{}),typeof s.after=="undefined"&&(s.after=()=>{}),typeof s.success=="undefined"&&(s.success=()=>{}),typeof s.error=="undefined"&&(s.error=()=>{}),typeof s.header=="undefined"&&(s.header={});const n=$A.randomString(16);s.before(),$A.__ajaxList.push({key:n,id:s.requestId||null,url:s.url,request:$A.ihttp({url:s.url,data:s.data,cache:s.cache,headers:s.header,method:s.method.toUpperCase(),contentType:"OPTIONS",crossDomain:!0,dataType:s.dataType,timeout:s.timeout,success:function(o,r,a){$A.__ajaxList=$A.__ajaxList.filter(l=>l.key!==n),s.complete(),s.success(o,r,a),s.after(!0)},error:function(o,r){$A.__ajaxList=$A.__ajaxList.filter(a=>a.key!==n),s.complete(),s.error(o,r),s.after(!1)}})})},ajaxcCancel(s){if(!s)return 0;let n=0;return $A.__ajaxList.forEach((o,r)=>{o.id===s&&(n++,o.request&&o.request.abort())}),n>0&&($A.__ajaxList=$A.__ajaxList.filter(o=>o.id!==s)),n},__ajaxList:[]}),L.extend(ze),L.extend(He),i.extend({dayjs(s=t){return/^\d{13,}$/.test(s)?L(Number(s)):/^\d{10,}$/.test(s)?L(Number(s)*1e3):(s===null&&(s=0),L(s))},daytz(s=t){const n=$A.dayjs(s);return $A.timezoneDifference?n.subtract($A.timezoneDifference,"hour"):n},updateTimezone(s=t){if(typeof s!="undefined"&&($A.timezoneName=s),!$A.timezoneName)return $A.timezoneDifference=0;const n=$A.daytz().startOf("hour"),o=n.tz($A.timezoneName);return $A.timezoneDifference=n.startOf("hour").diff(o.format("YYYY-MM-DD HH:mm:ss"),"hour")},timezoneName:null,timezoneDifference:0,newDateString(s,n="YYYY-MM-DD HH:mm:ss"){if(s===null)return s;if(s instanceof L||s instanceof Date)s=$A.dayjs(s).format(n);else if($A.isJson(s)){s=Object.assign({},s);for(let o in s)!s.hasOwnProperty(o)||(s[o]=$A.newDateString(s[o],n))}else $A.isArray(s)&&(s=Object.assign([],s),s.forEach((o,r)=>{s[r]=$A.newDateString(o,n)}));return s},newTimestamp(s){if(s===null)return s;if(s instanceof L||s instanceof Date||$A.isDateString(s))s=$A.dayjs(s).unix();else if($A.isJson(s)){s=Object.assign({},s);for(let n in s)!s.hasOwnProperty(n)||(s[n]=$A.newTimestamp(s[n]))}else $A.isArray(s)&&(s=Object.assign([],s),s.forEach((n,o)=>{s[o]=$A.newTimestamp(n)}));return s},isDateString(s){return typeof s=="string"&&/^\d{4}-\d{2}-\d{2}( \d{2}(:\d{2}(:\d{2})?)?)?$/i.test(s)},secondsToTime(s){let n="";s<0&&(n="-",s=-s);let o;const r=Math.floor(s/86400),a=Math.floor(s%86400/3600),l=Math.floor(s%86400%3600/60),c=Math.floor(s%86400%3600%60);return r>0?a>0?o=r+"d,"+$A.zeroFill(a,2)+"h":l>0?o=r+"d,"+$A.zeroFill(l,2)+"min":c>0?o=r+"d,"+$A.zeroFill(c,2)+"s":o=r+"d":a>0?o=$A.zeroFill(a,2)+":"+$A.zeroFill(l,2)+":"+$A.zeroFill(c,2):l>0?o=$A.zeroFill(l,2)+":"+$A.zeroFill(c,2):c>0&&(o=$A.zeroFill(c,2)+"s"),n+o},timeFormat(s){const n=$A.daytz(),o=$A.dayjs(s);return n.format("YYYY-MM-DD")===o.format("YYYY-MM-DD")?o.format("HH:mm"):n.clone().subtract(1,"day").format("YYYY-MM-DD")===o.format("YYYY-MM-DD")?`${$A.L("\u6628\u5929")} ${o.format("HH:mm")}`:n.year()===o.year()?o.format("MM-DD"):o.format("YYYY-MM-DD")||""},countDownFormat(s,n){s=$A.daytz(s),n=$A.dayjs(n);const o=n.diff(s,"second");return o==0?"0s":Math.abs(o)<86400*7?$A.secondsToTime(o):$A.timeFormat(n)}}),e.$A=i})(window,window.$=window.jQuery=Ae);(function(e){const i=e.$A;i.extend({eeuiModule(t,s=0){return new Promise(n=>{if(typeof requireModuleJs=="function"){n(requireModuleJs(t));return}setTimeout(()=>{s<20?n(this.eeuiModuleJs(t,++s)):n(null)},500)})},eeuiModuleSync(t){return typeof requireModuleJs=="function"?requireModuleJs(t):null},eeuiAppVersion(){if(!!$A.isEEUiApp)return $A.eeuiModuleSync("eeui").getVersion()},eeuiAppLocalVersion(){if(!!$A.isEEUiApp)return $A.eeuiModuleSync("eeui").getLocalVersion()},eeuiAppAlert(t,s){!$A.isEEUiApp||(typeof s!="function"&&(s=n=>{}),$A.eeuiModule("eeui").then(n=>{n.alert(t,s)}))},eeuiAppToast(t){!$A.isEEUiApp||$A.eeuiModule("eeui").then(s=>{s.toast(t)})},eeuiAppRewriteUrl(t){if(!!$A.isEEUiApp)return $A.eeuiModuleSync("eeui").rewriteUrl(t)},eeuiAppOpenPage(t,s){!$A.isEEUiApp||(typeof s!="function"&&(s=n=>{}),$A.eeuiModule("eeui").then(n=>{n.openPage(t,s)}))},eeuiAppOpenWeb(t){!$A.isEEUiApp||$A.eeuiModule("eeui").then(s=>{s.openWeb(t)})},eeuiAppSetPageBackPressed(t,s){!$A.isEEUiApp||(typeof s!="function"&&(s=n=>{}),$A.eeuiModule("eeui").then(n=>{n.setPageBackPressed(t,s)}))},eeuiAppGoDesktop(){!$A.isEEUiApp||$A.eeuiModule("eeui").then(t=>{t.goDesktop()})},eeuiAppKeepScreenOn(){!$A.isEEUiApp||$A.eeuiModule("eeui").then(t=>{t.keepScreenOn()})},eeuiAppKeepScreenOff(){!$A.isEEUiApp||$A.eeuiModule("eeui").then(t=>{t.keepScreenOff()})},eeuiAppKeyboardHide(){!$A.isEEUiApp||$A.eeuiModule("eeui").then(t=>{t.keyboardHide()})},eeuiAppSendMessage(t){!$A.isEEUiApp||$A.eeuiModule("webview").then(s=>{s.sendMessage(t)})},eeuiAppSetUrl(t){!$A.isEEUiApp||$A.eeuiModule("webview").then(s=>{s.setUrl(t)})},eeuiAppScan(t){!$A.isEEUiApp||$A.eeuiModule("eeui").then(s=>{s.openScaner({},n=>{switch(n.status){case"success":t(n.text);break}})})},eeuiAppGetThemeName(){if(!!$A.isEEUiApp)return $A.eeuiModuleSync("eeui").getThemeName()},eeuiAppKeyboardStatus(){if(!!$A.isEEUiApp)return $A.eeuiModuleSync("eeui").keyboardStatus()},eeuiAppSetVariate(t,s){!$A.isEEUiApp||$A.eeuiModuleSync("eeui").setVariate(t,s)},eeuiAppSetHapticBackEnabled(t){!$A.isEEUiApp||$A.eeuiModuleSync("webview").setHapticBackEnabled(t)},eeuiAppSetDisabledUserLongClickSelect(t){!$A.isEEUiApp||($A.__disabledUserLongClickSelectTimer&&clearTimeout($A.__disabledUserLongClickSelectTimer),/^\d+$/.test(t)?($A.eeuiModuleSync("webview").setDisabledUserLongClickSelect(!0),$A.__disabledUserLongClickSelectTimer=setTimeout(()=>{$A.__disabledUserLongClickSelectTimer=null,$A.eeuiModuleSync("webview").setDisabledUserLongClickSelect(!1)},t)):$A.eeuiModuleSync("webview").setDisabledUserLongClickSelect(t))},__disabledUserLongClickSelectTimer:null,eeuiAppCopyText(t){!$A.isEEUiApp||$A.eeuiModuleSync("eeui").copyText(t)}}),e.$A=i})(window);const D={mdi:null,mds:null,formatMsg:e=>{const i=e.match(/<img\s+[^>]*?>/g);return i&&i.some(t=>{e=e.replace(t,`<div class="no-size-image-box">${t}</div>`)}),e},highlightBlock:(e,i="")=>`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${i}</span><span class="code-block-header__copy">${$A.L("\u590D\u5236\u4EE3\u7801")}</span></div><code class="hljs code-block-body ${i}">${e}</code></pre>`};function en(e){return e==="..."?'<div class="input-blink"></div>':(D.mdi===null&&(D.mdi=new ye({linkify:!0,highlight(i,t){if(!!(t&&W.getLanguage(t))){const n=t!=null?t:"";return D.highlightBlock(W.highlight(i,{language:n}).value,n)}return D.highlightBlock(W.highlightAuto(i).value,"")}}),D.mdi.use(Ie,{attrs:{target:"_blank",rel:"noopener"}}),D.mdi.use(De,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"})),D.formatMsg(D.mdi.render(e)))}function Ye(e){return D.mds===null&&(D.mds=ye()),D.mds.render(e)}function tn(e){if(e==="")return!1;const i=e.replace(/<p>/g,`
`).replace(/(^|\s+)```([\s\S]*)```/gm,"");if(/<\/(strong|s|em|u|ol|ul|li|blockquote|pre|img|a)>/i.test(i)||/<span[^>]+?class="mention"[^>]*?>/i.test(i))return!1;const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="10px",t.style.height="10px",t.style.overflow="hidden",t.style.zIndex="-9999",t.style.opacity="0",t.innerHTML=e,document.body.appendChild(t);const s=t.innerText;return document.body.removeChild(t),!!(/(^|\s+)#+\s(.*)$/m.test(s)||/(^|\s+)\*\*(.*)\*\*/m.test(s)||/(^|\s+)__(.*)__/m.test(s)||/(^|\s+)\*(.*)\*/m.test(s)||/(^|\s+)_(.*)_/m.test(s)||/(^|\s+)~~(.*)~~/m.test(s)||/(^|\s+)\[(.*?)\]\((.*?)\)/m.test(s)||/(^|\s+)!\[(.*?)\]\((.*?)\)/m.test(s)||/(^|\s+)`(.*?)`/m.test(s)||/(^|\s+)```([\s\S]*?)```/m.test(s))}(function(e){const i=e.$A;i.extend({apiUrl(t){if(t=="privacy"){const s=$A.getDomain(e.systemInfo.apiUrl);if(s==""||s=="public")return"https://www.dootask.com/privacy.html";t="../privacy.html"}if(t.substring(0,2)==="//"||t.substring(0,7)==="http://"||t.substring(0,8)==="https://"||t.substring(0,6)==="ftp://"||t.substring(0,1)==="/")return t;for(typeof e.systemInfo.apiUrl=="string"?t=e.systemInfo.apiUrl+t:t=e.location.origin+"/api/"+t;t.indexOf("/../")!==-1;)t=t.replace(/\/(((?!\/).)*)\/\.\.\//,"/");return t},mainUrl(t=null){return t||(t=""),t.substring(0,2)==="//"||t.substring(0,7)==="http://"||t.substring(0,8)==="https://"||t.substring(0,6)==="ftp://"||t.substring(0,1)==="/"?t:$A.apiUrl(`../${t}`)},originUrl(t){if(t.substring(0,2)==="//"||t.substring(0,7)==="http://"||t.substring(0,8)==="https://"||t.substring(0,6)==="ftp://"||t.substring(0,1)==="/")return t;for(typeof e.systemInfo.origin=="string"?t=e.systemInfo.origin+t:t=e.location.origin+"/"+t;t.indexOf("/../")!==-1;)t=t.replace(/\/(((?!\/).)*)\/\.\.\//,"/");return t},onlinePreviewUrl(t,s){return $A.mainUrl(`online/preview/${t}?key=${s}&version=${e.systemInfo.version}&__=${$A.dayjs().valueOf()}`)},projectParameterTemplate(t){return{project_id:t,menuInit:!1,menuType:"column",chat:!1,showMy:!0,showHelp:!0,showUndone:!0,showCompleted:!1,completedTask:!1}},timeOptionShortcuts(){const t=$A.daytz().startOf("day").toDate();return[{text:$A.L("\u4ECA\u5929"),value(){return[t,$A.daytz().endOf("day").toDate()]}},{text:$A.L("\u660E\u5929"),value(){return[t,$A.daytz().add(1,"day").endOf("day").toDate()]}},{text:$A.L("\u672C\u5468"),value(){return[t,$A.daytz().endOf("week").toDate()]}},{text:$A.L("\u672C\u6708"),value(){return[t,$A.daytz().endOf("month").toDate()]}},{text:$A.L("3\u5929"),value(){return[t,$A.daytz().add(2,"day").endOf("day").toDate()]}},{text:$A.L("5\u5929"),value(){return[t,$A.daytz().add(4,"day").endOf("day").toDate()]}},{text:$A.L("7\u5929"),value(){return[t,$A.daytz().add(6,"day").endOf("day").toDate()]}}]},dialogTags(t){let s=[];return t.type=="group"&&["project","task"].includes(t.group_type)&&$A.isJson(t.group_info)&&(t.group_type=="task"&&t.group_info.complete_at&&s.push({color:"success",text:"\u5DF2\u5B8C\u6210"}),t.group_info.deleted_at?s.push({color:"red",text:"\u5DF2\u5220\u9664"}):t.group_info.archived_at&&s.push({color:"default",text:"\u5DF2\u5F52\u6863"})),s},dialogCompleted(t){return this.dialogTags(t).find(({color:s})=>s=="success")},getDialogNum(t){return t&&((t.silence?0:t.unread)||t.mention||t.mark_unread)||0},getDialogUnread(t,s){return t&&((s||!t.silence?t.unread:0)||t.mark_unread)||0},getDialogMention(t){return(t==null?void 0:t.mention)||0},getMsgTextPreview(t,s=null){return t?(t=t.replace(/<img\s+class="emoticon"[^>]*?alt="(\S+)"[^>]*?>/g,"[$1]"),t=t.replace(/<img\s+class="emoticon"[^>]*?>/g,`[${$A.L("\u52A8\u753B\u8868\u60C5")}]`),s?t=t.replace(/<img\s+class="browse"[^>]*?src="(\S+)"[^>]*?>/g,function(n,o){const r=n.match('width="(\\d+)"'),a=n.match('height="(\\d+)"');if(r&&a){const l=parseInt(r[1]),c=parseInt(a[1]),u=40,f=$A.scaleToScale(l,c,u,u);s=`${s}" style="width:${f.width}px;height:${f.height}px`}return`[image:${o}]`}):t=t.replace(/<img\s+class="browse"[^>]*?>/g,`[${$A.L("\u56FE\u7247")}]`),t=t.replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),s&&(t=t.replace(/\[image:(.*?)\]/g,`<img class="${s}" src="$1">`),t=t.replace(/\{\{RemoteURL\}\}/g,this.apiUrl("../"))),t):""},formatMsgBasic(t){if(!t)return t;if($A.isJson(t))for(let s in t)!t.hasOwnProperty(s)||(t[s]=$A.formatMsgBasic(t[s]));else $A.isArray(t)?t.forEach((s,n)=>{t[n]=$A.formatMsgBasic(s)}):typeof t=="string"&&(t=t.replace(/\{\{RemoteURL\}\}/g,this.apiUrl("../")));return t},formatTextMsg(t,s){if(!t)return"";const n=new RegExp(`<span class="mention user" data-id="${s}">`,"g");t=t.trim().replace(/(\n\x20*){3,}/g,`

`),t=t.replace(/&nbsp;/g," "),t=t.replace(/<p><\/p>/g,"<p><br/></p>"),t=t.replace(/\{\{RemoteURL\}\}/g,$A.mainUrl()),t=t.replace(n,`<span class="mention me" data-id="${s}">`),/https*:\/\//.test(t)&&(t=t.split(/(<[^>]*>)/g).map(r=>(r&&!/<[^>]*>/.test(r)&&(r=r.replace(/(^|[^'"])((https*:\/\/)((\w|=|\?|\.|\/|&|-|:|\+|%|;|#|@|,|!)+))/g,'$1<a href="$2" target="_blank">$2</a>')),r)).join(""));const o=t.match(/<img\s+[^>]*?>/g);if(o){const r=new RegExp('width="(\\d+)"'),a=new RegExp('height="(\\d+)"');o.some(l=>{const c=l.match(r),u=l.match(a);if(c&&u){const f=parseInt(c[1]),d=parseInt(u[1]),h=l.indexOf("emoticon")>-1?150:220,p=$A.scaleToScale(f,d,h,h),_=l.replace(r,`original-width="${f}"`).replace(a,`original-height="${d}" style="width:${p.width}px;height:${p.height}px"`);t=t.replace(l,_)}else t=t.replace(l,`<div class="no-size-image-box">${l}</div>`)})}return t},getTextImagesInfo(t){const s=$A.mainUrl(),n=t.match(new RegExp("<img[^>]*?>","g")),o=[];if(n){const r=new RegExp(`src=(["'])([^'"]*)\\1`),a=new RegExp('(original-)?width="(\\d+)"'),l=new RegExp('(original-)?height="(\\d+)"');n.some(c=>{const u=c.match(r),f=c.match(a),d=c.match(l);u&&o.push({src:u[2].replace(/\{\{RemoteURL\}\}/g,s),width:f?f[2]:-1,height:d?d[2]:-1})})}return o},getMsgSimpleDesc(t,s=null){if($A.isJson(t))switch(t.type){case"text":return $A.getMsgTextPreview(t.msg.type==="md"?Ye(t.msg.text):t.msg.text,s);case"vote":return`[${$A.L("\u6295\u7968")}]`+$A.getMsgTextPreview(t.msg.text,s);case"word-chain":return`[${$A.L("\u63A5\u9F99")}]`+$A.getMsgTextPreview(t.msg.text,s);case"record":return`[${$A.L("\u8BED\u97F3")}]`;case"meeting":return`[${$A.L("\u4F1A\u8BAE")}] ${t.msg.name}`;case"file":if(t.msg.type=="img"){if(s){const n=parseInt(t.msg.width),o=parseInt(t.msg.height),r=40,a=$A.scaleToScale(n,o,r,r);return`<img class="${s}" style="width:${a.width}px;height:${a.height}px" src="${t.msg.thumb}">`}return`[${$A.L("\u56FE\u7247")}]`}else if(t.msg.ext=="mp4")return`[${$A.L("\u89C6\u9891")}]`;return`[${$A.L("\u6587\u4EF6")}] ${t.msg.name}`;case"tag":return`[${$A.L(t.msg.action==="remove"?"\u53D6\u6D88\u6807\u6CE8":"\u6807\u6CE8")}] ${$A.getMsgSimpleDesc(t.msg.data)}`;case"top":return`[${$A.L(t.msg.action==="remove"?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876")}] ${$A.getMsgSimpleDesc(t.msg.data)}`;case"todo":return`[${$A.L(t.msg.action==="remove"?"\u53D6\u6D88\u5F85\u529E":t.msg.action==="done"?"\u5B8C\u6210":"\u8BBE\u5F85\u529E")}] ${$A.getMsgSimpleDesc(t.msg.data)}`;case"notice":return t.msg.notice;default:return`[${$A.L("\u672A\u77E5\u7684\u6D88\u606F")}]`}return""},getFileName(t){let s=t.name||"",n=t.ext||"";return n!=""&&(s+="."+n),s},isDooServer(){const t=$A.getDomain($A.mainUrl());return/dootask\.com$/.test(t)||/hitosea\.com$/.test(t)||/^127\.0\.0\.1/.test(t)||/^(10)\./.test(t)||/^(172)\.(1[6-9]|2[0-9]|3[0-1])\./.test(t)||/^(192)\.(168)\./.test(t)},thumbRestore(t){return t=$A.rightDelete(t,"_thumb.jpg"),t=$A.rightDelete(t,"_thumb.png"),t},dataHasFolder(t){const{items:s}=t;if(s){for(const n of s)if(n.kind==="directory"||n.kind==="file"&&n.webkitGetAsEntry().isDirectory)return!0}return!1},loadVConsole(t=void 0){if(typeof t=="string"){switch(t){case"log.o":return $A.IDBSet("logOpen","open").then(s=>{$A.loadVConsole()}),!0;case"log.c":return $A.IDBSet("logOpen","close").then(s=>{$A.loadVConsole()}),!0}return!1}$A.IDBString("logOpen").then(s=>{typeof e.vConsole!="undefined"&&(e.vConsole.destroy(),e.vConsole=null),$A.openLog=s==="open",$A.openLog&&$A.loadScript("js/vconsole.min.js").then(n=>{e.vConsole=new e.VConsole({onReady:()=>{console.log("VConsole: onReady")},onClearLog:()=>{console.log("VConsole: onClearLog")}})}).catch(n=>{$A.modalError("VConsole \u7EC4\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01")})})}}),i.extend({modalConfig(t){return typeof t=="undefined"?t={content:"Undefined"}:typeof t=="string"&&(t={content:t}),t.title=t.title||(typeof t.render=="undefined"?"\u6E29\u99A8\u63D0\u793A":""),t.content=t.content||"",t.okText=t.okText||"\u786E\u5B9A",t.cancelText=t.cancelText||"\u53D6\u6D88",t.language!==!1&&(delete t.language,t.title=$A.L(t.title),t.content=$A.L(t.content),t.okText=$A.L(t.okText),t.cancelText=$A.L(t.cancelText)),t},modalInput(t,s=0){if(s>0){setTimeout(()=>{$A.modalInput(t)},s);return}typeof t=="string"&&(t={title:t});let n="modalInput_"+$A.randomString(6),o={type:t.type||"text",value:t.value,placeholder:$A.L(t.placeholder),elementId:n};$A.isJson(t.inputProps)&&(o=Object.assign(o,t.inputProps));const r=()=>new Promise((l,c)=>{if(!t.onOk){c();return}const u=t.onOk(t.value);if(!u){l();return}u.then?u.then(f=>{f&&$A.messageSuccess(f),l()}).catch(f=>{f&&$A.messageError(f),c()}):(typeof u=="string"&&$A.messageError(u),c())}),a=()=>{typeof t.onCancel=="function"&&t.onCancel()};$A.Modal.confirm({render:l=>l("div",[l("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"20px"}},$A.L(t.title)),l("Input",{props:o,on:{input:c=>{t.value=c},"on-enter":c=>{$A(c.target).parents(".ivu-modal-body").find(".ivu-btn-primary").click()}}})]),onOk:r,onCancel:a,loading:!0,okText:$A.L(t.okText||"\u786E\u5B9A"),cancelText:$A.L(t.cancelText||"\u53D6\u6D88"),okType:t.okType||"primary",cancelType:t.cancelType||"text"}),setTimeout(()=>{document.getElementById(n)&&document.getElementById(n).focus()})},modalConfirm(t,s=0){if(t!==!1){if(s>0){setTimeout(()=>{$A.modalConfirm(t)},s);return}if(t=$A.modalConfig(t),t.loading){const{onOk:n}=t;t.onOk=()=>new Promise((o,r)=>{if(!n){r();return}const a=n();if(!a){o();return}a.then?a.then(l=>{l&&$A.messageSuccess(l),o()}).catch(l=>{l&&$A.messageError(l),r()}):(typeof a=="string"&&$A.messageError(a),r())})}$A.Modal.confirm($A.modalConfig(t))}},modalSuccess(t,s=0){if(t!==!1){if(s>0){setTimeout(()=>{$A.modalSuccess(t)},s);return}$A.Modal.success($A.modalConfig(t))}},modalInfo(t,s=0){if(t!==!1){if(s>0){setTimeout(()=>{$A.modalInfo(t)},s);return}$A.Modal.info($A.modalConfig(t))}},modalWarning(t,s=0){if(t!==!1){if(s>0){setTimeout(()=>{$A.modalWarning(t)},s);return}typeof t=="string"&&t==="Network exception"||$A.isJson(t)&&t.content==="Network exception"||$A.Modal.warning($A.modalConfig(t))}},modalError(t,s=0){if(t!==!1){if(s>0){setTimeout(()=>{$A.modalError(t)},s);return}typeof t=="string"&&t==="Network exception"||$A.isJson(t)&&t.content==="Network exception"||$A.Modal.error($A.modalConfig(t))}},modalAlert(t){t!==!1&&alert($A.L(t))},messageSuccess(t){$A.Message.success($A.L(t))},messageWarning(t){typeof t=="string"&&t==="Network exception"||$A.Message.warning($A.L(t))},messageError(t){typeof t=="string"&&t==="Network exception"||$A.Message.error($A.L(t))},noticeConfig(t){return typeof t=="undefined"?t={desc:"Undefined"}:typeof t=="string"&&(t={desc:t}),t.title=$A.L(t.title||(typeof t.render=="undefined"?"\u6E29\u99A8\u63D0\u793A":"")),t.desc=$A.L(t.desc||""),t},noticeSuccess(t){$A.Notice.success($A.noticeConfig(t))},noticeWarning(t){$A.Notice.warning($A.noticeConfig(t))},noticeError(t){typeof t=="string"&&(t={desc:t,duration:6}),$A.Notice.error($A.noticeConfig(t))}}),i.extend({dark:{utils:{supportMode(){let t=typeof e!="undefined"&&e.navigator.userAgent.toLowerCase();return`${t.match(/Chrome/i)}`=="chrome"?"chrome":`${t.match(/Webkit/i)}`=="webkit"?"webkit":null},defaultFilter(){return"-webkit-filter: invert(100%) hue-rotate(180deg) contrast(90%) !important; filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;"},reverseFilter(){return"-webkit-filter: invert(100%) hue-rotate(180deg) contrast(110%) !important; filter: invert(100%) hue-rotate(180deg) contrast(110%) !important;"},noneFilter(){return"-webkit-filter: none !important; filter: none !important;"},addExtraStyle(){try{return""}catch{return""}},addStyle(t,s,n){s=s||"style";let o=document;if(o.getElementById(t))return;let a=o.createElement(s);a.rel="stylesheet",a.id=t,s==="style"?a.innerHTML=n:a.href=n,document.head.appendChild(a)},getClassList(t){return t.classList||[]},addClass(t,s){return this.getClassList(t).add(s),this},removeClass(t,s){return this.getClassList(t).remove(s),this},hasClass(t,s){return this.getClassList(t).contains(s)},hasElementById(t){return document.getElementById(t)},removeElementById(t){let s=document.getElementById(t);s&&s.parentNode.removeChild(s)}},createDarkStyle(){this.utils.addStyle("dark-mode-style","style",`
                @media screen {
                    html {
                        ${this.utils.defaultFilter()}
                        will-change: transform;
                    }

                    /* Default Reverse rule */
                    img,
                    video,
                    iframe,
                    canvas,
                    :not(object):not(body) > embed,
                    object,
                    svg image,
                    [style*="background:url"],
                    [style*="background-image:url"],
                    [style*="background: url"],
                    [style*="background-image: url"],
                    [background],
                    .no-dark-mode,
                    .no-dark-content,
                    .no-dark-before:before {
                        ${this.utils.reverseFilter()}
                        will-change: transform;
                    }

                    [style*="background:url"] *,
                    [style*="background-image:url"] *,
                    [style*="background: url"] *,
                    [style*="background-image: url"] *,
                    input,
                    [background] *,
                    .no-dark-content img,
                    .no-dark-content canvas,
                    .no-dark-content svg image {
                        ${this.utils.noneFilter()}
                    }

                    /* Text contrast */
                    html {
                        text-shadow: 0 0 0 !important;
                    }

                    /* Full screen */
                    .no-filter,
                    :-webkit-full-screen,
                    :-webkit-full-screen *,
                    :-moz-full-screen,
                    :-moz-full-screen *,
                    :fullscreen,
                    :fullscreen * {
                        ${this.utils.noneFilter()}
                    }

                    /* Page background */
                    html {
                        min-width: 100%;
                        min-height: 100%;
                    }
                    .child-view {
                        background-color: #fff;
                    }
                    .page-login {
                        background-color: #f8f8f8;
                    }
                    ${this.utils.addExtraStyle()}
                }

                @media print {
                    .no-print {
                        display: none !important;
                    }
                }`)},enableDarkMode(){!this.utils.supportMode()||this.isDarkEnabled()||(this.createDarkStyle(),this.utils.addClass(document.body,"dark-mode-reverse"))},disableDarkMode(){!this.isDarkEnabled()||(this.utils.removeElementById("dark-mode-style"),this.utils.removeClass(document.body,"dark-mode-reverse"))},autoDarkMode(){let t=e.matchMedia&&e.matchMedia("(prefers-color-scheme: dark)").matches;$A.isEEUiApp&&(t=$A.eeuiAppGetThemeName()==="dark"),t?this.enableDarkMode():this.disableDarkMode()},isDarkEnabled(){return this.utils.hasClass(document.body,"dark-mode-reverse")}}}),e.$A=i})(window);var Je=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("transition",{attrs:{name:"fade"}},[e.floatSpinnerLoad>0?t("div",{staticClass:"common-float-spinner"},[t("Loading",{staticClass:"common-float-circular"})],1):e._e()])},Ke=[];function A(e,i,t,s,n,o,r,a){var l=typeof e=="function"?e.options:e;i&&(l.render=i,l.staticRenderFns=t,l._compiled=!0),s&&(l.functional=!0),o&&(l._scopeId="data-v-"+o);var c;if(r?(c=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(d=__VUE_SSR_CONTEXT__),n&&n.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(r)},l._ssrRegister=c):n&&(c=a?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(h,p){return c.call(p),u(h,p)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:l}}const Ge={name:"FloatSpinner",computed:{...C(["floatSpinnerLoad"])}},Q={};var Xe=A(Ge,Je,Ke,!1,qe,null,null,null);function qe(e){for(let i in Q)this[i]=Q[i]}var Qe=function(){return Xe.exports}(),Ze=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"common-right-bottom"},[e.showSSO?t("div",{staticClass:"common-right-bottom-link",on:{click:e.useSSOLogin}},[t("Icon",{attrs:{type:"ios-globe-outline"}}),e._v(" "+e._s(e.$L("\u4F7F\u7528 SSO \u767B\u5F55"))+" ")],1):e._e(),e.showDown?[e.downloadUrl?t("a",{staticClass:"common-right-bottom-link",attrs:{href:e.downloadUrl,target:"_blank"}},[t("Icon",{attrs:{type:"md-download"}}),e._v(" "+e._s(e.$L("\u5BA2\u6237\u7AEF\u4E0B\u8F7D"))+" ")],1):e.updateVersion&&e.updateBottomShow&&e.$Electron?t("div",{staticClass:"common-right-bottom-link",on:{click:function(s){e.updateShow=!0}}},[t("Icon",{attrs:{type:"md-download"}}),e._v(" "+e._s(e.$L("\u66F4\u65B0\u5BA2\u6237\u7AEF"))+" ")],1):e._e()]:e._e(),e.showPrivacy?t("a",{staticClass:"common-right-bottom-link",attrs:{target:"_blank",href:e.$A.apiUrl("privacy")}},[e._v(" \u300A"+e._s(e.$L("\u9690\u79C1\u653F\u7B56"))+"\u300B ")]):e._e(),t("Modal",{attrs:{closable:!1,"mask-closable":!1,"class-name":"common-right-bottom-notification"},model:{value:e.updateShow,callback:function(s){e.updateShow=s},expression:"updateShow"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticClass:"notification-head"},[t("div",{staticClass:"notification-title"},[e._v(e._s(e.$L("\u53D1\u73B0\u65B0\u7248\u672C")))]),t("Tag",{attrs:{color:"volcano"}},[e._v("v"+e._s(e.systemVersion)+" -> v"+e._s(e.updateVersion))])],1),e.$Platform==="mac"?t("div",{staticClass:"notification-tip"},[e._v(e._s(e.$L("\u79BB\u6700\u65B0\u7248\u672C\u53EA\u6709\u4E00\u6B65\u4E4B\u9065\u4E86\uFF01\u91CD\u65B0\u542F\u52A8\u5E94\u7528\u5373\u53EF\u5B8C\u6210\u66F4\u65B0\u3002")))]):e._e()]),t("Scrollbar",{attrs:{"class-name":"notification-body"}},[t("VMPreview",{attrs:{value:e.updateNote}})],1),t("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"default"},on:{click:function(s){e.updateShow=!1}}},[e._v(e._s(e.$L("\u7A0D\u540E")))]),t("Button",{attrs:{type:"primary",loading:e.updateIng},on:{click:e.updateQuitAndInstall}},[e._v(e._s(e.$L(e.$Platform==="mac"?"\u91CD\u65B0\u542F\u52A8":"\u7ACB\u5373\u5347\u7EA7")))])],1)],1)],2)},et=[];const tt=()=>m(()=>import("./preview.029c50bc.js"),["js/build/preview.029c50bc.js","js/build/openpgp_hi.15f91b1d.js","js/build/index.40a8e116.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"]),st={name:"RightBottom",components:{VMPreview:tt},data(){return{loadIng:0,subscribe:null,apiVersion:"",systemVersion:window.systemInfo.version,updateVersion:"",updateNote:"",updateShow:!1,updateBottomShow:!1,updateIng:!1,downloadUrl:""}},mounted(){this.prefetchResources(),this.checkVersion(),this.$Electron&&(this.subscribe=x.Store.subscribe("updateNotification",e=>{this.updateShow=!0}),this.$Electron.registerMsgListener("updateDownloaded",e=>{this.$store.state.clientNewVersion=e.version,this.updateVersion=e.version,this.updateNote=e.releaseNotes||this.$L("\u6CA1\u6709\u66F4\u65B0\u63CF\u8FF0\u3002"),this.updateShow=!$A.strExists(this.updateNote,`[${this.updateVersion}-Silence]`)}))},beforeDestroy(){this.subscribe&&(this.subscribe.unsubscribe(),this.subscribe=null)},watch:{updateShow(e){e&&(this.updateBottomShow=!0)}},computed:{showSSO(){return this.$isSoftware&&["login"].includes(this.$route.name)},showDown(){return!this.$isEEUiApp&&!this.windowTouch&&["login","index","manage-dashboard"].includes(this.$route.name)},showPrivacy(){return $A.isDooServer()&&this.$isEEUiApp&&["login"].includes(this.$route.name)}},methods:{isNotServer(){let e=$A.getDomain(window.systemInfo.apiUrl);return this.$isSoftware&&(e==""||e=="public")},prefetchResources(){this.isNotServer()||this.$Electron&&$A.$isSubElectron||F.get($A.apiUrl("system/prefetch")).then(({status:e,data:i})=>{e===200&&i.forEach(t=>{const s=document.createElement("link");s.rel="prefetch",s.href=t,s.onload=()=>{document.head.removeChild(s)},s.onerror=()=>{document.head.removeChild(s)},document.head.appendChild(s)})}).catch(e=>{})},checkVersion(){this.isNotServer()||(F.get($A.apiUrl("system/version")).then(({status:e,data:i})=>{e===200&&(this.apiVersion=i.version||"",this.compareVersion(this.apiVersion,"0.19.0")===-1&&$A.modalWarning({title:"\u6E29\u99A8\u63D0\u793A",message:`\u670D\u52A1\u5668\uFF08${$A.getDomain($A.mainUrl())}\uFF09\u63A5\u53E3\u7248\u672C\u8FC7\u4F4E\uFF0C\u90E8\u5206\u529F\u80FD\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528\u3002`}),this.$Electron?this.$Electron.sendMessage("updateCheckAndDownload",{apiVersion:this.apiVersion}):this.getDownloadUrl(i.publish))}).catch(e=>{}),this.__checkVersion&&clearTimeout(this.__checkVersion),this.__checkVersion=setTimeout(this.checkVersion,600*1e3))},getDownloadUrl(e){if(!!$A.isJson(e))switch(e.provider){case"generic":this.downloadUrl=`${e.url}/latest`;break;case"github":(async i=>{let t="cacheAppdown::"+this.apiVersion,s=await $A.IDBJson(t),n=600;if(s.time&&s.time+n>$A.dayjs().unix()){this.downloadUrl=s.data.html_url;return}this.loadIng>0||(this.loadIng++,F.get(`https://api.github.com/repos/${e.owner}/${e.repo}/releases`).then(({status:o,data:r})=>{this.loadIng--,o===200&&$A.isArray(r)&&(s.time=$A.dayjs().unix(),s.data=r.find(({tag_name:a})=>this.compareVersion(this.tagVersion(a),this.apiVersion)===0)||{},$A.IDBSave(t,s),this.downloadUrl=s.data.html_url)}).catch(()=>{this.loadIng--}))})();break}},updateQuitAndInstall(){this.updateIng=!0,setTimeout(()=>{this.$Electron.sendMessage("updateQuitAndInstall")},301)},useSSOLogin(){x.Store.set("useSSOLogin",!0)},tagVersion(e){return e?$A.leftDelete(e.toLowerCase(),"v"):""},compareVersion(e,i){let t=0,s=0;if(e===i)return 0;const n=(o,r)=>{let a=r;for(;o[a]!=="."&&a<o.length;)a++;return a};for(;t<e.length&&s<i.length;){const o=n(e,t),r=n(i,s),a=+e.substr(t,o-t),l=+i.substr(s,r-s);if(a!==l)return a>l?1:-1;t=o+1,s=r+1}for(;t<e.length;){const o=n(e,t);if(+e.substr(t,o-t)>0)return 1;t=o+1}for(;s<i.length;){const o=n(i,s);if(+i.substr(s,o-s)>0)return-1;s=o+1}return 0}}},Z={};var it=A(st,Ze,et,!1,nt,null,null,null);function nt(e){for(let i in Z)this[i]=Z[i]}var ot=function(){return it.exports}(),rt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("Modal",{attrs:{mask:!1,"mask-closable":!1,"footer-hide":!0,"transition-names":["",""],"class-name":e.viewMode==="desktop"?"common-preview-image-view":"common-preview-image-swipe",fullscreen:""},model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[e.list.length>0?[e.viewVideo?t("PreviewVideoView",{attrs:{item:e.viewVideo}}):e.viewMode==="desktop"?t("PreviewImageView",{attrs:{"initial-index":e.index,"url-list":e.list,infinite:""}}):e.viewMode==="mobile"?t("PreviewImageSwipe",{attrs:{"initial-index":e.index,"url-list":e.list},on:{"on-destroy":function(s){e.show=!1}}}):e._e()]:e._e()],2)},at=[];const lt=()=>m(()=>import("./video.6e12a2d0.js"),["js/build/video.6e12a2d0.js","js/build/video.85f66e68.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"]),ct=()=>m(()=>import("./view.0ca5c7bc.js"),["js/build/view.0ca5c7bc.js","js/build/view.856f2ef1.css","js/build/element-sea.c283d284.js","js/build/vue.296078bd.js","js/build/@babel.43d8d0a5.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js"]),ut=()=>m(()=>import("./swipe.204aac5b.js"),["js/build/swipe.204aac5b.js","js/build/swipe.7b577070.css","js/build/openpgp_hi.15f91b1d.js","js/build/photoswipe.a7142509.js","js/build/photoswipe.0fb72215.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"]),dt={name:"PreviewImage",components:{PreviewVideoView:lt,PreviewImageSwipe:ut,PreviewImageView:ct},props:{value:{type:Boolean,default:!1},index:{type:Number,default:0},list:{type:Array,default:()=>[]},mode:{type:String,default:null}},data(){return{show:this.value}},watch:{value(e){this.show=e},show(e){this.value!==e&&this.$emit("input",e)}},computed:{viewVideo(){return this.list.length===0?!1:this.list.find(({src:i})=>/\.mp4$/i.test(i))||!1},viewMode(){return this.mode?this.mode:this.windowTouch?"mobile":"desktop"}}},ee={};var ft=A(dt,rt,at,!1,ht,null,null,null);function ht(e){for(let i in ee)this[i]=ee[i]}var pt=function(){return ft.exports}(),mt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("PreviewImage",{attrs:{index:e.previewImageIndex,list:e.previewImageList},model:{value:e.show,callback:function(s){e.show=s},expression:"show"}})},gt=[];const _t={name:"PreviewImageState",components:{PreviewImage:pt},computed:{...C(["previewImageIndex","previewImageList"])},data(){return{show:!1}},watch:{show(e){e?this.$store.state.previewImageIndex=Math.min(Math.max(this.$store.state.previewImageIndex,0),this.$store.state.previewImageList.length-1):(this.$store.state.previewImageIndex=0,this.$store.state.previewImageList=[])},previewImageList(e){if(e.length>0)if($A.isEEUiApp){let i=Math.min(Math.max(this.$store.state.previewImageIndex,0),this.$store.state.previewImageList.length-1),t=e.map(o=>$A.isJson(o)?$A.thumbRestore(o.src):$A.thumbRestore(o)),s=50;if(t.length>s){const o=[];let r=0;for(;o.length<s&&r<s;){let a=i-r,l=i+r+1;a>=0&&o.unshift(t[a]),l<t.length&&o.push(t[l]),r++}i=o.findIndex(a=>a===t[i]),t=o}const n=t.find(o=>/\.mp4$/i.test(o));if(n){$A.eeuiAppSendMessage({action:"videoPreview",path:n});return}$A.eeuiAppSendMessage({action:"picturePreview",position:i,paths:t})}else this.show=!0}}},te={};var wt=A(_t,mt,gt,!1,yt,null,null,null);function yt(e){for(let i in te)this[i]=te[i]}var $t=function(){return wt.exports}(),vt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"common-network-exception"},[e.type==="alert"?[e.show?t("Alert",{attrs:{type:"error","show-icon":"",closable:""}},[e._v(e._s(e.$L("\u7F51\u7EDC\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8BBE\u7F6E\u3002")))]):e._e()]:e.type==="modal"?[t("Modal",{attrs:{width:416,closable:!1,"footer-hide":!0,"class-name":"common-network-exception-modal"},model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[t("div",{staticClass:"ivu-modal-confirm"},[t("div",{staticClass:"ivu-modal-confirm-head"},[t("div",{staticClass:"ivu-modal-confirm-head-icon ivu-modal-confirm-head-icon-error"},[t("Icon",{attrs:{type:"ios-close-circle"}})],1),t("div",{staticClass:"ivu-modal-confirm-head-title"},[e._v(e._s(e.$L("\u6E29\u99A8\u63D0\u793A")))])]),t("div",{staticClass:"ivu-modal-confirm-body"},[t("div",[e._v(e._s(e.$L("\u7F51\u7EDC\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8BBE\u7F6E\u3002")))])]),t("div",{staticClass:"ivu-modal-confirm-footer"},[t("Button",{attrs:{type:"primary"},on:{click:function(s){e.show=!1}}},[e._v(e._s(e.$L("\u786E\u5B9A")))])],1)])])]:e._e()],2)},At=[];const kt={name:"NetworkException",props:{type:{type:String,default:"modal"}},data(){return{show:!1,timeShow:null,timeCheck:null}},beforeDestroy(){this.clearTimer()},computed:{...C(["ajaxNetworkException"])},watch:{ajaxNetworkException:{handler(e){this.clearTimer(),e&&(this.checkNetwork(),this.timeShow=setTimeout(i=>{this.show=!0},5e3))},immediate:!0}},methods:{isNotServer(){let e=$A.getDomain(window.systemInfo.apiUrl);return this.$isSoftware&&(e==""||e=="public")},checkNetwork(){this.timeCheck&&clearTimeout(this.timeCheck),this.timeCheck=setTimeout(()=>{!this.ajaxNetworkException||this.isNotServer()||this.$store.dispatch("call",{url:"system/setting"}).finally(()=>{this.checkNetwork()})},3e3)},clearTimer(){this.timeShow&&clearTimeout(this.timeShow),this.show=!1}}},se={};var bt=A(kt,vt,At,!1,Tt,null,null,null);function Tt(e){for(let i in se)this[i]=se[i]}var St=function(){return bt.exports}(),It=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.show?t("div",{staticClass:"common-guide"},[t("img",{attrs:{src:e.src,width:"100%"}}),t("div",[t("Button",{attrs:{type:"default",size:"large"},on:{click:function(s){e.show=!1}}},[e._v(e._s(e.$L("\u5FCD\u5FC3\u62D2\u7EDD")))])],1)]):e._e()},Dt=[];const xt={name:"GuidePage",data(){return{show:!1,src:""}},mounted(){this.src=$.apiUrl("../images/guide.png")},watch:{$route:{handler(e){this.show=!1,navigator.userAgent.indexOf("MicroMessenger")!==-1&&e.name=="manage-project-invite"&&(this.show=!0)},immediate:!0}}},ie={};var Ct=A(xt,It,Dt,!1,Et,null,null,null);function Et(e){for(let i in ie)this[i]=ie[i]}var Lt=function(){return Ct.exports}(),Mt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"task-menu-icon",on:{click:e.handleClick}},[e.loadIng?t("div",{staticClass:"loading"},[t("Loading")],1):[e.task.complete_at?t("Icon",{staticClass:"completed",attrs:{type:e.completedIcon}}):t("Icon",{staticClass:"uncomplete",attrs:{type:e.icon}})]],2)},Pt=[];const jt={name:"TaskMenu",props:{task:{type:Object,default:()=>({})},loadStatus:{type:Boolean,default:!1},colorShow:{type:Boolean,default:!0},operationShow:{type:Boolean,default:!0},updateBefore:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"small"},icon:{type:String,default:"md-radio-button-off"},completedIcon:{type:String,default:"md-checkmark-circle"},projectId:{type:Number,default:0}},computed:{...C(["loads","taskFlows"]),...$e(["isLoad"]),loadIng(){return this.loadStatus?!0:this.isLoad(`task-${this.task.id}`)}},methods:{handleClick(e){this.$store.state.taskOperation={event:e,task:this.task,loadStatus:this.loadStatus,colorShow:this.colorShow,operationShow:this.operationShow,updateBefore:this.updateBefore,disabled:this.disabled,size:this.size,projectId:this.projectId,onUpdate:i=>{this.$emit("on-update",i)}}},updateTask(e){if(this.loadIng)return;Object.keys(e).forEach(t=>this.$set(this.task,t,e[t]));const i=Object.assign(e,{task_id:this.task.id});this.$store.dispatch("taskUpdate",i).then(({data:t,msg:s})=>{$A.messageSuccess(s),this.$store.dispatch("saveTaskBrowse",i.task_id),this.$emit("on-update",t)}).catch(({msg:t})=>{$A.modalError(t),this.$store.dispatch("getTaskOne",i.task_id).catch(()=>{})})}}},ne={};var Bt=A(jt,Mt,Pt,!1,Ot,null,null,null);function Ot(e){for(let i in ne)this[i]=ne[i]}var Ut=function(){return Bt.exports}(),Rt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"common-user-select",class:e.warpClass},[e.module?e._e():t("ul",[e._l(e.values,function(s){return s?t("li",{on:{click:e.onSelection}},[t("UserAvatar",{attrs:{userid:s,size:e.avatarSize,"show-icon":e.avatarIcon,"show-name":e.avatarName}})],1):e._e()}),e.addIcon||e.values.length===0?t("li",{staticClass:"add-icon",style:e.addStyle,on:{click:e.onSelection}}):e._e()],2),t("Modal",{attrs:{"class-name":"common-user-select-modal","mask-closable":!1,closable:!e.isFullscreen,fullscreen:e.isFullscreen,"footer-hide":e.isFullscreen,width:"640"},scopedSlots:e._u([{key:"header",fn:function(){return[e.isFullscreen?t("div",{staticClass:"user-modal-header"},[t("div",{staticClass:"user-modal-close",on:{click:function(s){e.showModal=!1}}},[e._v(e._s(e.$L("\u5173\u95ED")))]),t("div",{staticClass:"user-modal-title"},[t("span",[e._v(e._s(e.localTitle))])]),t("div",{staticClass:"user-modal-submit",on:{click:e.onSubmit}},[e.submittIng>0?t("div",{staticClass:"submit-loading"},[t("Loading")],1):e._e(),e._v(" "+e._s(e.$L("\u786E\u5B9A"))+" "),e.selects.length>0?[e._v(" ("+e._s(e.selects.length)),e.multipleMax?t("span",[e._v("/"+e._s(e.multipleMax))]):e._e(),e._v(") ")]:e._e()],2)]):t("div",{staticClass:"ivu-modal-header-inner"},[e._v(e._s(e.localTitle))])]},proxy:!0},{key:"close",fn:function(){return[t("i",{staticClass:"ivu-icon ivu-icon-ios-close"})]},proxy:!0},{key:"footer",fn:function(){return[t("Button",{attrs:{type:"primary",loading:e.submittIng>0},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$L("\u786E\u5B9A"))+" "),e.selects.length>0?[e._v(" ("+e._s(e.selects.length)),e.multipleMax?t("span",[e._v("/"+e._s(e.multipleMax))]):e._e(),e._v(") ")]:e._e()],2)]},proxy:!0}]),model:{value:e.showModal,callback:function(s){e.showModal=s},expression:"showModal"}},[t("div",{staticClass:"user-modal-search"},[e.selects.length>0?t("Scrollbar",{ref:"selected",staticClass:"search-selected",attrs:{"enable-x":"","enable-y":!1}},[t("ul",e._l(e.formatSelect(e.selects),function(s){return t("li",{attrs:{"data-id":s.userid},on:{click:function(n){return n.stopPropagation(),e.onRemoveItem(s.userid)}}},[s.type=="group"?[s.avatar?t("EAvatar",{staticClass:"img-avatar",attrs:{src:s.avatar,size:32}}):s.group_type=="department"?t("i",{staticClass:"taskfont icon-avatar department"},[e._v("\uE75C")]):s.group_type=="project"?t("i",{staticClass:"taskfont icon-avatar project"},[e._v("\uE6F9")]):s.group_type=="task"?t("i",{staticClass:"taskfont icon-avatar task"},[e._v("\uE6F4")]):s.group_type=="okr"?t("i",{staticClass:"taskfont icon-avatar task"},[e._v("\uE6F4")]):t("Icon",{staticClass:"icon-avatar",attrs:{type:"ios-people"}})]:t("UserAvatar",{attrs:{userid:s.userid}})],2)}),0)]):e._e(),t("div",{staticClass:"search-input"},[t("div",{staticClass:"search-pre"},[e.loadIng>0?t("Loading"):t("Icon",{attrs:{type:"ios-search"}})],1),t("Input",{attrs:{placeholder:e.localPlaceholder,clearable:""},model:{value:e.searchKey,callback:function(s){e.searchKey=s},expression:"searchKey"}})],1)],1),e.isWhole?t("ul",{staticClass:"user-modal-switch"},e._l(e.switchItems,function(s){return t("li",{key:s.key,class:{active:e.switchActive===s.key},on:{click:function(n){e.switchActive=s.key}}},[e._v(e._s(e.$L(s.label)))])}),0):e._e(),e.lists.length>0?t("Scrollbar",{staticClass:"user-modal-list"},[e.switchActive=="project"?t("ul",{staticClass:"user-modal-project"},e._l(e.lists,function(s){return t("li",{class:e.selectClass(s.userid_list),on:{click:function(n){return e.onSelectProject(s.userid_list)}}},[t("Icon",{staticClass:"user-modal-icon",attrs:{type:e.selectIcon(s.userid_list)}}),t("div",{staticClass:"user-modal-avatar"},[t("i",{staticClass:"taskfont icon-avatar"},[e._v("\uE6F9")]),t("div",{staticClass:"project-name"},[t("div",{staticClass:"label"},[e._v(e._s(s.name))]),t("div",{staticClass:"subtitle"},[e._v(" "+e._s(s.userid_list.length)+" "+e._s(e.$L("\u9879\u76EE\u6210\u5458"))+" "),t("em",{staticClass:"all"},[e._v(e._s(e.$L("\u5DF2\u5168\u9009")))]),t("em",{staticClass:"some"},[e._v(e._s(e.$L("\u5DF2\u9009\u90E8\u5206")))])])])])],1)}),0):t("ul",[e.showSelectAll?t("li",{class:e.selectClass("all"),on:{click:e.onSelectAll}},[t("Icon",{staticClass:"user-modal-icon",attrs:{type:e.selectIcon("all")}}),t("div",{staticClass:"user-modal-all"},[e._v(e._s(e.$L("\u5168\u9009")))])],1):e._e(),e._l(e.lists,function(s){return t("li",{class:{selected:e.selects.includes(s.userid),disabled:e.isUncancelable(s.userid)||e.isDisabled(s.userid)},on:{click:function(n){return e.onSelectItem(s)}}},[e.selects.includes(s.userid)?t("Icon",{staticClass:"user-modal-icon",attrs:{type:"ios-checkmark-circle"}}):t("Icon",{staticClass:"user-modal-icon",attrs:{type:"ios-radio-button-off"}}),s.type=="group"?t("div",{staticClass:"user-modal-avatar"},[s.avatar?t("EAvatar",{staticClass:"img-avatar",attrs:{src:s.avatar,size:40}}):s.group_type=="department"?t("i",{staticClass:"taskfont icon-avatar department"},[e._v("\uE75C")]):s.group_type=="project"?t("i",{staticClass:"taskfont icon-avatar project"},[e._v("\uE6F9")]):s.group_type=="task"?t("i",{staticClass:"taskfont icon-avatar task"},[e._v("\uE6F4")]):s.group_type=="okr"?t("i",{staticClass:"taskfont icon-avatar task"},[e._v("\uE6F4")]):t("Icon",{staticClass:"icon-avatar",attrs:{type:"ios-people"}}),t("div",{staticClass:"avatar-name"},[t("span",[e._v(e._s(s.name))])])],1):t("UserAvatar",{staticClass:"user-modal-avatar",attrs:{userid:s.userid,size:40,"show-name":""}})],1)})],2)]):t("div",{staticClass:"user-modal-empty"},[e.waitIng>0?t("Loading"):[t("div",{staticClass:"empty-icon"},[t("Icon",{attrs:{type:"ios-cafe-outline"}})],1),t("div",{staticClass:"empty-text"},[e._v(e._s(e.$L("\u6682\u65E0\u7ED3\u679C")))])]],2)],1)],1)},Nt=[];const Wt={name:"UserSelect",props:{value:{type:[String,Number,Array],default:()=>[]},uncancelable:{type:Array,default:()=>[]},disabledChoice:{type:Array,default:()=>[]},projectId:{type:Number,default:0},noProjectId:{type:Number,default:0},dialogId:{type:Number,default:0},showBot:{type:Boolean,default:!1},showDisable:{type:Boolean,default:!1},multipleMax:{type:Number},avatarSize:{type:Number,default:28},avatarIcon:{type:Boolean,default:!0},avatarName:{type:Boolean,default:!1},addIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},title:{type:String},placeholder:{type:String},showSelectAll:{type:Boolean,default:!0},showDialog:{type:Boolean,default:!1},module:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onlyGroup:{type:Boolean,default:!1},beforeSubmit:Function},data(){return{switchItems:[{key:"recent",label:"\u6700\u8FD1"},{key:"contact",label:"\u901A\u8BAF\u5F55"},{key:"project",label:"\u9879\u76EE\u6210\u5458"}],switchActive:"recent",loadIng:0,waitIng:0,submittIng:0,values:[],selects:[],recents:[],contacts:[],projects:[],showModal:!1,searchKey:null,searchCache:[]}},watch:{value:{handler(e){typeof e=="number"?this.$emit("input",e>0?[e]:[]):typeof e=="string"&&(e=e.indexOf(",")>-1?e.split(","):[e],this.$emit("input",e.map(i=>$A.runNum(i)).filter(i=>i>0))),this.values=e},immediate:!0},isWhole:{handler(e){e||this.onlyGroup?this.switchActive="recent":this.switchActive="contact"},immediate:!0},showModal(e){e?this.searchBefore():this.searchKey="",this.$emit("on-show-change",e)},searchKey(){this.searchBefore()},switchActive(){this.searchBefore()}},computed:{...C(["cacheDialogs"]),isFullscreen({windowWidth:e}){return e<576},isWhole({projectId:e,noProjectId:i,dialogId:t,onlyGroup:s}){return e===0&&i===0&&t===0&&!s},lists({switchActive:e,searchKey:i,recents:t,contacts:s,projects:n}){switch(e){case"recent":return i?t.filter(o=>`${o.name}`.indexOf(i)>-1):t;case"contact":return s;case"project":return n}return[]},isSelectAll({lists:e,selects:i}){return e.length>0&&e.filter(t=>i.includes(t.userid)).length===e.length},warpClass(){return{"select-module":this.module,"select-border":this.border,"select-whole":this.isWhole}},addStyle({avatarSize:e}){return{width:e+"px",height:e+"px"}},localTitle({title:e}){return e===void 0?this.$L("\u9009\u62E9\u4F1A\u5458"):e},localPlaceholder({placeholder:e}){return e===void 0?this.$L("\u641C\u7D22"):e}},methods:{isUncancelable(e){return this.uncancelable.length===0?!1:this.uncancelable.includes(e)},isDisabled(e){return this.disabledChoice.length===0?!1:this.disabledChoice.includes(e)},formatSelect(e){return e.map(i=>$A.leftExists(i,"d:")?this.recents.find(t=>t.userid===i):{type:"user",userid:i})},selectIcon(e){if(e==="all")return this.isSelectAll?"ios-checkmark-circle":"ios-radio-button-off";if($A.isArray(e)&&e.length>0){const i=e.filter(t=>this.selects.includes(t)).length;if(i===e.length)return"ios-checkmark-circle";if(i>0)return"ios-remove-circle"}return"ios-radio-button-off"},selectClass(e){switch(this.selectIcon(e)){case"ios-checkmark-circle":return"selected";case"ios-remove-circle":return"somed"}return""},searchBefore(){!this.showModal||(this.switchActive==="recent"?this.searchRecent():this.switchActive==="contact"?this.searchContact():this.switchActive==="project"&&this.searchProject())},searchRecent(){this.recents=this.cacheDialogs.filter(e=>this.onlyGroup&&e.type!="group"||e.name===void 0||e.dialog_delete===1||!this.showBot&&e.bot?!1:this.showDialog||e.type==="user").sort((e,i)=>e.top_at||i.top_at?$A.dayjs(i.top_at)-$A.dayjs(e.top_at):e.todo_num>0||i.todo_num>0?i.todo_num-e.todo_num:$A.dayjs(i.last_at)-$A.dayjs(e.last_at)).map(({id:e,name:i,type:t,group_type:s,avatar:n,dialog_user:o})=>({name:i,type:t,group_type:s,avatar:n,userid:t==="user"?o.userid:`d:${e}`}))},searchContact(){let e=this.searchKey;const i=this.searchCache.find(t=>t.type==="contact"&&t.key==e);i&&(this.contacts=i.data),this.waitIng++,setTimeout(()=>{if(this.searchKey!=e){this.waitIng--;return}setTimeout(()=>{this.loadIng++},300),this.$store.dispatch("call",{url:"users/search",data:{keys:{key:e,project_id:this.projectId,no_project_id:this.noProjectId,dialog_id:this.dialogId,bot:this.showBot&&e?2:0,disable:this.showDisable&&e?2:0},take:50}}).then(({data:t})=>{t=t.map(o=>Object.assign(o,{type:"user"})),this.contacts=t;const s=this.searchCache.findIndex(o=>o.key==e),n={type:"contact",key:e,data:t,time:$A.dayjs().unix()};s>-1?this.searchCache.splice(s,1,n):this.searchCache.push(n)}).catch(({msg:t})=>{this.contacts=[],$A.messageWarning(t)}).finally(t=>{this.loadIng--,this.waitIng--})},this.searchCache.length>0?300:0)},searchProject(){let e=this.searchKey;const i=this.searchCache.find(t=>t.type==="project"&&t.key==e);i&&(this.projects=i.data),this.waitIng++,setTimeout(()=>{if(this.searchKey!=e){this.waitIng--;return}setTimeout(()=>{this.loadIng++},300),this.$store.dispatch("call",{url:"project/lists",data:{type:"team",keys:{name:e},getuserid:"yes",getstatistics:"no"}}).then(({data:t})=>{t=t.data.map(o=>Object.assign(o,{type:"project"})),this.projects=t;const s=this.searchCache.findIndex(o=>o.key==e),n={type:"project",key:e,data:t,time:$A.dayjs().unix()};s>-1?this.searchCache.splice(s,1,n):this.searchCache.push(n)}).catch(({msg:t})=>{this.projects=[],$A.messageWarning(t)}).finally(t=>{this.loadIng--,this.waitIng--})},this.searchCache.length>0?300:0)},onSelection(){this.disabled||this.$nextTick(e=>{this.selects=$A.cloneJSON(this.values),this.showModal=!0})},onSelectAll(){if(this.isSelectAll){this.selects=$A.cloneJSON(this.uncancelable);return}this.lists.some(e=>{if(this.isDisabled(e.userid))return!1;if(this.multipleMax&&this.selects.length>=this.multipleMax)return $A.messageWarning("\u5DF2\u8D85\u8FC7\u6700\u5927\u9009\u62E9\u6570\u91CF"),!0;this.selects.includes(e.userid)||this.selects.push(e.userid)})},onSelectItem({userid:e}){if(this.selects.includes(e)){if(this.isUncancelable(e))return;this.selects=this.selects.filter(i=>i!=e)}else{if(this.isDisabled(e))return;if(this.multipleMax&&this.selects.length>=this.multipleMax){if(this.multipleMax>1){$A.messageWarning("\u5DF2\u8D85\u8FC7\u6700\u5927\u9009\u62E9\u6570\u91CF");return}this.selects=[]}this.selects.push(e),this.$nextTick(()=>{$A.scrollIntoViewIfNeeded(this.$refs.selected.querySelector(`li[data-id="${e}"]`))})}},onSelectProject(e){switch(this.selectIcon(e)){case"ios-checkmark-circle":const i=e.filter(s=>!this.isUncancelable(s));i.length!=e.length&&$A.messageWarning("\u90E8\u5206\u6210\u5458\u7981\u6B62\u53D6\u6D88"),this.selects=this.selects.filter(s=>!i.includes(s));break;default:const t=e.filter(s=>!this.isDisabled(s));t.length!=e.length&&$A.messageWarning("\u90E8\u5206\u6210\u5458\u7981\u6B62\u9009\u62E9"),this.selects=this.selects.concat(t.filter(s=>!this.selects.includes(s))),this.multipleMax&&this.selects.length>this.multipleMax&&($A.messageWarning("\u5DF2\u8D85\u8FC7\u6700\u5927\u9009\u62E9\u6570\u91CF"),this.selects=this.selects.slice(0,this.multipleMax));break}},onRemoveItem(e){this.isUncancelable(e)||(this.selects=this.selects.filter(i=>i!=e))},onSubmit(){if(this.submittIng>0)return;const e=$A.cloneJSON(this.values);if(this.values=$A.cloneJSON(this.selects),this.$emit("input",this.values),this.$emit("on-submit",this.values),!this.beforeSubmit){this.hide();return}const i=this.beforeSubmit();i&&i.then?(this.submittIng++,i.then(()=>{this.hide()}).catch(()=>{this.values=e,this.$emit("input",this.values)}).finally(()=>{this.submittIng--})):this.hide()},show(){this.onSelection()},hide(){this.showModal=!1}}},oe={};var Ft=A(Wt,Rt,Nt,!1,Vt,null,null,null);function Vt(e){for(let i in oe)this[i]=oe[i]}var zt=function(){return Ft.exports}(),Ht=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"task-move"},[t("Cascader",{attrs:{data:e.cascaderData,clearable:!1,placeholder:e.$L("\u8BF7\u9009\u62E9\u9879\u76EE"),"load-data":e.cascaderLoadData,filterable:""},on:{"on-visible-change":function(s){e.cascaderShow=!e.cascaderShow}},model:{value:e.cascader,callback:function(s){e.cascader=s},expression:"cascader"}}),t("div",{staticClass:"task-move-content"},[t("div",{staticClass:"task-move-content-old"},[t("div",{staticClass:"task-move-title"},[e._v(e._s(e.$L("\u79FB\u52A8\u524D")))]),t("div",{staticClass:"task-move-row"},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u72B6\u6001"))+":")]),e.task.flow_item_name?t("div",{staticClass:"flow"},[t("span",{class:e.task.flow_item_status},[e._v(e._s(e.task.flow_item_name))])]):e._e()]),t("div",{staticClass:"task-move-row",class:{"not-flex":e.windowPortrait}},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u8D1F\u8D23\u4EBA"))+":")]),t("UserSelect",{staticClass:"item-content user",attrs:{"avatar-size":28,"project-id":e.task.project_id,"add-icon":!1,disabled:""},model:{value:e.ownerUserids,callback:function(s){e.ownerUserids=s},expression:"ownerUserids"}})],1),t("div",{staticClass:"task-move-row",class:{"not-flex":e.windowPortrait}},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u534F\u52A9\u4EBA"))+":")]),t("UserSelect",{staticClass:"item-content user",attrs:{"avatar-size":28,"project-id":e.task.project_id,"add-icon":!1,disabled:""},model:{value:e.assistUserids,callback:function(s){e.assistUserids=s},expression:"assistUserids"}})],1)]),t("div",{staticClass:"task-move-content-new"},[t("div",{staticClass:"task-move-title"},[e._v(e._s(e.$L("\u79FB\u52A8\u540E")))]),t("div",{staticClass:"task-move-row"},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u72B6\u6001"))+":")]),t("TaskMenu",{ref:`taskMenu_${e.task.id}`,attrs:{task:e.tasks,"project-id":e.cascader[0],"color-show":!1,"operation-show":!1,"load-status":e.task.loading===!0},on:{"on-update":e.onStatusUpdate}}),e.updateData.flow.flow_item_name?t("div",{staticClass:"flow"},[t("span",{class:e.updateData.flow.flow_item_status,on:{click:function(s){return s.stopPropagation(),e.openMenu(s,e.tasks)}}},[e._v(e._s(e.updateData.flow.flow_item_name))])]):e._e()],1),t("div",{staticClass:"task-move-row",class:{"not-flex":e.windowPortrait}},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u8D1F\u8D23\u4EBA"))+":")]),t("div",[t("UserSelect",{staticClass:"item-content user",attrs:{"multiple-max":10,"avatar-size":28,"project-id":e.cascader[0],"add-icon":!1},model:{value:e.updateData.owner_userids,callback:function(s){e.$set(e.updateData,"owner_userids",s)},expression:"updateData.owner_userids"}})],1)]),t("div",{staticClass:"task-move-row",class:{"not-flex":e.windowPortrait}},[t("span",{staticClass:"label"},[e._v(e._s(e.$L("\u534F\u52A9\u4EBA"))+":")]),t("div",[t("UserSelect",{staticClass:"item-content user",attrs:{"multiple-max":10,"avatar-size":28,"project-id":e.cascader[0],"add-icon":!1},model:{value:e.updateData.assist_userids,callback:function(s){e.$set(e.updateData,"assist_userids",s)},expression:"updateData.assist_userids"}})],1)])])]),t("div",{staticClass:"ivu-modal-footer"},[t("div",{staticClass:"adaption"},[t("Button",{attrs:{type:"default"},on:{click:e.close}},[e._v(e._s(e.$L("\u53D6\u6D88")))]),t("Button",{attrs:{type:"primary",loading:e.loadIng>0},on:{click:e.onConfirm}},[e._v(e._s(e.$L("\u786E\u5B9A")))])],1)])],1)},Yt=[];const Jt={name:"TaskMove",components:{TaskMenu:Ut,UserSelect:zt},props:{value:{type:Boolean,default:!1},task:{type:Object,default:!1}},data(){return{tasks:{},cascader:[],cascaderShow:!1,cascaderData:[],cascaderValue:"",cascaderLoading:0,cascaderAlready:[],loadIng:0,flowItemId:0,ownerUserids:[],assistUserids:[],updateData:{flow:{},owner_userids:[],assist_userids:[]}}},async mounted(){this.initData()},computed:{...C(["cacheProjects","cacheColumns"])},watch:{cascader(e){var t,s;this.tasks.flow_item_id=this.flowItemId,e[0]!=this.task.project_id?(this.updateData.flow.flow_item_id=0,this.updateData.flow.flow_item_name="",this.updateData.flow.flow_item_status=""):(this.updateData.flow.flow_item_id=this.flowItemId,this.updateData.flow.flow_item_name=this.task.flow_item_name,this.updateData.flow.flow_item_status=this.task.flow_item_status);const i=((s=(t=this.cacheProjects.find(n=>n.id==e[0]))==null?void 0:t.project_user)==null?void 0:s.map(n=>n.userid))||[];this.updateData.owner_userids=(this.task.task_user||[]).filter(n=>n.owner&&i.indexOf(n.userid)!==-1).sort((n,o)=>n.id-o.id).map(n=>n.userid),this.updateData.assist_userids=(this.task.task_user||[]).filter(n=>!n.owner&&i.indexOf(n.userid)!==-1).sort((n,o)=>n.id-o.id).map(n=>n.userid)}},methods:{initData(){this.flowItemId=this.task.flow_item_id,this.cascader=[this.task.project_id,this.task.column_id],this.ownerUserids=(this.task.task_user||[]).filter(i=>i.owner).sort((i,t)=>i.id-t.id).map(i=>i.userid),this.assistUserids=(this.task.task_user||[]).filter(i=>!i.owner).sort((i,t)=>i.id-t.id).map(i=>i.userid),this.tasks=JSON.parse(JSON.stringify(this.task));const e=$A.cloneJSON(this.cacheProjects).sort((i,t)=>i.top_at||t.top_at?$A.dayjs(t.top_at)-$A.dayjs(i.top_at):t.id-i.id);this.cascaderData=e.map(i=>{const t=this.cacheColumns.filter(({project_id:n})=>n==i.id).map(n=>({value:n.id,label:n.name})),s={value:i.id,label:i.name,children:t};return t.length==0&&(s.loading=!1),s})},cascaderLoadData(e,i){e.loading=!0,this.$store.dispatch("getColumns",e.value).then(t=>{e.children=t.map(s=>({value:s.id,label:s.name})),e.loading=!1,i()}).catch(()=>{e.loading=!1,i()})},async onConfirm(){if(this.task.project_id==this.cascader[0]&&this.task.column_id==this.cascader[1]){$A.messageError("\u672A\u53D8\u66F4\u79FB\u52A8\u9879");return}this.loadIng++,this.$store.dispatch("call",{url:"project/task/move",data:{task_id:this.task.id,project_id:this.cascader[0],column_id:this.cascader[1],flow_item_id:this.updateData.flow.flow_item_id||0,complete_at:this.updateData.flow.complete_at||"",owner:this.updateData.owner_userids,assist:this.updateData.assist_userids}}).then(({data:e,msg:i})=>{this.loadIng--,e.column_name="",e.project_name="",this.$store.dispatch("saveTask",e),$A.messageSuccess(i),this.close()}).catch(({msg:e,ret:i})=>{this.loadIng--,i==102?$A.messageError("\u8BF7\u9009\u62E9\u79FB\u52A8\u540E\u72B6\u6001"):$A.modalError(e)})},close(){this.$emit("input",!this.value)},openMenu(e,i){const t=this.$refs[`taskMenu_${i.id}`];t&&t.handleClick(e)},onStatusUpdate(e){e.complete_at&&!e.flow_item_id&&(e.flow_item_name=this.$L("\u5DF2\u5B8C\u6210")),this.tasks.flow_item_id=e.flow_item_id,this.updateData.flow=e}}},re={};var Kt=A(Jt,Ht,Yt,!1,Gt,null,null,null);function Gt(e){for(let i in re)this[i]=re[i]}var Xt=function(){return Kt.exports}(),qt=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("EDropdown",{ref:"dropdown",staticClass:"task-operation-dropdown",style:e.styles,attrs:{trigger:"click",disabled:e.disabled,size:e.size,placement:"bottom"},on:{command:e.dropTask,"visible-change":e.visibleChange}},[t("div",{ref:"icon",staticClass:"task-operation-icon"}),t("EDropdownMenu",{ref:"dropdownMenu",staticClass:"task-operation-more-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("li",{staticClass:"task-operation-more-warp",class:e.size},[t("ul",[e.flow?e.turns.length>0?e._l(e.turns,function(s){return t("EDropdownItem",{key:s.id,attrs:{command:`turn::${s.id}`}},[t("div",{staticClass:"item flow"},[s.id==e.task.flow_item_id&&e.flow.auto_assign!==!0?t("Icon",{staticClass:"check",attrs:{type:"md-checkmark-circle-outline"}}):t("Icon",{attrs:{type:"md-radio-button-off"}}),t("div",{staticClass:"flow-name",class:s.status},[e._v(e._s(s.name))])],1)])}):[e.task.complete_at?t("EDropdownItem",{attrs:{command:"uncomplete"}},[t("div",{staticClass:"item red"},[t("Icon",{attrs:{type:"md-checkmark-circle-outline"}}),e._v(e._s(e.$L("\u6807\u8BB0\u672A\u5B8C\u6210"))+" ")],1)]):t("EDropdownItem",{attrs:{command:"complete"}},[t("div",{staticClass:"item"},[t("Icon",{attrs:{type:"md-radio-button-off"}}),e._v(e._s(e.$L("\u5B8C\u6210"))+" ")],1)])]:t("EDropdownItem",{staticClass:"load-flow",attrs:{disabled:""}},[t("div",{staticClass:"load-flow-warp"},[t("Loading")],1)]),e.task.parent_id===0?[e.operationShow?[t("EDropdownItem",{attrs:{divided:e.turns.length>0,command:"archived"}},[t("div",{staticClass:"item"},[t("Icon",{attrs:{type:"ios-filing"}}),e._v(e._s(e.$L(e.task.archived_at?"\u8FD8\u539F\u5F52\u6863":"\u5F52\u6863"))+" ")],1)]),t("EDropdownItem",{attrs:{command:"move"}},[t("div",{staticClass:"item"},[t("i",{staticClass:"taskfont movefont"},[e._v("\uE7FC")]),e._v(e._s(e.$L("\u79FB\u52A8"))+" ")])]),t("EDropdownItem",{attrs:{command:"remove"}},[t("div",{staticClass:"item hover-del"},[t("Icon",{attrs:{type:"md-trash"}}),e._v(e._s(e.$L("\u5220\u9664"))+" ")],1)])]:e._e(),e.colorShow?e._l(e.taskColorList,function(s,n){return t("EDropdownItem",{key:"c_"+n,attrs:{divided:n==0,command:s}},[t("div",{staticClass:"item"},[t("i",{staticClass:"taskfont",style:{color:s.primary||"#ddd"},domProps:{innerHTML:e._s(s.color==(e.task.color||"")?"&#xe61d;":"&#xe61c;")}}),e._v(e._s(e.$L(s.name))+" ")])])}):e._e()]:e.operationShow?t("EDropdownItem",{attrs:{command:"remove",divided:e.turns.length>0}},[t("div",{staticClass:"item"},[t("Icon",{attrs:{type:"md-trash"}}),e._v(e._s(e.$L("\u5220\u9664"))+" ")],1)]):e._e()],2)])])],1),t("Modal",{attrs:{title:e.$L("\u79FB\u52A8\u4EFB\u52A1"),"mask-closable":!1,styles:{width:"90%",maxWidth:"540px"},"footer-hide":""},model:{value:e.moveTaskShow,callback:function(s){e.moveTaskShow=s},expression:"moveTaskShow"}},[t("TaskMove",{ref:"addTask",attrs:{task:e.task},model:{value:e.moveTaskShow,callback:function(s){e.moveTaskShow=s},expression:"moveTaskShow"}})],1)],1)},Qt=[];const Zt={name:"TaskOperation",components:{TaskMove:Xt},data(){return{task:{},loadStatus:!1,colorShow:!0,operationShow:!0,updateBefore:!1,disabled:!1,size:"small",projectId:0,onUpdate:null,element:null,target:null,styles:{},moveTaskShow:!1}},beforeDestroy(){this.target&&this.target.removeEventListener("scroll",this.handlerEventListeners)},computed:{...C(["loads","taskOperation","taskColorList","taskFlows","taskFlowItems"]),...$e(["isLoad"]),loadIng(){return this.loadStatus?!0:this.isLoad(`task-${this.task.id}`)},flow(){return this.taskFlows.find(({task_id:e})=>e==this.task.id)},turns(){if(!this.flow)return[];let e=this.taskFlowItems.find(({id:i})=>i==this.flow.flow_item_id);return e?this.taskFlowItems.filter(({id:i})=>e.turns.includes(i)):[]}},watch:{taskOperation(e){if(e.event&&e.task){if(this.$refs.dropdown.visible&&this.element===e.event.target){this.hide();return}const i=e.event.target.getBoundingClientRect();this.styles={left:`${i.left}px`,top:`${i.top}px`,width:`${i.width}px`,height:`${i.height}px`},this.task=e.task,this.loadStatus=typeof e.loadStatus=="undefined"?!1:e.loadStatus,this.colorShow=typeof e.colorShow=="undefined"?!0:e.colorShow,this.operationShow=typeof e.operationShow=="undefined"?!0:e.operationShow,this.updateBefore=typeof e.updateBefore=="undefined"?!1:e.updateBefore,this.disabled=typeof e.disabled=="undefined"?!1:e.disabled,this.size=typeof e.size=="undefined"?"small":e.size,this.projectId=typeof e.projectId=="undefined"?0:e.projectId,this.onUpdate=typeof e.onUpdate=="function"?e.onUpdate:null,this.$refs.icon.focus(),this.updatePopper(),this.show(),this.$store.dispatch("getTaskFlow",{task_id:this.task.id,project_id:this.projectId}).finally(this.updatePopper),this.setupEventListeners(e.event)}else this.hide()}},methods:{show(){this.$refs.dropdown.show()},hide(){this.$refs.dropdown.hide()},dropTask(e){const i=this.task,t=s=>{s?this.$store.dispatch("saveTaskCompleteTemp",i.id):this.$store.dispatch("forgetTaskCompleteTemp",i.id)};if($A.isJson(e)){e.name&&this.updateTask({color:e.color}).catch(()=>{});return}if($A.leftExists(e,"turn::")){let s=$A.leftDelete(e,"turn::");if(s==this.task.flow_item_id)return;let n=this.taskFlowItems.find(({id:l})=>l==this.flow.flow_item_id)||{},o=this.taskFlowItems.find(({id:l})=>l==s)||{},r=n.status!=="end"&&o.status==="end",a=n.status==="end"&&o.status!=="end";this.updateBefore&&(r?t(!0):a&&t(!1)),this.updateTask({flow_item_id:s,flow_item_status:o.status,flow_item_name:o.name}).then(()=>{r?t(!0):a&&t(!1)}).catch(()=>{r?t(!1):a&&t(!0)});return}switch(e){case"complete":if(this.task.complete_at)return;this.updateBefore&&t(!0),this.updateTask({complete_at:$A.daytz().format("YYYY-MM-DD HH:mm:ss")}).then(()=>{t(!0)}).catch(()=>{t(!1)});break;case"uncomplete":if(!this.task.complete_at)return;this.updateBefore&&t(!1),this.updateTask({complete_at:!1}).then(()=>{t(!1)}).catch(()=>{t(!0)});break;case"archived":case"remove":this.archivedOrRemoveTask(e);break;case"move":this.moveTaskShow=!0;break}},updateTask(e){return new Promise((i,t)=>{if(this.loadIng){t();return}const s=Object.assign(e,{task_id:this.task.id});if(!this.operationShow){typeof this.onUpdate=="function"&&this.onUpdate(s),t();return}Object.keys(e).forEach(n=>this.$set(this.task,n,e[n])),this.$store.dispatch("taskUpdate",s).then(({data:n,msg:o})=>{$A.messageSuccess(o),i(),this.$store.dispatch("saveTaskBrowse",s.task_id),typeof this.onUpdate=="function"&&this.onUpdate(n)}).catch(({msg:n})=>{$A.modalError(n),this.$store.dispatch("getTaskOne",s.task_id).catch(()=>{}),t()})})},archivedOrRemoveTask(e){let i="removeTask",t="\u5220\u9664",s={task_id:this.task.id},n=this.task.parent_id>0?"\u5B50\u4EFB\u52A1":"\u4EFB\u52A1";e=="archived"&&(i="archivedTask",t="\u5F52\u6863",this.task.archived_at&&(t="\u8FD8\u539F\u5F52\u6863",s={task_id:this.task.id,type:"recovery"})),$A.modalConfirm({title:t+n,content:"\u4F60\u786E\u5B9A\u8981"+t+n+"\u3010"+this.task.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>{if(!this.loadIng)return new Promise((o,r)=>{this.$store.dispatch(i,s).then(({msg:a})=>{o(a),this.$store.dispatch("saveTaskBrowse",s.task_id)}).catch(({msg:a})=>{r(a)})})}})},visibleChange(e){this.visible=e},updatePopper(){this.$nextTick(this.$refs.dropdownMenu.updatePopper)},setupEventListeners(e){this.element=e.target;let i=this.getScrollParent(this.element);if((i===window.document.body||i===window.document.documentElement)&&(i=window),this.target){if(this.target===i)return;this.target.removeEventListener("scroll",this.handlerEventListeners)}this.target=i,this.target.addEventListener("scroll",this.handlerEventListeners)},handlerEventListeners(e){if(!this.visible||!this.element)return;const i=e.target.getBoundingClientRect(),t=this.element.getBoundingClientRect();if(t.top<i.top||t.top>i.top+i.height){this.hide();return}this.styles={left:`${t.left}px`,top:`${t.top}px`,width:`${t.width}px`,height:`${t.height}px`},this.updatePopper()},getScrollParent(e){const i=e.parentNode;return i?i===window.document?window.document.body.scrollTop||window.document.body.scrollLeft?window.document.body:window.document.documentElement:["scroll","auto"].indexOf(this.getStyleComputedProperty(i,"overflow"))!==-1||["scroll","auto"].indexOf(this.getStyleComputedProperty(i,"overflow-x"))!==-1||["scroll","auto"].indexOf(this.getStyleComputedProperty(i,"overflow-y"))!==-1?i:this.getScrollParent(e.parentNode):e},getStyleComputedProperty(e,i){return window.getComputedStyle(e,null)[i]}}},ae={};var es=A(Zt,qt,Qt,!1,ts,null,null,null);function ts(e){for(let i in ae)this[i]=ae[i]}var ss=function(){return es.exports}(),is=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{attrs:{id:"app"}},[t("keep-alive",[t("router-view",{staticClass:"child-view"})],1),t("TaskOperation"),t("FloatSpinner"),t("RightBottom"),t("PreviewImageState"),e.windowLandscape?t("NetworkException"):e._e(),t("GuidePage")],1)},ns=[];const os={components:{TaskOperation:ss,NetworkException:St,PreviewImageState:$t,RightBottom:ot,FloatSpinner:Qe,GuidePage:Lt},data(){return{routePath:null,appInter:null,countDown:Math.min(30,60-$A.daytz().second())}},created(){this.electronEvents(),this.eeuiEvents(),this.otherEvents()},mounted(){window.addEventListener("resize",this.windowSizeListener),window.addEventListener("scroll",this.windowScrollListener),window.addEventListener("message",this.windowHandleMessage),this.appInter=setInterval(this.appTimerHandler,1e3),$A.loadVConsole()},beforeDestroy(){window.removeEventListener("resize",this.windowSizeListener),window.removeEventListener("scroll",this.windowScrollListener),window.removeEventListener("message",this.windowHandleMessage),this.appInter&&clearInterval(this.appInter)},computed:{...C(["ws","themeConf","windowOrientation"])},watch:{$route:{handler(e){this.routePath=e.path},immediate:!0},routePath:{handler(e){e&&this.userId>0&&(e=e.replace(/^\/manage\/file\/\d+\/(\d+)$/,"/single/file/$1"),this.$store.dispatch("websocketPath",e))},immediate:!0},userId:{handler(){this.$store.dispatch("websocketConnection"),this.userId>0&&this.$isEEUiApp&&($A.eeuiAppSendMessage({action:"initApp",apiUrl:$A.apiUrl(""),userid:this.userId,token:this.userToken,userAgent:window.navigator.userAgent}),setTimeout(e=>{$A.eeuiAppSendMessage({action:"setUmengAlias",url:$A.apiUrl("users/umeng/alias")})},6e3))},immediate:!0},windowTouch:{handler(e){e?$A("body").addClass("window-touch"):$A("body").removeClass("window-touch")},immediate:!0},windowOrientation:{handler(e){$A("body").removeClass(["window-landscape","window-portrait"]),$A("body").addClass("window-"+e)},immediate:!0},windowActive(e){e?(this.autoTheme(),$A.updateTimezone(),this.__windowTimer&&clearTimeout(this.__windowTimer),this.__windowTimer=setTimeout(i=>{this.$store.dispatch("call",{url:"users/socket/status"}).then(t=>{this.$store.dispatch("websocketSend",{type:"handshake"}).catch(s=>{this.$store.dispatch("websocketConnection")})}).catch(t=>{this.$store.dispatch("websocketConnection")})},600)):this.$store.dispatch("audioStop",!0)}},methods:{appTimerHandler(){this.searchEnter(),this.countDown--,this.countDown<=0&&(this.countDown=Math.min(30,60-$A.daytz().second()),this.$store.dispatch("todayAndOverdue"))},searchEnter(){let e=$A(".sreachBox");if(e.length===0||e.attr("data-enter-init")==="init")return;e.attr("data-enter-init","init");let i=e.find("button[type='button']"),t=null;i.length!==0&&(i.each((s,n)=>{$A(n).text().indexOf("\u641C\u7D22")&&(t=$A(n))}),t!==null&&e.find("input.ivu-input").keydown(function(s){s.keyCode==13&&(t.hasClass("ivu-btn-loading")||t.click())}))},autoTheme(){this.themeConf==="auto"&&this.$store.dispatch("synchTheme")},windowSizeListener(){const e=$A(window).width(),i=$A(window).height(),t=$A.screenOrientation();this.$store.state.windowTouch="ontouchend"in document,this.$store.state.windowWidth=e,this.$store.state.windowHeight=i,this.$store.state.windowOrientation=t,this.$store.state.windowLandscape=t==="landscape",this.$store.state.windowPortrait=t==="portrait",this.$store.state.formLabelPosition=e>576?"right":"top",this.$store.state.formLabelWidth=e>576?"auto":"",$A.eeuiAppSendMessage({action:"windowSize",width:e,height:i})},windowScrollListener(){this.$store.state.windowScrollY=window.scrollY},windowHandleMessage({data:e}){e=$A.jsonParse(e),e.action==="eeuiAppSendMessage"&&($A.isArray(e.data)?e.data:[e.data]).forEach(t=>{$A.eeuiAppSendMessage(t)})},isUseDefaultBrowser(e){if(/web\.zoom\.us/i.test(e)||/meeting\.tencent\.com/i.test(e)||/meet\.google\.com/i.test(e))return!0;if($A.getDomain(e)==$A.getDomain($A.mainUrl()))try{if(/^\/uploads\//i.test(new URL(e).pathname))return!0}catch{}return!1},electronEvents(){!this.$Electron||(window.__onBeforeUnload=()=>{if(this.$Modal.removeLast())return!0},window.__onBeforeOpenWindow=({url:e})=>this.isUseDefaultBrowser(e)?!1:(this.$store.dispatch("openWebTabWindow",e),!0),this.$Electron.registerMsgListener("dispatch",e=>{if(!$A.isJson(e))return;let{action:i,data:t}=e;this.$store.dispatch(i,t)}),this.$Electron.registerMsgListener("browserWindowBlur",e=>{this.$store.state.windowActive=!1}),this.$Electron.registerMsgListener("browserWindowFocus",e=>{this.$store.state.windowActive=!0}),$A.bindScreenshotKey(this.$store.state.cacheKeyboard),this.$Electron.sendMessage("setMenuLanguage",{openInBrowser:this.$L("\u5728\u6D4F\u89C8\u5668\u4E2D\u6253\u5F00"),saveImageAs:this.$L("\u56FE\u7247\u5B58\u50A8\u4E3A..."),copyImage:this.$L("\u590D\u5236\u56FE\u7247"),copyEmailAddress:this.$L("\u590D\u5236\u7535\u5B50\u90AE\u4EF6\u5730\u5740"),copyLinkAddress:this.$L("\u590D\u5236\u94FE\u63A5\u5730\u5740"),copyImageAddress:this.$L("\u590D\u5236\u56FE\u7247\u5730\u5740"),failedToSaveImage:this.$L("\u56FE\u7247\u4FDD\u5B58\u5931\u8D25"),theImageFailedToSave:this.$L("\u56FE\u7247\u65E0\u6CD5\u4FDD\u5B58")}))},eeuiEvents(){!this.$isEEUiApp||(window.__onAppActive=()=>{this.autoTheme(),$A.updateTimezone(),$A.IDBTest()},window.__onPagePause=()=>{this.$store.state.windowActive=!1,this.$store.dispatch("getBasicData",-1)},window.__onPageResume=e=>{this.$store.state.windowActive=!0,e>0?this.$store.dispatch("getBasicData",600):this.autoTheme()},window.__onCreateTarget=e=>{if(this.isUseDefaultBrowser(e)){$A.eeuiAppOpenWeb(e);return}this.$store.dispatch("openAppChildPage",{pageType:"app",pageTitle:" ",url:"web.js",params:{url:e,browser:!0,showProgress:!0}})},window.__onMeetingEvent=({act:e,uuid:i,meetingid:t})=>{switch(e){case"getInfo":const s=(i+"").indexOf("88888")!==-1;this.$store.dispatch("call",{url:s?"users/meeting/tourist":"users/basic",data:{userid:s?i:(i+"").substring(6),tourist_id:i}}).then(({data:n})=>{var o,r;$A.eeuiAppSendMessage({action:"updateMeetingInfo",infos:{uuid:i,avatar:s?n==null?void 0:n.userimg:(o=n[0])==null?void 0:o.userimg,username:s?n==null?void 0:n.nickname:(r=n[0])==null?void 0:r.nickname}})}).catch(({msg:n})=>{$A.modalError(n)});break;case"success":this.$store.dispatch("closeMeetingWindow","add");break;case"invent":this.$store.dispatch("showMeetingWindow",{type:"invitation",meetingid:t});break;case"endMeeting":break;case"error":this.$store.dispatch("closeMeetingWindow","error");break}},window.__onKeyboardStatus=e=>{const i=$A.jsonParse(decodeURIComponent(e));this.$store.state.keyboardType=i.keyboardType,this.$store.state.keyboardHeight=i.keyboardHeight,this.$store.state.safeAreaBottom=i.safeAreaBottom},window.__onNotificationPermissionStatus=e=>{this.$store.state.appNotificationPermission=$A.runNum(e)==1},window.__handleLink=e=>{this.goForward({path:(e||"").indexOf("/")!==0?"/"+e:e})},$A.eeuiAppSendMessage({action:"windowSize",width:this.windowWidth,height:this.windowHeight}),$A.eeuiAppSetHapticBackEnabled(!1),$A.eeuiAppSetVariate("languageWebBrowser",this.$L("\u6D4F\u89C8\u5668\u6253\u5F00")),$A.eeuiAppSetVariate("languageWebRefresh",this.$L("\u5237\u65B0")))},otherEvents(){if(!this.$isSoftware){const e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,i=e.replace(/hidden/i,"visibilitychange");document.addEventListener(i,()=>{this.$store.state.windowActive=!document[e]})}}}},le={};var rs=A(os,is,ns,!1,as,"54f07bf4",null,null);function as(e){for(let i in le)this[i]=le[i]}var ls=function(){return rs.exports}(),cs=[{name:"index",path:"/",component:()=>m(()=>import("./index.1b27c8c3.js"),["js/build/index.1b27c8c3.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"pro",path:"/pro",component:()=>m(()=>import("./pro.b5120fac.js"),["js/build/pro.b5120fac.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"meeting",path:"/meeting/:meetingId?/:sharekey?",component:()=>m(()=>import("./meeting.1e2f0aba.js"),["js/build/meeting.1e2f0aba.js","js/build/MeetingManager.484bdb73.js","js/build/le5le-store.d4b5b622.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage",path:"/manage",component:()=>m(()=>import("./manage.f6028db8.js"),["js/build/manage.f6028db8.js","js/build/manage.5dc9aad0.css","js/build/vuex.cc7cb26e.js","js/build/CheckinExport.55a36504.js","js/build/ApproveExport.d0d486d1.css","js/build/tip.2ea44d3a.js","js/build/ImgUpload.d9d55773.js","js/build/ReportEdit.3b7ff280.js","js/build/openpgp_hi.15f91b1d.js","js/build/ReportDetail.dc71685b.js","js/build/index.de3fdb79.js","js/build/le5le-store.d4b5b622.js","js/build/TaskDetail.fb300021.js","js/build/TaskDetail.135b5c92.css","js/build/ProjectLog.3db4d7fc.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/longpress.6c9d7403.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/@babel.43d8d0a5.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/vue.296078bd.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/details.bb7e8fb8.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/TEditor.c8f7ff92.js","js/build/tinymce.15f82c9c.js","js/build/MeetingManager.484bdb73.js","js/build/ApproveExport.25ef7d81.js","js/build/MicroApps.a25b86de.js","js/build/notification-koro1.99b93615.js"]),children:[{name:"manage-dashboard",path:"dashboard",component:()=>m(()=>import("./dashboard.7f11af0b.js"),["js/build/dashboard.7f11af0b.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-calendar",path:"calendar",component:()=>m(()=>import("./calendar.b1b29352.js"),["js/build/calendar.b1b29352.js","js/build/vuex.cc7cb26e.js","js/build/tui-date-picker.ce211492.js","js/build/tui-date-picker.9bc23968.css","js/build/tui-time-picker.c819581e.js","js/build/tui-time-picker.54a418b9.css","js/build/tui-calendar-hi.986b9887.js","js/build/tui-calendar-hi.3658e7fa.css","js/build/@babel.43d8d0a5.js","js/build/tui-code-snippet.ed72cbfd.js","js/build/le5le-store.d4b5b622.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-messenger",path:"messenger/:dialogAction?",component:()=>m(()=>import("./messenger.6dda5058.js"),["js/build/messenger.6dda5058.js","js/build/vuex.cc7cb26e.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/le5le-store.d4b5b622.js","js/build/longpress.6c9d7403.js","js/build/index.de3fdb79.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/@babel.43d8d0a5.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/vue.296078bd.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/ImgUpload.d9d55773.js","js/build/details.bb7e8fb8.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/tip.2ea44d3a.js"])},{name:"manage-approve",path:"approve",component:()=>m(()=>import("./index.35f2db99.js"),["js/build/index.35f2db99.js","js/build/index.bfb171e3.css","js/build/details.bb7e8fb8.js","js/build/ImgUpload.d9d55773.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/index.de3fdb79.js","js/build/ApproveExport.25ef7d81.js","js/build/ApproveExport.d0d486d1.css"])},{name:"manage-approve-details",path:"approve/details",component:()=>m(()=>import("./details.bb7e8fb8.js"),["js/build/details.bb7e8fb8.js","js/build/ImgUpload.d9d55773.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-apps",path:"apps/*",component:()=>m(()=>import("./apps.95bc71ad.js"),["js/build/apps.95bc71ad.js","js/build/MicroApps.a25b86de.js","js/build/vue.296078bd.js","js/build/@babel.43d8d0a5.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/le5le-store.d4b5b622.js","js/build/longpress.6c9d7403.js","js/build/index.de3fdb79.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/ImgUpload.d9d55773.js","js/build/details.bb7e8fb8.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/tip.2ea44d3a.js"])},{name:"manage-setting",path:"setting",component:()=>m(()=>import("./index.2cb6312a.js"),["js/build/index.2cb6312a.js","js/build/index.274f71f0.css","js/build/vuex.cc7cb26e.js","js/build/le5le-store.d4b5b622.js","js/build/axios.6ec123f8.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"]),children:[{name:"manage-setting-personal",path:"personal",component:()=>m(()=>import("./personal.a49e1dde.js"),["js/build/personal.a49e1dde.js","js/build/ImgUpload.d9d55773.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-checkin",path:"checkin",component:()=>m(()=>import("./checkin.96f2af3b.js"),["js/build/checkin.96f2af3b.js","js/build/checkin.01811e2e.css","js/build/ImgUpload.d9d55773.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-language",path:"language",component:()=>m(()=>import("./language.42ee574a.js"),["js/build/language.42ee574a.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-theme",path:"theme",component:()=>m(()=>import("./theme.bc125b49.js"),["js/build/theme.bc125b49.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-keyboard",path:"keyboard",component:()=>m(()=>import("./keyboard.641ddf78.js"),["js/build/keyboard.641ddf78.js","js/build/keyboard.b6840672.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-license",path:"license",component:()=>m(()=>import("./license.5879f35a.js"),["js/build/license.5879f35a.js","js/build/license.c7d9ffba.css","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-password",path:"password",component:()=>m(()=>import("./password.5eb5e9ce.js"),["js/build/password.5eb5e9ce.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-email",path:"email",component:()=>m(()=>import("./email.56a85ba4.js"),["js/build/email.56a85ba4.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-system",path:"system",component:()=>m(()=>import("./system.4bdb4c55.js"),["js/build/system.4bdb4c55.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-setting-delete",path:"delete",component:()=>m(()=>import("./delete.b1967391.js"),["js/build/delete.b1967391.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])}]},{name:"manage-project-invite",path:"project/invite",component:()=>m(()=>import("./projectInvite.29e037ff.js"),["js/build/projectInvite.29e037ff.js","js/build/projectInvite.d01e3a2d.css","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-project",path:"project/:projectId",component:()=>m(()=>import("./project.14900756.js"),["js/build/project.14900756.js","js/build/vuex.cc7cb26e.js","js/build/vuedraggable.6ea348a4.js","js/build/@babel.43d8d0a5.js","js/build/sortablejs.982d79d6.js","js/build/ProjectLog.3db4d7fc.js","js/build/le5le-store.d4b5b622.js","js/build/index.de3fdb79.js","js/build/tip.2ea44d3a.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/longpress.6c9d7403.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/vue.296078bd.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/ImgUpload.d9d55773.js","js/build/details.bb7e8fb8.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-file",path:"file/:folderId?/:fileId?",component:()=>m(()=>import("./file.38da80f5.js"),["js/build/file.38da80f5.js","js/build/openpgp_hi.15f91b1d.js","js/build/vuex.cc7cb26e.js","js/build/lodash.96669e56.js","js/build/@babel.43d8d0a5.js","js/build/index.de3fdb79.js","js/build/longpress.6c9d7403.js","js/build/tip.2ea44d3a.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"manage-application",path:"application",component:()=>m(()=>import("./application.9095efb3.js"),["js/build/application.9095efb3.js","js/build/vuex.cc7cb26e.js","js/build/index.de3fdb79.js","js/build/CheckinExport.55a36504.js","js/build/ApproveExport.d0d486d1.css","js/build/tip.2ea44d3a.js","js/build/ImgUpload.d9d55773.js","js/build/ReportEdit.3b7ff280.js","js/build/openpgp_hi.15f91b1d.js","js/build/ReportDetail.dc71685b.js","js/build/checkin.96f2af3b.js","js/build/checkin.01811e2e.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])}]},{name:"single-file-msg",path:"/single/file/msg/:msgId",component:()=>m(()=>import("./fileMsg.44644888.js"),["js/build/fileMsg.44644888.js","js/build/fileMsg.9d89f22e.css","js/build/openpgp_hi.15f91b1d.js","js/build/vuex.cc7cb26e.js","js/build/IFrame.ad242f4b.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"single-file-task",path:"/single/file/task/:fileId",component:()=>m(()=>import("./fileTask.ec954a53.js"),["js/build/fileTask.ec954a53.js","js/build/fileTask.584e53db.css","js/build/openpgp_hi.15f91b1d.js","js/build/IFrame.ad242f4b.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"single-file",path:"/single/file/:codeOrFileId",component:()=>m(()=>import("./file.1f6d17fa.js"),["js/build/file.1f6d17fa.js","js/build/file.1759f11c.css","js/build/FileContent.4c521ac9.js","js/build/FileContent.6459ca29.css","js/build/openpgp_hi.15f91b1d.js","js/build/vuex.cc7cb26e.js","js/build/IFrame.ad242f4b.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/FilePreview.62482a89.js"])},{name:"single-task-content",path:"/single/task/content/:taskId",component:()=>m(()=>import("./taskContent.b3fd16c0.js"),["js/build/taskContent.b3fd16c0.js","js/build/taskContent.4dd37439.css","js/build/TEditor.c8f7ff92.js","js/build/tinymce.15f82c9c.js","js/build/@babel.43d8d0a5.js","js/build/ImgUpload.d9d55773.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"single-task",path:"/single/task/:taskId",component:()=>m(()=>import("./task.029d4e9c.js"),["js/build/task.029d4e9c.js","js/build/task.0d7ca2d3.css","js/build/TaskDetail.fb300021.js","js/build/TaskDetail.135b5c92.css","js/build/vuex.cc7cb26e.js","js/build/ProjectLog.3db4d7fc.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/le5le-store.d4b5b622.js","js/build/longpress.6c9d7403.js","js/build/index.de3fdb79.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/@babel.43d8d0a5.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/vue.296078bd.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/ImgUpload.d9d55773.js","js/build/details.bb7e8fb8.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/tip.2ea44d3a.js","js/build/TEditor.c8f7ff92.js","js/build/tinymce.15f82c9c.js"])},{name:"single-apps",path:"/single/apps/*",component:()=>m(()=>import("./apps.725537b1.js"),["js/build/apps.725537b1.js","js/build/MicroApps.a25b86de.js","js/build/vue.296078bd.js","js/build/@babel.43d8d0a5.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/DialogWrapper.ab24beb1.js","js/build/DialogWrapper.bc3239e2.css","js/build/le5le-store.d4b5b622.js","js/build/longpress.6c9d7403.js","js/build/index.de3fdb79.js","js/build/quill-hi.5f983100.js","js/build/parchment.d5c5924e.js","js/build/quill-delta.9c20d28a.js","js/build/fast-diff.f17881f3.js","js/build/lodash.clonedeep.c11ef6f7.js","js/build/lodash.isequal.1abdaf11.js","js/build/eventemitter3.78b735ad.js","js/build/lodash-es.df04b444.js","js/build/quill-mention-hi.b64d1fea.js","js/build/view-design-hi.609f8897.js","js/build/vue-virtual-scroll-list-hi.7485c393.js","js/build/ImgUpload.d9d55773.js","js/build/details.bb7e8fb8.js","js/build/jquery.f44c3c79.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js","js/build/tip.2ea44d3a.js"])},{name:"single-valid-email",path:"/single/valid/email",component:()=>m(()=>import("./validEmail.903e97ca.js"),["js/build/validEmail.903e97ca.js","js/build/validEmail.6e361ca9.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"single-report-edit",path:"/single/report/edit/:reportEditId",component:()=>m(()=>import("./reportEdit.674b6f64.js"),["js/build/reportEdit.674b6f64.js","js/build/reportEdit.5c397123.css","js/build/ReportEdit.3b7ff280.js","js/build/openpgp_hi.15f91b1d.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"single-report-detail",path:"/single/report/detail/:reportDetailId",component:()=>m(()=>import("./reportDetail.f9e77337.js"),["js/build/reportDetail.f9e77337.js","js/build/reportDetail.c12bef4b.css","js/build/ReportDetail.dc71685b.js","js/build/vuex.cc7cb26e.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"token",path:"/token",component:()=>m(()=>import("./token.5cd3702d.js"),["js/build/token.5cd3702d.js","js/build/token.7afc4e00.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"login",path:"/login",component:()=>m(()=>import("./login.bc69cdb6.js"),["js/build/login.bc69cdb6.js","js/build/vuex.cc7cb26e.js","js/build/le5le-store.d4b5b622.js","js/build/@chenfengyuan.dfd1ecb7.js","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])},{name:"404",path:"*",component:()=>m(()=>import("./404.15b7cc43.js"),["js/build/404.15b7cc43.js","js/build/404.d686a01f.css","js/build/@micro-zoe.c2e1472d.js","js/build/jquery.f44c3c79.js","js/build/@babel.43d8d0a5.js","js/build/dayjs.aaefe451.js","js/build/localforage.bd4872f5.js","js/build/markdown-it.6846e2b0.js","js/build/entities.797c3e49.js","js/build/uc.micro.700527ef.js","js/build/mdurl.95c1032c.js","js/build/linkify-it.96515e28.js","js/build/punycode.50f384b0.js","js/build/highlight.js.ab8aeea4.js","js/build/markdown-it-link-attributes.e1d5d151.js","js/build/@traptitech.64308959.js","js/build/vue.296078bd.js","js/build/vuex.cc7cb26e.js","js/build/openpgp_hi.15f91b1d.js","js/build/axios.6ec123f8.js","js/build/le5le-store.d4b5b622.js","js/build/vue-router.2d566cd7.js","js/build/vue-clipboard2.ad7135d3.js","js/build/clipboard.3f21bed6.js","js/build/view-design-hi.609f8897.js","js/build/vuedraggable.6ea348a4.js","js/build/sortablejs.982d79d6.js","js/build/vue-resize-observer.e788af6d.js","js/build/element-sea.c283d284.js","js/build/deepmerge.cecf392e.js","js/build/resize-observer-polyfill.37526d89.js","js/build/throttle-debounce.7c3948b2.js","js/build/babel-helper-vue-jsx-merge-props.5ed215c3.js","js/build/normalize-wheel.2a034b9f.js","js/build/async-validator.e7e40052.js","js/build/babel-runtime.4773988a.js","js/build/core-js.314b4a1d.js"])}];const V=$A(window).width(),us=$A(window).height(),z=$A.screenOrientation();var ds={clientId:"",cacheVersion:"v8",windowActive:!0,windowScrollY:0,windowTouch:"ontouchend"in document,windowWidth:V,windowHeight:us,windowOrientation:z,windowLandscape:z==="landscape",windowPortrait:z==="portrait",formLabelPosition:V>576?"right":"top",formLabelWidth:V>576?"auto":"",keyboardType:null,keyboardHeight:0,safeAreaBottom:0,appNotificationPermission:!0,audioPlaying:null,routeHistorys:[],routeHistoryLast:{},callAt:[],loads:[],loadDashboardTasks:!1,loadUserBasic:!1,loadProjects:0,loadDialogs:0,loadDialogAuto:!1,loadDialogLatestId:0,floatSpinnerTimer:[],floatSpinnerLoad:0,touchBackInProgress:!1,cacheUserActive:{},cacheUserWait:[],cacheUserBasic:[],cacheDialogs:[],cacheProjects:[],cacheColumns:[],cacheTasks:[],cacheProjectParameter:[],cacheTaskBrowse:[],cacheEmojis:[],cacheServerUrl:"",cacheKeyboard:{},ajaxWsReady:!1,ajaxWsListener:[],ajaxNetworkException:!1,ws:null,wsMsg:{},wsCall:{},wsTimeout:null,wsRandom:0,wsOpenNum:0,wsListener:{},userInfo:{},userId:0,userToken:"",userIsAdmin:!1,userAvatar:{},dialogId:0,dialogMsgId:0,dialogMsgKeep:25,dialogSearchMsgId:0,dialogIns:[],dialogMsgs:[],dialogTodos:[],dialogMsgTops:[],dialogHistory:[],dialogDraftTimer:{},dialogMsgTransfer:{time:0},dialogSseList:[],dialogDroupWordChain:{},dialogGroupVote:{},messengerSearchKey:{dialog:"",contacts:""},readLoadNum:0,readTimeout:null,readWaitData:{},fileLists:[],fileLinks:[],filePackLists:[],projectId:0,projectTotal:0,projectLoad:0,taskId:0,taskCompleteTemps:[],taskContents:[],taskFiles:[],taskLogs:[],taskOperation:{},taskArchiveView:0,taskOneLoad:{},taskFlows:[],taskFlowItems:[],taskPriority:[],columnTemplate:[],columnColorList:[{name:"\u9ED8\u8BA4",color:""},{name:"\u7070\u8272",color:"#999999"},{name:"\u68D5\u8272",color:"#947364"},{name:"\u6A58\u8272",color:"#faaa6c"},{name:"\u9EC4\u8272",color:"#f2d86d"},{name:"\u7EFF\u8272",color:"#73b45c"},{name:"\u84DD\u8272",color:"#51abea"},{name:"\u7D2B\u8272",color:"#b583e3"},{name:"\u7C89\u8272",color:"#ff819c"},{name:"\u7EA2\u8272",color:"#ff7070"}],taskColorList:[{name:"\u9ED8\u8BA4",color:"",primary:""},{name:"\u9EC4\u8272",color:"#fffae6",primary:"#f2d86d"},{name:"\u84DD\u8272",color:"#e5f5ff",primary:"#51abea"},{name:"\u7EFF\u8272",color:"#ecffe5",primary:"#73b45c"},{name:"\u7C89\u8272",color:"#ffeaee",primary:"#ff819c"},{name:"\u7D2B\u8272",color:"#f6ecff",primary:"#b583e3"},{name:"\u7070\u8272",color:"#f3f3f3",primary:"#999999"}],themeConf:window.localStorage.getItem("__system:themeConf__"),themeName:null,themeList:[{name:"\u8DDF\u968F\u7CFB\u7EDF",value:"auto"},{name:"\u660E\u4EAE",value:"light"},{name:"\u6697\u9ED1",value:"dark"}],clientNewVersion:null,previewImageIndex:0,previewImageList:[],reportUnreadNumber:0,apiKeyData:{},localKeyPair:{},localKeyLock:!1,systemConfig:{},approveUnreadNumber:0,meetingWindow:{show:!1,type:"",meetingid:0},okrWindow:{type:"open",model:"details",id:0,show:!1}},fs={isLoad(e){return function(i){const t=e.loads.find(s=>s.key===i);return!!(t&&t.num>0)}},projectData(e){if(e.projectId>0){let i=e.cacheProjects.find(({id:t})=>t==e.projectId);if(i){let t=e.cacheProjectParameter.find(({project_id:s})=>s==e.projectId);return t||(t=$A.projectParameterTemplate(e.projectId),e.cacheProjectParameter.push(t)),t.menuType===void 0&&(t.menuType="column"),i.cacheParameter=t,i}}return{cacheParameter:{}}},taskData(e){let i=e.taskId;if(i==0&&(i=$A.runNum(window.__taskId)),i>0){window.__taskId=i;const t=e.cacheTasks.find(({id:s})=>s==i);if(t)return t}return{}},transforTasks(e){return function(i){return i.filter(({parent_id:t})=>!(t>0&&i.find(({id:s})=>s==t))).map(t=>{if(t.parent_id>0){const s=e.cacheTasks.find(({id:n})=>n==t.parent_id);return s?Object.assign({},s,{id:t.id,parent_id:t.parent_id,name:t.name,start_at:t.start_at,end_at:t.end_at,complete_at:t.complete_at,_time:t._time,flow_item_id:t.flow_item_id,flow_item_name:t.flow_item_name,flow_item_status:t.flow_item_status,sub_top:!0,sub_my:[]}):Object.assign({},t,{sub_top:!0,sub_my:[]})}else return Object.assign({},t,{sub_top:!1,sub_my:i.filter(({parent_id:s})=>s==t.id)})})}},dashboardTask(e){const i=$A.daytz().startOf("day"),t=$A.daytz().endOf("day"),s=$A.daytz(),n=(u,f=!0)=>u.archived_at||u.complete_at&&f===!0||u.start_at&&$A.dayjs(u.start_at)>s?!1:u.owner==1;let o=e.cacheTasks.filter(u=>n(u)),r=0;if(e.taskCompleteTemps.length>0){let u=e.cacheTasks.filter(f=>e.taskCompleteTemps.includes(f.id)&&n(f,!1));u.length>0&&(r=u.length,o=$A.cloneJSON(o),o.push(...u))}const a=o.filter(u=>{const f=$A.dayjs(u.end_at);return i<=f&&f<=t}),l=o.filter(u=>u.end_at&&$A.dayjs(u.end_at)<=s),c={today:a,today_count:a.length,overdue:l,overdue_count:l.length,all:o,all_count:o.length};return r>0&&(c.today_count-=a.filter(u=>e.taskCompleteTemps.includes(u.id)).length,c.overdue_count-=l.filter(u=>e.taskCompleteTemps.includes(u.id)).length,c.all_count-=r),c},assistTask(e){const i=(s,n=!0)=>s.archived_at||s.complete_at&&n===!0?!1:s.assist&&s.owner===0;let t=e.cacheTasks.filter(s=>i(s));if(e.taskCompleteTemps.length>0){let s=e.cacheTasks.filter(n=>e.taskCompleteTemps.includes(n.id)&&i(n,!1));s.length>0&&(t=$A.cloneJSON(t),t.push(...s))}return t}};function hs(e,i,t){$A.isJson(i)||(i={});const s=e+"::"+encodeURIComponent(new URLSearchParams($.sortObject(i,["page","pagesize","timerange"])).toString()),n=t.callAt.find(o=>o.key===s)||{};return typeof n.key=="undefined"&&(n.key=s,n.updated=0,n.deleted=0,t.callAt.push(n),$A.IDBSet("callAt",t.callAt).then(o=>{})),this.get=()=>(i.timerange=i.timerange||`${n.updated||0},${n.deleted||0}`,i),this.save=({total:o,current_page:r,deleted_id:a})=>new Promise(l=>{if(r===1){let c=!1;const u=$A.dayjs().unix();o>0&&(n.updated=u,c=!0),$A.isArray(a)&&a.length>0?(n.deleted=u,c=!0):a=[],c?$A.IDBSet("callAt",t.callAt).then(f=>l(a)):l(a)}}),this}function H(e,i,t){return new hs(e,i,t)}function ps(e,i=!0){return e&&(i?e=String(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\n/g,"$"):e=String(e).replace(/\-/g,"+").replace(/\_/g,"/").replace(/\$/g,`
`)),e}const ms={retry:5,interval:3*1e3};class gs{constructor(i,t=ms){this.url=i,this.es=null,this.options=t,this.retry=t.retry,this.timer=null}_onOpen(){window.systemInfo.debug==="yes"&&console.log("SSE open: "+this.url)}_onMessage(i,t){return s=>{this.retry=this.options.retry,typeof t=="function"&&t(i,s)}}_onError(i,t){return()=>{window.systemInfo.debug==="yes"&&console.log("SSE retry: "+this.url),this.es&&(this._removeAllEvent(i,t),this.unsunscribe()),this.retry>0&&(this.retry--,this.timer=setTimeout(()=>{this.subscribe(i,t)},this.options.interval))}}_removeAllEvent(i,t){i=$A.isArray(i)?i:[i],this.es.removeEventListener("open",this._onOpen),i.some(s=>{this.es.removeEventListener(s,this._onMessage(s,t))}),this.es.removeEventListener("error",this._onError(i,t))}subscribe(i,t){i=$A.isArray(i)?i:[i],this.es=new EventSource(this.url),this.es.addEventListener("open",this._onOpen),i.some(s=>{this.es.addEventListener(s,this._onMessage(s,t))}),this.es.addEventListener("error",this._onError(i,t))}unsunscribe(){this.es&&(this.es.close(),this.es=null),this.timer&&clearTimeout(this.timer),window.systemInfo.debug==="yes"&&console.log("SSE cancel: "+this.url)}}var _s={init({state:e,dispatch:i}){return new Promise(async t=>{let s=null;const n=await $A.IDBString("clearCache");n&&(n==="handle"&&(s="handleClearCache"),await $A.IDBRemove("clearCache"),await $A.IDBRemove("cacheVersion")),await $A.IDBString("cacheVersion")!==e.cacheVersion?await i("handleClearCache"):await i("handleReadCache"),await i("synchTheme"),await i("handleKeyboard"),e.clientId||(e.clientId=$A.randomString(6),await $A.IDBSet("clientId",e.clientId)),i("call",{url:"users/key/client",data:{client_id:e.clientId},encrypt:!1}).then(({data:r})=>{e.apiKeyData=r}),i("systemSetting"),await $A.loadScriptS(["language/web/key.js",`language/web/${P}.js`]),t(s)})},call({state:e,dispatch:i},t){var o;$A.isJson(t)||(t={url:t});const s={"Content-Type":"application/json",language:P,token:e.userToken,fd:$A.getSessionStorageString("userWsFd"),version:window.systemInfo.version||"0.0.1",platform:$A.Platform};if(!e.userToken&&((o=e.meetingWindow)==null?void 0:o.meetingSharekey)&&(s.sharekey=e.meetingWindow.meetingSharekey),$A.isJson(t.header)?t.header=Object.assign(s,t.header):t.header=s,e.systemConfig.e2e_message==="open"&&t.encrypt===void 0&&$A.inArray(t.url,["users/login","users/editpass","users/operation","users/delete/account","system/license","users/bot/*","dialog/msg/*"],!0)&&(t.encrypt=!0),t.encrypt){const r=window.navigator.userAgent;(window.systemInfo.debug==="yes"||/Windows NT 5.1|Windows XP/.test(r)||r.indexOf("Windows NT 6.0")!==-1||r.indexOf("Windows NT 6.1")!==-1||r.indexOf("Windows NT 6.2")!==-1)&&(t.encrypt=!1)}t.url=$A.apiUrl(t.url),t.data=$A.newDateString(t.data);const n=$A.cloneJSON(t);return new Promise(async(r,a)=>{if(/^https*:\/\/public\//.test(t.url)){a({ret:-1,data:{},msg:"No server address"});return}const l=[];if(t.encrypt===!0&&(t.data&&e.apiKeyData.type==="pgp"&&(l.push(`encrypt_type=${e.apiKeyData.type};encrypt_id=${e.apiKeyData.id}`),t.method="post",t.data={encrypted:await i("pgpEncryptApi",t.data)}),l.push("client_type=pgp;client_key="+(await i("pgpGetLocalKey")).publicKeyB64)),l.length>0&&(t.header.encrypt=l.join(";")),t.method==="post"&&(t.data=JSON.stringify(t.data)),t.spinner===!0||typeof t.spinner=="number"&&t.spinner>0){const{before:c,complete:u}=t;t.before=()=>{i("showSpinner",typeof t.spinner=="number"?t.spinner:0),typeof c=="function"&&c()},t.complete=()=>{i("hiddenSpinner"),typeof u=="function"&&u()}}if(t.success=async(c,u,f)=>{if(e.ajaxNetworkException=!1,!$A.isJson(c)){console.log(c,u,f),a({ret:-1,data:{},msg:"Return error"});return}t.encrypt===!0&&c.encrypted&&(c=await i("pgpDecryptApi",c.encrypted));const{ret:d,data:h,msg:p}=c;if(d===-1&&(e.userId=0,t.skipAuthError!==!0)){$A.modalError({content:p,onOk:()=>{i("logout")}}),a(c);return}if(d===-2&&t.checkNick!==!1){i("userEditInput","nickname").then(()=>{i("call",n).then(r).catch(a)}).catch(_=>{a({ret:-1,data:h,msg:_||$A.L("\u8BF7\u8BBE\u7F6E\u6635\u79F0\uFF01")})});return}if(d===-3&&t.checkTel!==!1){i("userEditInput","tel").then(()=>{i("call",n).then(r).catch(a)}).catch(_=>{a({ret:-1,data:h,msg:_||$A.L("\u8BF7\u8BBE\u7F6E\u8054\u7CFB\u7535\u8BDD\uFF01")})});return}d===1?r({data:h,msg:p}):(a({ret:d,data:h,msg:p||"Unknown error"}),d===-4001?i("forgetProject",h.project_id):d===-4002?(h.force===1&&(e.taskArchiveView=0),i("forgetTask",h.task_id)):d===-4003?i("forgetDialog",h.dialog_id):d===-4004&&i("getTaskForParent",h.task_id).catch(()=>{}))},t.error=(c,u)=>{const f=window.navigator.onLine===!1||u===0&&c.readyState===4;if(f&&n.method!=="post"&&n.__networkFailureRetry!==!0){setTimeout(d=>{n.__networkFailureRetry=!0,i("call",n).then(r).catch(a)},1e3);return}t.checkNetwork!==!1&&(e.ajaxNetworkException=f),a(f?{ret:-1001,data:{},msg:"Network exception"}:{ret:-1,data:{},msg:"System error"}),console.error(c,u)},t.websocket===!0){const c=$A.randomString(16),u=setTimeout(()=>{const f=e.ajaxWsListener.find(d=>d.apiWebsocket==c);f&&(f.complete(),f.error("timeout"),f.after()),e.ajaxWsListener=e.ajaxWsListener.filter(d=>d.apiWebsocket!=c)},t.timeout||3e4);e.ajaxWsListener.push({apiWebsocket:c,complete:typeof t.complete=="function"?t.complete:()=>{},success:typeof t.success=="function"?t.success:()=>{},error:typeof t.error=="function"?t.error:()=>{},after:typeof t.after=="function"?t.after:()=>{}}),t.complete=()=>{},t.success=()=>{},t.error=()=>{},t.after=()=>{},t.header["Api-Websocket"]=c,e.ajaxWsReady===!1&&(e.ajaxWsReady=!0,i("websocketMsgListener",{name:"apiWebsocket",callback:f=>{switch(f.type){case"apiWebsocket":clearTimeout(u);const d=f.apiWebsocket,h=f.apiSuccess,p=f.data,_=e.ajaxWsListener.find(v=>v.apiWebsocket==d);_&&(_.complete(),h?_.success(p):_.error(p),_.after()),e.ajaxWsListener=e.ajaxWsListener.filter(v=>v.apiWebsocket!=d);break}}}))}$A.ajaxc(t)})},callCancel({state:e},i){return new Promise((t,s)=>{$A.ajaxcCancel(i)?t():s()})},systemSetting({dispatch:e,state:i}){return new Promise((t,s)=>{switch(i.systemConfig.__state){case"success":t(i.systemConfig);break;case"loading":setTimeout(n=>{e("systemSetting").then(t).catch(s)},100);break;default:i.systemConfig.__state="loading",e("call",{url:"system/setting"}).then(({data:n})=>{i.systemConfig=Object.assign(n,{timezoneDifference:$A.updateTimezone(n.server_timezone),__state:"success"}),t(i.systemConfig)}).catch(n=>{i.systemConfig.__state="error",s()});break}})},needHome({dispatch:e,state:i}){return new Promise((t,s)=>{if($A.isSoftware){s();return}e("systemSetting").then(n=>{n.start_home==="open"?t():s()}).catch(s)})},downUrl({state:e},i){if(!i)return;let t=i,s=!0;if($A.isJson(i)&&(t=i.url,s=!!i.token),s){let n={token:e.userToken};$A.isJson(i)&&(t=i.url,n=i.params||{}),t=$A.urlAddParams(t,n)}$A.Electron?$A.Electron.request({action:"openExternal",url:t},()=>{},()=>{}):$A.isEEUiApp?$A.eeuiAppOpenWeb(t):window.open(t)},filePos({state:e,dispatch:i},t){if($A.isSubElectron){$A.execMainDispatch("filePos",t),$A.Electron.sendMessage("mainWindowActive");return}i("openTask",0),e.windowPortrait&&i("openDialog",0),$A.goForward({name:"manage-file",params:t})},toggleProjectParameter({state:e},i){$A.execMainDispatch("toggleProjectParameter",i);let t=i,s=null,n=e.projectId;if($A.isJson(i)&&(t=i.key,s=i.value,n=i.project_id),n){let o=e.cacheProjectParameter.findIndex(a=>a.project_id==n);o===-1&&(e.cacheProjectParameter.push($A.projectParameterTemplate(n)),o=e.cacheProjectParameter.findIndex(a=>a.project_id==n));const r=e.cacheProjectParameter[o];$A.isJson(t)||(t={[t]:s||!r[t]}),e.cacheProjectParameter.splice(o,1,Object.assign(r,t)),$A.IDBSave("cacheProjectParameter",e.cacheProjectParameter)}},setTheme({state:e,dispatch:i},t){return new Promise(function(s){if(t===void 0){s(!1);return}if(!$A.dark.utils.supportMode()){$A.isEEUiApp?$A.modalWarning("\u4EC5Android\u8BBE\u7F6E\u652F\u6301\u4E3B\u9898\u529F\u80FD"):$A.modalWarning("\u4EC5\u5BA2\u6237\u7AEF\u6216Chrome\u6D4F\u89C8\u5668\u652F\u6301\u4E3B\u9898\u529F\u80FD"),s(!1);return}i("synchTheme",t),s(!0)})},synchTheme({state:e,dispatch:i},t=void 0){switch(typeof t=="undefined"?t=e.themeConf:e.themeConf=t,t){case"dark":$A.dark.enableDarkMode();break;case"light":$A.dark.disableDarkMode();break;default:e.themeConf="auto",$A.dark.autoDarkMode();break}e.themeName=$A.dark.isDarkEnabled()?"dark":"light",window.localStorage.setItem("__system:themeConf__",e.themeConf),$A.isEEUiApp&&$A.eeuiAppSendMessage({action:"updateTheme",themeName:e.themeName})},getBasicData({state:e,dispatch:i},t){if(typeof t=="number"){window.__getBasicDataTimer&&clearTimeout(window.__getBasicDataTimer),t>-1&&(window.__getBasicDataTimer=setTimeout(o=>i("getBasicData",null),t));return}const s=e.userId+$A.dayjs().unix();if(window.__getBasicDataKey===s)return;window.__getBasicDataKey=s,i("getProjects").catch(()=>{}),i("getDialogAuto").catch(()=>{}),i("getDialogTodo",0).catch(()=>{}),i("getReportUnread",1e3),i("getApproveUnread",1e3),i("getTaskForDashboard"),i("dialogMsgRead");const n=Object.values(e.userAvatar).map(({userid:o})=>o);[...new Set(n)].some(o=>i("getUserBasic",{userid:o}))},getReportUnread({state:e,dispatch:i},t){window.__getReportUnread&&clearTimeout(window.__getReportUnread),window.__getReportUnread=setTimeout(()=>{e.userId===0?e.reportUnreadNumber=0:i("call",{url:"report/unread"}).then(({data:s})=>{e.reportUnreadNumber=s.total||0}).catch(s=>{})},typeof t=="number"?t:1e3)},getApproveUnread({state:e,dispatch:i},t){window.__getApproveUnread&&clearTimeout(window.__getApproveUnread),window.__getApproveUnread=setTimeout(()=>{e.userId===0?e.approveUnreadNumber=0:i("call",{url:"approve/process/doto"}).then(({data:s})=>{e.approveUnreadNumber=s.total||0}).catch(({msg:s})=>{s.indexOf("404 not found")!==-1&&$A.modalInfo({title:"\u7248\u672C\u8FC7\u4F4E",content:"\u670D\u52A1\u5668\u7248\u672C\u8FC7\u4F4E\uFF0C\u8BF7\u5347\u7EA7\u670D\u52A1\u5668\u3002"})})},typeof t=="number"?t:1e3)},getUserInfo({dispatch:e}){return new Promise(function(i,t){e("call",{url:"users/info"}).then(s=>{e("saveUserInfo",s.data),i(s)}).catch(s=>{console.warn(s),t(s)})})},saveUserInfoBase({state:e,dispatch:i},t){return new Promise(async s=>{const n=$A.cloneJSON(t);n.userid=$A.runNum(n.userid),n.token=n.userid>0?n.token||e.userToken:"",e.userInfo=n,e.userId=n.userid,e.userToken=n.token,e.userIsAdmin=$A.inArray("admin",n.identity),await $A.IDBSet("userInfo",e.userInfo),$A.eeuiAppSendMessage({action:"userChatList",token:e.userToken,url:$A.mainUrl("api/users/share/list")+`?token=${e.userToken}`}),$A.eeuiAppSendMessage({action:"userUploadUrl",token:e.userToken,dirUrl:$A.mainUrl("api/file/content/upload")+`?token=${e.userToken}`,chatUrl:$A.mainUrl("api/dialog/msg/sendfiles")+`?token=${e.userToken}`}),s()})},saveUserInfo({state:e,dispatch:i},t){return new Promise(async s=>{await i("saveUserInfoBase",t),i("getBasicData",null),e.userId>0&&(e.cacheUserBasic=e.cacheUserBasic.filter(({userid:n})=>n!==e.userId),i("saveUserBasic",e.userInfo)),s()})},getUserBasic({state:e,dispatch:i},t){if(e.loadUserBasic===!0){t&&e.cacheUserWait.push(t);return}let s=$A.dayjs().unix(),n=$A.cloneJSON(e.cacheUserWait);t&&t.userid&&n.push(t),e.cacheUserWait=[];let o=[],r=0;n.some(a=>{let l=e.cacheUserBasic.find(({userid:c})=>c==a.userid);if(l&&s-l._time<=30)return setTimeout(()=>{e.cacheUserActive=Object.assign(l,{__:Math.random()}),x.Store.set("userActive",{type:"cache",data:l})},r+=5),!1;o.push(a)}),o.length!==0&&(o.length>30&&(e.cacheUserWait=o.slice(30),o=o.slice(0,30)),e.loadUserBasic=!0,i("call",{url:"users/basic",data:{userid:[...new Set(o.map(({userid:a})=>a))]},skipAuthError:!0}).then(a=>{s=$A.dayjs().unix(),o.forEach(l=>{let c=a.data.find(({userid:u})=>u==l.userid)||Object.assign(l,{email:""});c._time=s,i("saveUserBasic",c)}),e.loadUserBasic=!1,i("getUserBasic")}).catch(a=>{console.warn(a),e.loadUserBasic=!1,i("getUserBasic")}))},saveUserBasic({state:e},i){$A.execMainDispatch("saveUserBasic",i);const t=e.cacheUserBasic.findIndex(({userid:s})=>s==i.userid);t>-1?(i=Object.assign({},e.cacheUserBasic[t],i),e.cacheUserBasic.splice(t,1,i)):e.cacheUserBasic.push(i),e.cacheUserActive=Object.assign(i,{__:Math.random()}),x.Store.set("userActive",{type:"cache",data:i}),$A.IDBSave("cacheUserBasic",e.cacheUserBasic)},userEditInput({dispatch:e},i){return new Promise(function(t,s){let n="";if(i==="nickname")n="\u6635\u79F0";else if(i==="tel")n="\u8054\u7CFB\u7535\u8BDD";else{s("\u53C2\u6570\u9519\u8BEF");return}setTimeout(o=>{$A.modalInput({title:`\u8BBE\u7F6E${n}`,placeholder:`\u8BF7\u8F93\u5165\u60A8\u7684${n}`,okText:"\u4FDD\u5B58",onOk:r=>r?new Promise((a,l)=>{e("call",{url:"users/editdata",data:{[i]:r},checkNick:!1,checkTel:!1}).then(()=>{e("getUserInfo").finally(c=>{a(),t()})}).catch(({msg:c})=>{l(c)})}):`\u8BF7\u8F93\u5165${n}`,onCancel:r=>s})},100)})},logout({state:e,dispatch:i},t=!0){i("handleClearCache",{}).then(()=>{let s=["/","/login"].includes(window.location.pathname)?"":encodeURIComponent(window.location.href);t===!1&&(s=null),$A.goForward({name:"login",query:s?{from:s}:{}},!0)})},handleKeyboard({state:e},i){return new Promise(t=>{window.localStorage.getItem("__system:keyboardConf__")||(window.localStorage.setItem("__system:keyboardConf__",window.localStorage.getItem("__keyboard:data__")),window.localStorage.removeItem("__keyboard:data__"));const s=$A.isJson(i)?i:$A.jsonParse(window.localStorage.getItem("__system:keyboardConf__"))||{};s.screenshot_key=(s.screenshot_key||"").trim().toLowerCase(),s.send_button_app=s.send_button_app||"button",s.send_button_desktop=s.send_button_desktop||"enter",window.localStorage.setItem("__system:keyboardConf__",$A.jsonStringify(s)),e.cacheKeyboard=s,t(s)})},handleClearCache({state:e,dispatch:i},t){return new Promise(async s=>{const n=window.localStorage.getItem("__system:themeConf__"),o=window.localStorage.getItem("__system:languageName__"),r=window.localStorage.getItem("__system:keyboardConf__");window.localStorage.clear(),window.localStorage.setItem("__system:themeConf__",n),window.localStorage.setItem("__system:languageName__",o),window.localStorage.setItem("__system:keyboardConf__",r);const a=await $A.IDBString("clientId"),l=await $A.IDBString("cacheServerUrl"),c=await $A.IDBArray("cacheProjectParameter"),u=await $A.IDBString("cacheLoginEmail"),f=await $A.IDBJson("cacheFileSort"),d=await $A.IDBArray("cacheTaskBrowse"),h=await $A.IDBArray("cacheEmojis"),p=await $A.IDBJson("userInfo");await $A.IDBClear(),await $A.IDBSet("clientId",a),await $A.IDBSet("cacheServerUrl",l),await $A.IDBSet("cacheProjectParameter",c),await $A.IDBSet("cacheLoginEmail",u),await $A.IDBSet("cacheFileSort",f),await $A.IDBSet("cacheTaskBrowse",d),await $A.IDBSet("cacheEmojis",h),await $A.IDBSet("cacheVersion",e.cacheVersion),await i("saveUserInfoBase",$A.isJson(t)?t:p),await i("handleReadCache"),s()})},handleReadCache({state:e}){return new Promise(async i=>{e.clientId=await $A.IDBString("clientId"),e.cacheServerUrl=await $A.IDBString("cacheServerUrl"),e.cacheUserBasic=await $A.IDBArray("cacheUserBasic"),e.cacheDialogs=(await $A.IDBArray("cacheDialogs")).map(n=>Object.assign(n,{loading:!1,extra_draft_has:n.extra_draft_content?1:0})),e.cacheProjects=await $A.IDBArray("cacheProjects"),e.cacheColumns=await $A.IDBArray("cacheColumns"),e.cacheTasks=await $A.IDBArray("cacheTasks"),e.cacheProjectParameter=await $A.IDBArray("cacheProjectParameter"),e.cacheTaskBrowse=await $A.IDBArray("cacheTaskBrowse"),e.dialogMsgs=await $A.IDBArray("dialogMsgs"),e.fileLists=await $A.IDBArray("fileLists"),e.userInfo=await $A.IDBJson("userInfo"),e.callAt=await $A.IDBArray("callAt"),e.cacheEmojis=await $A.IDBArray("cacheEmojis"),e.userInfo.userid&&(e.userId=e.userInfo.userid=$A.runNum(e.userInfo.userid),e.userToken=e.userInfo.token,e.userIsAdmin=$A.inArray("admin",e.userInfo.identity));const t=$A.runNum(window.localStorage.getItem("__system:userId__")),s=window.localStorage.getItem("__system:userToken__")||"";e.userId===0&&t&&s&&(e.userId=t,e.userToken=s),e.cacheServerUrl&&(window.systemInfo.apiUrl=e.cacheServerUrl),i()})},userUrl({state:e},i){return new Promise(t=>{const s=$A.urlAddParams(i,{language:P,theme:e.themeConf,userid:e.userId,token:e.userToken});t(s)})},openAppChildPage({dispatch:e},i){e("userUrl",i.params.url).then(t=>{i.params.url=t,$A.eeuiAppOpenPage(i)})},openChildWindow({dispatch:e},i){e("userUrl",i.path).then(t=>{$A.Electron.sendMessage("openChildWindow",Object.assign(i,{path:t}))})},openWebTabWindow({dispatch:e},i){if($A.getDomain(i)!=$A.getDomain($A.mainUrl())){$A.Electron.sendMessage("openWebTabWindow",{url:i});return}e("userUrl",i).then(t=>{$A.Electron.sendMessage("openWebTabWindow",{url:t})})},saveFile({state:e,dispatch:i},t){if($A.execMainDispatch("saveFile",t),$A.isArray(t))t.forEach(s=>{i("saveFile",s)});else if($A.isJson(t)){let s={_load:!1,_edit:!1};const n=e.fileLists.findIndex(({id:o})=>o==t.id);n>-1?e.fileLists.splice(n,1,Object.assign(s,e.fileLists[n],t)):e.fileLists.push(Object.assign(s,t)),$A.IDBSave("fileLists",e.fileLists,600)}},forgetFile({state:e,dispatch:i},t){$A.execMainDispatch("forgetFile",t),($A.isArray(t)?t:[t]).some(n=>{e.fileLists=e.fileLists.filter(o=>o.id!=n),e.fileLists.some(o=>{o.pid==n&&i("forgetFile",o.id)}),$A.IDBSave("fileLists",e.fileLists,600)})},packProgress({state:e,dispatch:i},t){$A.execMainDispatch("packProgress",t);const s=e.filePackLists.findIndex(({name:n})=>n==t.name);s>-1?e.filePackLists[s].progress=t.progress:(e.filePackLists.push(t),$A.IDBSave("filePackLists",e.filePackLists,600))},getFiles({state:e,dispatch:i},t){return new Promise(function(s,n){i("call",{url:"file/lists",data:{pid:t}}).then(o=>{const r=o.data.map(({id:a})=>a);e.fileLists=e.fileLists.filter(a=>a.pid!=t||r.includes(a.id)),$A.IDBSave("fileLists",e.fileLists,600),i("saveFile",o.data),s(o)}).catch(o=>{console.warn(o),n(o)})})},searchFiles({state:e,dispatch:i},t){return $A.isJson(t)||(t={key:t}),new Promise(function(s,n){i("call",{url:"file/search",data:t}).then(o=>{i("saveFile",o.data),s(o)}).catch(o=>{console.warn(o),n(o)})})},saveProject({state:e,dispatch:i},t){if($A.execMainDispatch("saveProject",t),$A.isArray(t))t.forEach(s=>{i("saveProject",s)});else if($A.isJson(t)){typeof t.project_column!="undefined"&&(i("saveColumn",t.project_column),delete t.project_column);const s=e.cacheProjects.findIndex(({id:n})=>n==t.id);s>-1?e.cacheProjects.splice(s,1,Object.assign({},e.cacheProjects[s],t)):(typeof t.project_user=="undefined"&&(t.project_user=[]),e.cacheProjects.push(t),e.projectTotal++),e.cacheDialogs.some(n=>{if(n.type=="group"&&n.group_type=="project"&&n.group_info.id==t.id){t.name!==void 0&&(n.name=t.name);for(let o in n.group_info)!n.group_info.hasOwnProperty(o)||t[o]===void 0||(n.group_info[o]=t[o])}}),$A.IDBSave("cacheProjects",e.cacheProjects)}},forgetProject({state:e,dispatch:i},t){$A.execMainDispatch("forgetProject",t);const s=$A.isArray(t)?t:[t];if(s.some(n=>{const o=e.cacheProjects.findIndex(r=>r.id==n);o>-1&&(i("forgetTask",e.cacheTasks.filter(r=>r.project_id==t).map(r=>r.id)),i("forgetColumn",e.cacheColumns.filter(r=>r.project_id==t).map(r=>r.id)),e.cacheProjects.splice(o,1),e.projectTotal=Math.max(0,e.projectTotal-1))}),s.includes(e.projectId)){const n=$A.cloneJSON(e.cacheProjects).sort((o,r)=>o.top_at||r.top_at?$A.dayjs(r.top_at)-$A.dayjs(o.top_at):r.id-o.id).find(({id:o})=>o&&o!=t);n?$A.goForward({name:"manage-project",params:{projectId:n.id}}):$A.goForward({name:"manage-dashboard"})}$A.IDBSave("cacheProjects",e.cacheProjects)},getProjects({state:e,dispatch:i,getters:t},s){return new Promise(function(n,o){if(e.userId===0){e.cacheProjects=[],o({msg:"Parameter error"});return}const r=H("projects",s,e);setTimeout(()=>{e.loadProjects++},2e3),i("call",{url:"project/lists",data:r.get()}).then(({data:a})=>{i("saveProject",a.data),r.save(a).then(l=>i("forgetProject",l)),e.projectTotal=a.total_all,n(a)}).catch(a=>{console.warn(a),o(a)}).finally(a=>{e.loadProjects--})})},getProjectOne({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}e.projectLoad++,i("call",{url:"project/one",data:{project_id:t}}).then(o=>{setTimeout(()=>{e.projectLoad--},10),i("saveProject",o.data),s(o)}).catch(o=>{console.warn(o),e.projectLoad--,n(o)})})},archivedProject({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}i("call",{url:"project/archived",data:{project_id:t}}).then(o=>{i("forgetProject",t),s(o)}).catch(o=>{console.warn(o),i("getProjectOne",t).catch(()=>{}),n(o)})})},removeProject({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}i("call",{url:"project/remove",data:{project_id:t}}).then(o=>{i("forgetProject",t),s(o)}).catch(o=>{console.warn(o),i("getProjectOne",t).catch(()=>{}),n(o)})})},exitProject({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}i("call",{url:"project/exit",data:{project_id:t}}).then(o=>{i("forgetProject",t),s(o)}).catch(o=>{console.warn(o),i("getProjectOne",t).catch(()=>{}),n(o)})})},saveColumn({state:e,dispatch:i},t){if($A.execMainDispatch("saveColumn",t),$A.isArray(t))t.forEach(s=>{i("saveColumn",s)});else if($A.isJson(t)){const s=e.cacheColumns.findIndex(({id:n})=>n==t.id);s>-1?e.cacheColumns.splice(s,1,Object.assign({},e.cacheColumns[s],t)):e.cacheColumns.push(t),$A.IDBSave("cacheColumns",e.cacheColumns)}},forgetColumn({state:e,dispatch:i},t){$A.execMainDispatch("forgetColumn",t);const s=$A.isArray(t)?t:[t],n=[];s.some(o=>{const r=e.cacheColumns.findIndex(a=>a.id==o);r>-1&&(i("forgetTask",e.cacheTasks.filter(a=>a.column_id==t).map(a=>a.id)),n.push(e.cacheColumns[r].project_id),e.cacheColumns.splice(r,1))}),Array.from(new Set(n)).some(o=>i("getProjectOne",o).catch(()=>{})),$A.IDBSave("cacheColumns",e.cacheColumns)},getColumns({state:e,dispatch:i},t){return new Promise(function(s,n){if(e.userId===0){e.cacheColumns=[],n({msg:"Parameter error"});return}e.projectLoad++,i("call",{url:"project/column/lists",data:{project_id:t}}).then(({data:o})=>{e.projectLoad--;const r=o.data.map(({id:a})=>a);if(e.cacheColumns=e.cacheColumns.filter(a=>a.project_id!=t||r.includes(a.id)),i("saveColumn",o.data),s(o.data),e.cacheColumns.filter(a=>a.project_id==t).length===1){const a=e.cacheProjectParameter.find(l=>l.project_id==t)||{};(typeof a.menuInit=="undefined"||a.menuInit===!1)&&i("toggleProjectParameter",{project_id:t,key:{menuInit:!0,menuType:"table"}})}}).catch(o=>{console.warn(o),e.projectLoad--,n(o)})})},removeColumn({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}i("call",{url:"project/column/remove",data:{column_id:t}}).then(o=>{i("forgetColumn",t),s(o)}).catch(o=>{console.warn(o),n(o)})})},saveTask({state:e,dispatch:i},t){if($A.execMainDispatch("saveTask",t),$A.isArray(t))t.forEach(s=>{i("saveTask",s)});else if($A.isJson(t)){t._time=$A.dayjs().unix(),t.flow_item_name&&t.flow_item_name.indexOf("|")!==-1&&([t.flow_item_status,t.flow_item_name]=t.flow_item_name.split("|")),typeof t.archived_at!="undefined"&&e.cacheTasks.filter(o=>o.parent_id==t.id).some(o=>{i("saveTask",Object.assign(o,{archived_at:t.archived_at,archived_userid:t.archived_userid}))});let s={};typeof t.update_marking!="undefined"&&(s=$A.isJson(t.update_marking)?t.update_marking:{},delete t.update_marking);const n=e.cacheTasks.findIndex(({id:o})=>o==t.id);n>-1?e.cacheTasks.splice(n,1,Object.assign({},e.cacheTasks[n],t)):e.cacheTasks.push(t),(s.is_update_maintask===!0||t.parent_id>0&&e.cacheTasks.findIndex(({id:o})=>o==t.parent_id)===-1)&&i("getTaskOne",t.parent_id).catch(()=>{}),s.is_update_project===!0&&i("getProjectOne",t.project_id).catch(()=>{}),s.is_update_content===!0&&i("getTaskContent",t.id),s.is_update_subtask===!0&&i("getTaskForParent",t.id).catch(()=>{}),e.cacheDialogs.some(o=>{if(o.name===void 0||o.dialog_delete===1)return!1;if(o.type=="group"&&o.group_type=="task"&&o.group_info.id==t.id){t.name!==void 0&&(o.name=t.name);for(let r in o.group_info)!o.group_info.hasOwnProperty(r)||t[r]===void 0||(o.group_info[r]=t[r])}}),$A.IDBSave("cacheTasks",e.cacheTasks)}},forgetTask({state:e,dispatch:i},t){$A.execMainDispatch("forgetTask",t);const s=($A.isArray(t)?t:[t]).filter(r=>r!=e.taskArchiveView),n=[],o=[];s.some(r=>{const a=e.cacheTasks.findIndex(l=>l.id==r);a>-1&&(e.cacheTasks[a].parent_id&&n.push(e.cacheTasks[a].parent_id),o.push(e.cacheTasks[a].project_id),e.cacheTasks.splice(a,1)),e.cacheTasks.filter(l=>l.parent_id==r).some(l=>{let c=e.cacheTasks.findIndex(u=>u.id==l.id);c>-1&&(o.push(l.project_id),e.cacheTasks.splice(c,1))})}),Array.from(new Set(n)).some(r=>i("getTaskOne",r).catch(()=>{})),Array.from(new Set(o)).some(r=>i("getProjectOne",r).catch(()=>{})),s.includes(e.taskId)&&(e.taskId=0),$A.IDBSave("cacheTasks",e.cacheTasks)},todayAndOverdue({state:e,dispatch:i}){const t=$A.daytz(),s=t.format("YYYY-MM-DD");e.cacheTasks.some(n=>{if(!n.end_at)return!1;const o={},r=$A.dayjs(n.end_at);!n.today&&r.format("YYYY-MM-DD")==s&&(o.today=!0),!n.overdue&&r<t&&(o.overdue=!0),Object.keys(o).length>0&&i("saveTask",Object.assign(n,o))})},increaseTaskMsgNum({state:e},i){if($A.execMainDispatch("increaseTaskMsgNum",i),!$A.execMainCacheJudge(`increaseTaskMsgNum:${i.id}`)&&i.dialog_id){const t=e.cacheTasks.find(({dialog_id:s})=>s===i.dialog_id);t&&t.msg_num++}},increaseMsgReplyNum({state:e,dispatch:i},t){if($A.execMainDispatch("increaseMsgReplyNum",t),!$A.execMainCacheJudge(`increaseMsgReplyNum:${t.id}`)&&t.reply_id>0){const s=e.dialogMsgs.find(({id:n})=>n==t.reply_id);s&&s.reply_num++}},decrementMsgReplyNum({state:e,dispatch:i},t){if($A.execMainDispatch("decrementMsgReplyNum",t),!$A.execMainCacheJudge(`decrementMsgReplyNum:${t.id}`)&&t.reply_id>0){const s=e.dialogMsgs.find(({id:n})=>n==t.reply_id);s&&s.reply_num--}},getTasks({state:e,dispatch:i},t){t===null&&(t={});const s=H("tasks",t,e);return new Promise(function(n,o){if(e.userId===0){e.cacheTasks=[],o({msg:"Parameter error"});return}t.project_id&&e.projectLoad++,i("call",{url:"project/task/lists",data:s.get()}).then(({data:r})=>{t.project_id&&e.projectLoad--,i("saveTask",r.data),s.save(r).then(a=>i("forgetTask",a)),r.next_page_url?(t.page=r.current_page+1,r.current_page%30===0?$A.modalConfirm({content:"\u6570\u636E\u5DF2\u8D85\u8FC7"+r.to+"\u6761\uFF0C\u662F\u5426\u7EE7\u7EED\u52A0\u8F7D\uFF1F",onOk:()=>{i("getTasks",t).then(n).catch(o)},onCancel:()=>{n()}}):i("getTasks",t).then(n).catch(o)):n()}).catch(r=>{console.warn(r),o(r),t.project_id&&e.projectLoad--})})},getTaskOne({state:e,dispatch:i},t){return new Promise(function(s,n){if(/^\d+$/.test(t)&&(t={task_id:t}),$A.runNum(t.task_id)===0){n({msg:"Parameter error"});return}if($A.isArray(e.taskOneLoad[t.task_id])){e.taskOneLoad[t.task_id].push({resolve:s,reject:n});return}e.taskOneLoad[t.task_id]=[],i("call",{url:"project/task/one",data:t}).then(o=>{i("saveTask",o.data),s(o),e.taskOneLoad[t.task_id].some(r=>{r.resolve(o)})}).catch(o=>{console.warn(o),n(o),e.taskOneLoad[t.task_id].some(r=>{r.reject(o)})}).finally(o=>{delete e.taskOneLoad[t.task_id]})})},getTaskForDashboard({state:e,dispatch:i,getters:t},s){if(window.__getTaskForDashboard&&clearTimeout(window.__getTaskForDashboard),typeof s=="number"){s>-1&&(window.__getTaskForDashboard=setTimeout(n=>i("getTaskForDashboard",null),s));return}e.loadDashboardTasks!==!0&&(e.loadDashboardTasks=!0,i("getTasks",null).finally(n=>{e.loadDashboardTasks=!1}))},getTaskForProject({state:e,dispatch:i},t){return new Promise(function(s,n){i("getTasks",{project_id:t}).then(s).catch(n)})},getTaskForParent({state:e,dispatch:i},t){return new Promise(function(s,n){i("getTasks",{parent_id:t}).then(s).catch(n)})},removeTask({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t.task_id)===0){n({msg:"Parameter error"});return}i("setLoad",{key:`task-${t.task_id}`,delay:300}),i("call",{url:"project/task/remove",data:t}).then(o=>{e.taskArchiveView=0,i("forgetTask",t.task_id),s(o)}).catch(o=>{console.warn(o),i("getTaskOne",t.task_id).catch(()=>{}),n(o)}).finally(o=>{i("cancelLoad",`task-${t.task_id}`)})})},archivedTask({state:e,dispatch:i},t){return new Promise(function(s,n){if(/^\d+$/.test(t)&&(t={task_id:t}),$A.runNum(t.task_id)===0){n({msg:"Parameter error"});return}i("setLoad",{key:`task-${t.task_id}`,delay:300}),i("call",{url:"project/task/archived",data:t}).then(o=>{i("saveTask",o.data),s(o)}).catch(o=>{console.warn(o),i("getTaskOne",t.task_id).catch(()=>{}),n(o)}).finally(o=>{i("cancelLoad",`task-${t.task_id}`)})})},getTaskContent({state:e,dispatch:i},t){$A.runNum(t)!==0&&i("call",{url:"project/task/content",data:{task_id:t}}).then(s=>{i("saveTaskContent",s.data)}).catch(s=>{console.warn(s)})},saveTaskContent({state:e,dispatch:i},t){if($A.execMainDispatch("saveTaskContent",t),$A.isArray(t))t.forEach(s=>{i("saveTaskContent",s)});else if($A.isJson(t)){const s=e.taskContents.findIndex(({task_id:n})=>n==t.task_id);s>-1?e.taskContents.splice(s,1,Object.assign({},e.taskContents[s],t)):e.taskContents.push(t)}},getTaskFiles({state:e,dispatch:i},t){$A.runNum(t)!==0&&i("call",{url:"project/task/files",data:{task_id:t}}).then(s=>{s.data.forEach(n=>{const o=e.taskFiles.findIndex(({id:r})=>r==n.id);o>-1?e.taskFiles.splice(o,1,n):e.taskFiles.push(n)}),i("saveTask",{id:t,file_num:s.data.length})}).catch(s=>{console.warn(s)})},forgetTaskFile({state:e,dispatch:i},t){($A.isArray(t)?t:[t]).some(n=>{const o=e.taskFiles.findIndex(r=>r.id==n);o>-1&&e.taskFiles.splice(o,1)})},openTask({state:e,dispatch:i},t){let s=t;if($A.isJson(t)&&(t.parent_id>0?s=t.parent_id:s=t.id),$A.isSubElectron){s>0?$A.Electron.sendMessage("updateChildWindow",{name:`task-${s}`,path:`/single/task/${s}`}):$A.Electron.sendMessage("windowClose");return}e.taskArchiveView=s,e.taskId=s,s>0?i("getTaskOne",{task_id:s,archived:"all"}).then(()=>{i("getTaskContent",s),i("getTaskFiles",s),i("getTaskForParent",s).catch(()=>{}),i("saveTaskBrowse",s)}).catch(({msg:n})=>{$A.modalWarning({content:n,onOk:()=>{e.taskId=0}})}):e.taskOperation={}},taskAdd({state:e,dispatch:i},t){return new Promise(function(s,n){const o=$A.cloneJSON($A.newDateString(t));$A.isArray(o.column_id)&&(o.column_id=o.column_id.find(r=>r)),i("call",{url:"project/task/add",data:o,method:"post"}).then(r=>{r.data.is_visible===1&&i("addTaskSuccess",r.data),s(r)}).catch(r=>{console.warn(r),n(r)})})},taskAddSub({dispatch:e},i){return new Promise(function(t,s){e("call",{url:"project/task/addsub",data:i}).then(n=>{e("addTaskSuccess",n.data),t(n)}).catch(n=>{console.warn(n),s(n)})})},addTaskSuccess({dispatch:e},i){typeof i.new_column!="undefined"&&(e("saveColumn",i.new_column),delete i.new_column),e("saveTask",i),e("getProjectOne",i.project_id).catch(()=>{})},taskUpdate({state:e,dispatch:i},t){return new Promise(function(s,n){i("taskBeforeUpdate",t).then(({post:o})=>{i("setLoad",{key:`task-${o.task_id}`,delay:300}),i("call",{url:"project/task/update",data:o,method:"post"}).then(r=>{i("saveTask",r.data),s(r)}).catch(r=>{console.warn(r),i("getTaskOne",o.task_id).catch(()=>{}),n(r)}).finally(r=>{i("cancelLoad",`task-${o.task_id}`)})}).catch(n)})},taskBeforeUpdate({state:e,dispatch:i},t){return new Promise(function(s,n){let o=$A.cloneJSON($A.newDateString(t)),r="\u6E29\u99A8\u63D0\u793A",a=null;if(typeof o.times!="undefined"){t.times[0]===!1&&(a="\u4F60\u786E\u5B9A\u8981\u53D6\u6D88\u4EFB\u52A1\u65F6\u95F4\u5417\uFF1F");const l=e.cacheTasks.find(({id:c})=>c==o.task_id);r=l.parent_id>0?"\u66F4\u65B0\u5B50\u4EFB\u52A1":"\u66F4\u65B0\u4E3B\u4EFB\u52A1",l&&(l.parent_id>0?o.times[0]&&e.cacheTasks.some(c=>{if(c.id!=l.parent_id)return!1;if(!c.end_at)return a="\u4E3B\u4EFB\u52A1\u6CA1\u6709\u8BBE\u7F6E\u65F6\u95F4\uFF0C\u8BBE\u7F6E\u5B50\u4EFB\u52A1\u5C06\u540C\u6B65\u8BBE\u7F6E\u4E3B\u4EFB\u52A1",!0;let u=$A.dayjs(o.times[0]).unix(),f=$A.dayjs(o.times[1]).unix(),d=$A.dayjs(c.start_at).unix(),h=$A.dayjs(c.end_at).unix();if(u<d)return a="\u65B0\u8BBE\u7F6E\u7684\u5B50\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\u5728\u4E3B\u4EFB\u52A1\u65F6\u95F4\u4E4B\u5916\uFF0C\u4FEE\u6539\u540E\u5C06\u540C\u6B65\u4FEE\u6539\u4E3B\u4EFB\u52A1",!0;if(f>h)return a="\u65B0\u8BBE\u7F6E\u7684\u5B50\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4\u5728\u4E3B\u4EFB\u52A1\u65F6\u95F4\u4E4B\u5916\uFF0C\u4FEE\u6539\u540E\u5C06\u540C\u6B65\u4FEE\u6539\u4E3B\u4EFB\u52A1",!0}):e.cacheTasks.some(c=>{if(c.parent_id!=l.id||!c.end_at)return!1;let u=$A.dayjs(o.times[0]).unix(),f=$A.dayjs(o.times[1]).unix(),d=$A.dayjs(l.start_at).unix(),h=$A.dayjs(l.end_at).unix(),p=$A.dayjs(c.start_at).unix(),_=$A.dayjs(c.end_at).unix();if(d==p&&h==_)return!1;if(!o.times[0])return a=`\u5B50\u4EFB\u52A1\uFF08${c.name}\uFF09\u5DF2\u8BBE\u7F6E\u65F6\u95F4\uFF0C\u6E05\u9664\u4E3B\u4EFB\u52A1\u65F6\u95F4\u540E\u5C06\u540C\u6B65\u6E05\u9664\u5B50\u4EFB\u52A1\u7684\u65F6\u95F4`,!0;if(u>p)return a=`\u65B0\u8BBE\u7F6E\u7684\u5F00\u59CB\u65F6\u95F4\u5728\u5B50\u4EFB\u52A1\uFF08${c.name}\uFF09\u65F6\u95F4\u4E4B\u5185\uFF0C\u4FEE\u6539\u540E\u5C06\u540C\u6B65\u4FEE\u6539\u5B50\u4EFB\u52A1`,!0;if(f<_)return a=`\u65B0\u8BBE\u7F6E\u7684\u7ED3\u675F\u65F6\u95F4\u5728\u5B50\u4EFB\u52A1\uFF08${c.name}\uFF09\u65F6\u95F4\u4E4B\u5185\uFF0C\u4FEE\u6539\u540E\u5C06\u540C\u6B65\u4FEE\u6539\u5B50\u4EFB\u52A1`,!0}))}if(a===null){s({confirm:!1,post:o});return}$A.modalConfirm({title:r,content:a,onOk:()=>{s({confirm:!0,post:o})},onCancel:()=>{n({msg:!1})}})})},getTaskFlow({state:e,dispatch:i},{task_id:t,project_id:s}){return new Promise(function(n,o){i("call",{url:"project/task/flow",data:{task_id:t,project_id:s||0}}).then(r=>{let a=e.cacheTasks.find(({id:u})=>u==t),{data:l}=r;l.turns.some(u=>{const f=e.taskFlowItems.findIndex(({id:d})=>d==u.id);f>-1?e.taskFlowItems.splice(f,1,u):e.taskFlowItems.push(u),a&&a.flow_item_id==u.id&&a.flow_item_name!=u.name&&e.cacheTasks.filter(({flow_item_id:d})=>d==u.id).some(d=>{i("saveTask",{id:d.id,flow_item_name:`${u.status}|${u.name}`})})}),delete l.turns;const c=e.taskFlows.findIndex(({task_id:u})=>u==l.task_id);c>-1?e.taskFlows.splice(c,1,l):e.taskFlows.push(l),n(r)}).catch(r=>{console.warn(r),o(r)})})},getTaskPriority({state:e,dispatch:i}){return new Promise(function(t,s){i("call",{url:"system/priority"}).then(n=>{e.taskPriority=n.data,t(n)}).catch(n=>{console.warn(n),s(n)})})},getColumnTemplate({state:e,dispatch:i}){return new Promise(function(t,s){i("call",{url:"system/column/template"}).then(n=>{e.columnTemplate=n.data,t(n)}).catch(n=>{console.warn(n),s(n)})})},saveTaskCompleteTemp({state:e},i){/^\d+$/.test(i)&&!e.taskCompleteTemps.includes(i)&&e.taskCompleteTemps.push(i)},forgetTaskCompleteTemp({state:e},i){i===!0?e.taskCompleteTemps=[]:/^\d+$/.test(i)&&(e.taskCompleteTemps=e.taskCompleteTemps.filter(t=>t!=i))},saveTaskBrowse({state:e},i){const t=e.cacheTaskBrowse.findIndex(({id:s})=>s==i);t>-1&&e.cacheTaskBrowse.splice(t,1),e.cacheTaskBrowse.unshift({id:i,userid:e.userId}),e.cacheTaskBrowse.length>200&&e.cacheTaskBrowse.splice(200),$A.IDBSave("cacheTaskBrowse",e.cacheTaskBrowse)},taskDefaultTime({state:e,dispatch:i},t){return new Promise(async s=>{$A.isArray(t)&&(t[0]=await i("taskDefaultStartTime",t[0]),t[1]=await i("taskDefaultEndTime",t[1])),s(t)})},taskDefaultStartTime({state:e},i){return new Promise(t=>{/(\s|^)([0-2]\d):([0-5]\d)(:\d{1,2})*$/.test(i)&&(i=i.replace(/(\s|^)([0-2]\d):([0-5]\d)(:\d{1,2})*$/,"$1"+e.systemConfig.task_default_time[0])),t(i)})},taskDefaultEndTime({state:e},i){return new Promise(t=>{/(\s|^)([0-2]\d):([0-5]\d)(:\d{1,2})*$/.test(i)&&(i=i.replace(/(\s|^)([0-2]\d):([0-5]\d)(:\d{1,2})*$/,"$1"+e.systemConfig.task_default_time[1])),t(i)})},saveDialog({state:e,dispatch:i},t){var s;if($A.execMainDispatch("saveDialog",t),$A.isArray(t))t.forEach(n=>{i("saveDialog",n)});else if($A.isJson(t)){t.id=parseInt(t.id);const n=e.cacheDialogs.findIndex(({id:o})=>o==t.id);if(n>-1){const o=e.cacheDialogs[n],r=t.user_ms,a=o.user_ms||0;r<a&&(typeof t.unread!="undefined"&&delete t.unread,typeof t.unread_one!="undefined"&&delete t.unread_one,typeof t.mention!="undefined"&&delete t.mention,typeof t.mention_ids!="undefined"&&delete t.mention_ids),t.unread_one&&(s=e.dialogMsgs.find(l=>l.id==t.unread_one))!=null&&s.read_at&&delete t.unread_one,t.mention_ids&&(t.mention_ids=t.mention_ids.filter(l=>{var c;return!((c=e.dialogMsgs.find(u=>u.id==l))!=null&&c.read_at)})),e.cacheDialogs.splice(n,1,Object.assign({},o,t))}else e.cacheDialogs.push(t);$A.IDBSave("cacheDialogs",e.cacheDialogs)}},updateDialogLastMsg({state:e,dispatch:i},t){if($A.execMainDispatch("updateDialogLastMsg",t),$A.isArray(t))t.forEach(s=>{i("updateDialogLastMsg",s)});else if($A.isJson(t))if(e.cacheDialogs.findIndex(({id:n})=>n==t.dialog_id)>-1){const n={id:t.dialog_id,last_msg:t,last_at:t.created_at||$A.daytz().format("YYYY-MM-DD HH:mm:ss")};t.mtype=="tag"&&(n.has_tag=!0),t.mtype=="todo"&&(n.has_todo=!0),t.mtype=="image"&&(n.has_image=!0),t.mtype=="file"&&(n.has_file=!0),t.link&&(n.has_link=!0),i("saveDialog",n)}else i("getDialogOne",t.dialog_id).catch(()=>{})},getDialogAuto({state:e,dispatch:i}){return new Promise(function(t,s){if(e.loadDialogAuto){s({msg:"Loading"});return}setTimeout(n=>{e.loadDialogs++},2e3),e.loadDialogAuto=!0,i("getDialogs").then(t).catch(s).finally(n=>{e.loadDialogs--,e.loadDialogAuto=!1})})},getDialogs({state:e,dispatch:i,getters:t},s){return new Promise(function(n,o){if(e.userId===0){e.cacheDialogs=[],o({msg:"Parameter error"});return}$A.isJson(s)||(s={}),typeof s.page=="undefined"&&(s.page=1),typeof s.pagesize=="undefined"&&(s.pagesize=20);const r=H("dialogs",s,e);i("call",{url:"dialog/lists",data:r.get()}).then(({data:a})=>{i("saveDialog",a.data),r.save(a).then(l=>i("forgetDialog",l)),a.current_page===1&&i("getDialogLatestMsgs",a.data.map(({id:l})=>l)),a.next_page_url&&a.current_page<5?(s.page++,i("getDialogs",s).then(n).catch(o)):(n(),i("getDialogBeyonds"))}).catch(a=>{console.warn(a),o(a)})})},async getDialogBeyonds({state:e,dispatch:i}){const t=await $A.IDBString("dialogBeyond"),s=$A.daytz().format("YYYY-MM-DD HH");if(t==s)return;await $A.IDBSet("dialogBeyond",s);const n=a=>e.cacheDialogs.filter(a).sort((l,c)=>$A.dayjs(l.last_at)-$A.dayjs(c.last_at)).find(({id:l})=>l>0),o=n(({unread:a,last_at:l})=>a>0&&l),r=n(({todo_num:a,last_at:l})=>a>0&&l);i("call",{url:"dialog/beyond",data:{unread_at:o?o.last_at:$A.dayjs().unix(),todo_at:r?r.last_at:$A.dayjs().unix()}}).then(({data:a})=>{i("saveDialog",a)})},getDialogOne({state:e,dispatch:i},t){return new Promise(function(s,n){if($A.runNum(t)===0){n({msg:"Parameter error"});return}i("call",{url:"dialog/one",data:{dialog_id:t}}).then(o=>{i("saveDialog",o.data),s(o)}).catch(o=>{console.warn(o),n(o)})})},getDialogTodo({state:e,dispatch:i},t){i("call",{url:"dialog/todo",data:{dialog_id:t}}).then(({data:s})=>{$A.arrayLength(s)>0?(t>0&&(i("saveDialog",{id:t,todo_num:$A.arrayLength(s)}),e.dialogTodos=e.dialogTodos.filter(n=>n.dialog_id!=t)),i("saveDialogTodo",s)):t>0&&i("saveDialog",{id:t,todo_num:0})}).catch(console.warn)},getDialogMsgTop({state:e,dispatch:i},t){i("call",{url:"dialog/msg/topinfo",data:{dialog_id:t}}).then(({data:s})=>{$A.isJson(s)&&i("saveDialogMsgTop",s)}).catch(console.warn)},openDialog({state:e,dispatch:i},t){return new Promise(s=>{let n,o;$A.isJson(t)&&(n=t.search_msg_id,o=t.dialog_msg_id,t=t.dialog_id),requestAnimationFrame(r=>{e.dialogSearchMsgId=/^\d+$/.test(n)?n:0,e.dialogMsgId=/^\d+$/.test(o)?o:0,e.dialogId=/^\d+$/.test(t)?t:0,s()})})},openDialogUserid({state:e,dispatch:i},t){return new Promise(function(s,n){const o=e.cacheDialogs.find(r=>r.type!=="user"||!r.dialog_user?!1:r.dialog_user.userid===t);if(o){i("openDialog",o.id),s(o);return}i("showSpinner",600),i("call",{url:"dialog/open/user",data:{userid:t}}).then(({data:r})=>{i("saveDialog",r),i("openDialog",r.id),s(r)}).catch(r=>{console.warn(r),n(r)}).finally(r=>{i("hiddenSpinner")})})},forgetDialog({state:e,dispatch:i},t){$A.execMainDispatch("forgetDialog",t);const s=$A.isArray(t)?t:[t];s.some(n=>{const o=e.cacheDialogs.findIndex(r=>r.id==n);o>-1&&(i("forgetDialogMsg",e.dialogMsgs.filter(r=>r.dialog_id==t).map(r=>r.id)),e.cacheDialogs.splice(o,1))}),s.includes(e.dialogId)&&(e.dialogId=0),$A.IDBSave("cacheDialogs",e.cacheDialogs)},saveInDialog({state:e,dispatch:i},t){$A.execMainDispatch("saveInDialog",t);const s=e.dialogIns.findIndex(r=>r.uid==t.uid);s>-1?e.dialogIns.splice(s,1,Object.assign({},e.dialogIns[s],t)):e.dialogIns.push(t);const n=5e3,o=500;if(e.dialogHistory=e.dialogHistory.filter(r=>r!=t.dialog_id),e.dialogHistory.push(t.dialog_id),e.dialogMsgs.length>n&&e.dialogHistory.length>o){const r=e.dialogHistory.slice().reverse(),a=[],l=[];r.forEach(c=>{a.length<o||e.dialogIns.findIndex(u=>u.dialog_id==c)>-1?a.push(c):l.push(c)}),l.length>0&&(e.dialogMsgs=e.dialogMsgs.filter(c=>!l.includes(c.dialog_id)),$A.IDBSave("dialogMsgs",e.dialogMsgs,600)),e.dialogHistory=a}},forgetInDialog({state:e,dispatch:i},t){$A.execMainDispatch("forgetInDialog",t);const s=e.dialogIns.findIndex(n=>n.uid==t);s>-1&&e.dialogIns.splice(s,1)},closeDialog({state:e,dispatch:i},t){if(!/^\d+$/.test(t))return;$A.execMainDispatch("closeDialog",t);const s=e.cacheDialogs.find(o=>o.id==t);s&&(s.extra_draft_has=s.extra_draft_content?1:0);const n=e.dialogMsgs.filter(o=>o.dialog_id==t);if(n.length>e.dialogMsgKeep){const o=n.sort((r,a)=>a.id-r.id).splice(e.dialogMsgKeep).map(r=>r.id);e.dialogMsgs=e.dialogMsgs.filter(r=>!o.includes(r.id)),$A.IDBSave("dialogMsgs",e.dialogMsgs,600)}},saveDialogTodo({state:e,dispatch:i},t){if($A.execMainDispatch("saveDialogTodo",t),$A.isArray(t))t.forEach(s=>{i("saveDialogTodo",s)});else if($A.isJson(t)){const s=e.dialogTodos.findIndex(n=>n.id==t.id);s>-1?e.dialogTodos.splice(s,1,Object.assign({},e.dialogTodos[s],t)):e.dialogTodos.push(t)}},forgetDialogTodoForMsgId({state:e,dispatch:i},t){$A.execMainDispatch("forgetDialogTodoForMsgId",t);const s=e.dialogTodos.findIndex(n=>n.msg_id==t);s>-1&&e.dialogTodos.splice(s,1)},saveDialogMsgTop({state:e,dispatch:i},t){if($A.execMainDispatch("saveDialogMsgTop",t),$A.isArray(t))t.forEach(s=>{i("saveDialogMsgTop",s)});else if($A.isJson(t)){e.dialogMsgTops=e.dialogMsgTops.filter(n=>n.dialog_id!=t.dialog_id);const s=e.dialogMsgTops.findIndex(n=>n.id==t.id);s>-1?e.dialogMsgTops.splice(s,1,Object.assign({},e.dialogMsgTops[s],t)):e.dialogMsgTops.push(t)}},forgetDialogMsgTopForMsgId({state:e,dispatch:i},t){$A.execMainDispatch("forgetDialogMsgTopForMsgId",t);const s=e.dialogMsgTops.findIndex(n=>n.msg_id==t);s>-1&&e.dialogMsgTops.splice(s,1)},saveDialogDraft({state:e,dispatch:i},t){e.dialogDraftTimer[t.id]&&clearInterval(e.dialogDraftTimer[t.id]),e.dialogDraftTimer[t.id]=setTimeout(s=>{e.dialogId!=t.id&&(t.extra_draft_has=t.extra_draft_content?1:0),i("saveDialog",t)},t.extra_draft_content?600:0)},saveDialogMsg({state:e,dispatch:i},t){if($A.execMainDispatch("saveDialogMsg",t),$A.isArray(t))t.forEach(s=>{i("saveDialogMsg",s)});else if($A.isJson(t)){const s=e.dialogMsgs.findIndex(({id:o})=>o==t.id);if(s>-1){const o=e.dialogMsgs[s];o.read_at&&delete t.read_at,t=Object.assign({},o,t),e.dialogMsgs.splice(s,1,t)}else e.dialogMsgs.push(t);$A.IDBSave("dialogMsgs",e.dialogMsgs,600);const n=e.cacheDialogs.find(({id:o})=>o==t.dialog_id);if(n){let o=!1;!t.read_at&&t.userid!=e.userId&&!e.dialogIns.find(({dialog_id:r})=>r==n.id)&&(n.unread_one?n.unread_one=Math.min(n.unread_one,t.id):n.unread_one=t.id,o=!0),n.last_msg&&n.last_msg.id==t.id&&(n.last_msg=Object.assign({},n.last_msg,t),o=!0),o&&i("saveDialog",n)}}},forgetDialogMsg({state:e,dispatch:i},t){$A.execMainDispatch("forgetDialogMsg",t),($A.isArray(t)?t:[t]).some(n=>{const o=e.dialogMsgs.findIndex(r=>r.id==n);if(o>-1){const r=e.dialogMsgs[o];i("decrementMsgReplyNum",r),i("audioStop",$A.getObject(r,"msg.path")),e.dialogMsgs.splice(o,1),$A.IDBSave("dialogMsgs",e.dialogMsgs,600)}}),i("forgetDialogTodoForMsgId",t),i("forgetDialogMsgTopForMsgId",t)},getDialogMsgs({state:e,dispatch:i,getters:t},s){return new Promise((n,o)=>{let r=f=>{},a=f=>{},l=!1,c=!1;typeof s.save_before!="undefined"&&(r=typeof s.save_before=="function"?s.save_before:f=>{},delete s.save_before),typeof s.save_after!="undefined"&&(a=typeof s.save_after=="function"?s.save_after:f=>{},delete s.save_after),typeof s.clear_before!="undefined"&&(l=typeof s.clear_before=="boolean"?s.clear_before:!1,delete s.clear_before),typeof s.spinner!="undefined"&&(c=s.spinner,delete s.spinner);const u=`msg::${s.dialog_id}-${s.msg_id}-${s.msg_type||""}`;if(t.isLoad(u)){o({msg:"Loading"});return}i("setLoad",u),l&&(e.dialogMsgs=e.dialogMsgs.filter(({dialog_id:f})=>f!==s.dialog_id),$A.IDBSave("dialogMsgs",e.dialogMsgs,600)),s.pagesize=25,i("call",{url:"dialog/msg/list",data:s,spinner:c,complete:f=>i("cancelLoad",u)}).then(f=>{r();const d=f.data;if($A.isJson(d.dialog)){const h=d.list.map(({id:p})=>p);e.dialogMsgs=e.dialogMsgs.filter(p=>p.dialog_id!=s.dialog_id||h.includes(p.id)||$A.dayjs(p.created_at).unix()>=d.time),$A.IDBSave("dialogMsgs",e.dialogMsgs,600),i("saveDialog",d.dialog)}$A.isArray(d.todo)&&(e.dialogTodos=e.dialogTodos.filter(h=>h.dialog_id!=s.dialog_id),i("saveDialogTodo",d.todo)),$A.isJson(d.top)&&i("saveDialogMsgTop",d.top),i("saveDialogMsg",d.list),n(f),a()}).catch(f=>{console.warn(f),o(f)}).finally(f=>{if(s.prev_id){const d=e.dialogMsgs.find(({prev_id:h})=>h==s.prev_id);d&&(d.prev_id=0)}if(s.next_id){const d=e.dialogMsgs.find(({next_id:h})=>h==s.next_id);d&&(d.next_id=0)}})})},getDialogLatestMsgs({state:e,dispatch:i},t=[]){return new Promise(function(s,n){if(e.userId===0){n({msg:"Parameter error"});return}if(!$A.isArray(t)){n({msg:"Parameter is not array"});return}if(t.length===0){s();return}const o=t.slice(5),r=t.slice(0,5);i("call",{method:"post",url:"dialog/msg/latest",data:{dialogs:r.map(a=>{var l;return{id:a,latest_id:((l=e.dialogMsgs.sort((c,u)=>u.id-c.id).find(({dialog_id:c})=>c==a))==null?void 0:l.id)||0}}),take:e.dialogMsgKeep}}).then(({data:a})=>{i("saveDialogMsg",a.data),o.length>0?i("getDialogLatestMsgs",o).then(s).catch(n):s()}).catch(a=>{n(a)})})},dialogMsgRead({state:e,dispatch:i},t){if($A.isJson(t)){if(t.userid==e.userId||t.read_at)return;t.read_at=$A.daytz().format("YYYY-MM-DD HH:mm:ss"),e.readWaitData[t.id]=e.readWaitData[t.id]||0;const s=e.cacheDialogs.find(({id:n})=>n==t.dialog_id);if(s){let n=!1;if(t.id==s.unread_one&&(s.unread_one=0,n=!0),$A.isArray(s.mention_ids)){const o=s.mention_ids.findIndex(r=>r==t.id);o>-1&&(s.mention_ids.splice(o,1),n=!0)}n&&(i("saveDialog",s),e.readWaitData[t.id]=t.dialog_id)}}clearTimeout(e.readTimeout),e.readTimeout=setTimeout(s=>{if(e.readTimeout=null,e.userId===0||Object.values(e.readWaitData).length===0)return;const n=$A.cloneJSON(e.readWaitData);e.readWaitData={},i("call",{method:"post",url:"dialog/msg/read",data:{id:n}}).then(({data:o})=>{for(const r in n)n.hasOwnProperty(r)&&/^\d+$/.test(n[r])&&e.dialogMsgs.some(a=>{a.dialog_id==n[r]&&a.id>=r&&(a.read_at=$A.daytz().format("YYYY-MM-DD HH:mm:ss"))});i("saveDialog",o)}).catch(o=>{e.readWaitData=n}).finally(o=>{e.readLoadNum++})},50)},dialogMsgDot({state:e,dispatch:i},t){!$A.isJson(t)||!t.dot||(t.dot=0,i("call",{url:"dialog/msg/dot",data:{id:t.id}}).then(({data:s})=>{i("saveDialog",s)}))},dialogMsgMark({state:e,dispatch:i},t){return new Promise((s,n)=>{i("call",{url:"dialog/msg/mark",data:t}).then(o=>{typeof t.after_msg_id!="undefined"&&e.dialogMsgs.some(r=>{r.dialog_id==t.dialog_id&&r.id>=t.after_msg_id&&(r.read_at=$A.daytz().format("YYYY-MM-DD HH:mm:ss"))}),i("saveDialog",o.data),s(o)}).catch(o=>{n(o)})})},streamDialogMsg({state:e,dispatch:i},t){if(/^https*:\/\//i.test(t)||(t=$A.mainUrl(t.substring(1))),e.dialogSseList.find(n=>n.streamUrl==t))return;const s=new gs(t);s.subscribe(["append","replace","done"],(n,o)=>{switch(n){case"append":x.Store.set("dialogMsgChange",{id:o.lastEventId,type:"append",text:o.data});break;case"replace":x.Store.set("dialogMsgChange",{id:o.lastEventId,type:"replace",text:o.data});break;case"done":const r=e.dialogSseList.findIndex(a=>s===a.sse);r>-1&&e.dialogSseList.splice(r,1),s.unsunscribe();break}}),e.dialogSseList.push({sse:s,streamUrl:t,time:$A.dayjs().unix()}),e.dialogSseList.length>10&&e.dialogSseList.shift().sse.close()},setLoad({state:e,dispatch:i},t){if($A.isJson(t)){setTimeout(n=>{i("setLoad",t.key)},t.delay||0);return}const s=e.loads.find(n=>n.key==t);s?s.num++:e.loads.push({key:t,num:1})},cancelLoad({state:e},i){const t=e.loads.find(s=>s.key==i);t?t.num--:e.loads.push({key:i,num:-1})},showSpinner({state:e},i){const t=$A.randomString(6);e.floatSpinnerTimer.push({id:t,timer:setTimeout(s=>{e.floatSpinnerTimer=e.floatSpinnerTimer.filter(n=>n.id!==t),e.floatSpinnerLoad++},typeof i=="number"?i:0)})},hiddenSpinner({state:e}){const i=e.floatSpinnerTimer.shift();i?clearTimeout(i.timer):e.floatSpinnerLoad--},previewImage({state:e},i){(!$A.isJson(i)||!$A.isArray(i.list))&&(i={index:0,list:[i]}),e.previewImageIndex=i.index,e.previewImageList=i.list},audioPlay({state:e,dispatch:i},t){const s=document.getElementById("__audio_play_element__");if(s&&(s.pause(),s.src="",s.parentNode.removeChild(s)),!t||t===e.audioPlaying){e.audioPlaying=null;return}const n=document.createElement("audio");n.id=e.audioPlayId="__audio_play_element__",n.controls=!1,n.loop=!1,n.volume=1,n.src=e.audioPlaying=t,n.onended=o=>{i("audioStop",n.src)},document.body.appendChild(n),n.play().then(o=>{})},audioStop({state:e},i){const t=document.getElementById("__audio_play_element__");!t||(t.src===i||i===!0)&&(t.pause(),t.src="",t.parentNode.removeChild(t),e.audioPlaying=null)},websocketConnection({state:e,dispatch:i}){if(clearTimeout(e.wsTimeout),e.ws&&(e.ws.close(),e.ws=null),e.userId===0)return;let t=$A.mainUrl("ws");t=t.replace("https://","wss://"),t=t.replace("http://","ws://"),t+=`?action=web&token=${e.userToken}&language=${P}`;const s=$A.openLog,n=$A.randomString(16);e.wsRandom=n,e.ws=new WebSocket(t),e.ws.onopen=async o=>{s&&console.log("[WS] Open",o,$A.daytz().format("YYYY-MM-DD HH:mm:ss")),e.wsOpenNum++,!(window.systemInfo.debug==="yes"||e.systemConfig.e2e_message!=="open")&&i("websocketSend",{type:"encrypt",data:{type:"pgp",key:(await i("pgpGetLocalKey")).publicKeyB64}})},e.ws.onclose=async o=>{s&&console.log("[WS] Close",o,$A.daytz().format("YYYY-MM-DD HH:mm:ss")),e.ws=null,clearTimeout(e.wsTimeout),e.wsTimeout=setTimeout(()=>{n===e.wsRandom&&i("websocketConnection")},3e3)},e.ws.onerror=async o=>{s&&console.log("[WS] Error",o,$A.daytz().format("YYYY-MM-DD HH:mm:ss")),e.ws=null,clearTimeout(e.wsTimeout),e.wsTimeout=setTimeout(()=>{n===e.wsRandom&&i("websocketConnection")},3e3)},e.ws.onmessage=async o=>{s&&console.log("[WS] Message",o);let r=$A.jsonParse(o.data);r.type==="encrypt"&&r.encrypted&&(r=await i("pgpDecryptApi",r.encrypted));const a=$A.formatMsgBasic(r),{type:l,msgId:c}=a;switch(l){case"open":$A.setSessionStorage("userWsFd",a.data.fd);break;case"receipt":typeof e.wsCall[c]=="function"&&e.wsCall[c](a.body,!0),delete e.wsCall[c];break;case"line":x.Store.set("userActive",{type:"line",data:a.data});break;case"msgStream":i("streamDialogMsg",a.stream_url);break;default:switch(c&&i("websocketSend",{type:"receipt",msgId:c}).catch(u=>{}),e.wsMsg=a,Object.values(e.wsListener).forEach(u=>{if(typeof u=="function")try{u(a)}catch(f){s&&console.log("[WS] Callerr",f)}}),l){case"dialog":(function(u){const{mode:f,silence:d,data:h}=u,{dialog_id:p}=h;switch(f){case"delete":if(i("forgetDialogMsg",h.id),e.cacheDialogs.find(({id:w})=>w==p)){const w={id:p,last_at:h.last_msg&&h.last_msg.created_at,last_msg:h.last_msg};h.update_read?i("call",{url:"dialog/msg/unread",data:{dialog_id:p}}).then(({data:T})=>{i("saveDialog",Object.assign(w,T))}).catch(()=>{}):i("saveDialog",w)}break;case"add":case"chat":if(!e.dialogMsgs.find(({id:w})=>w==h.id)){if(i("increaseTaskMsgNum",h),i("increaseMsgReplyNum",h),f==="chat"||$A.isSubElectron)return;if(h.userid!==e.userId){const w=e.cacheDialogs.find(({id:T})=>T==p);if(w){const T={id:p,unread:w.unread+1,mention:w.mention,user_at:h.user_at,user_ms:h.user_ms};h.mention&&T.mention++,i("saveDialog",T)}}d||x.Store.set("dialogMsgPush",h)}const v=(w,T)=>{if(T>5||e.dialogMsgs.find(({id:O})=>O==w.id)){i("saveDialogMsg",w),i("updateDialogLastMsg",w);return}setTimeout(O=>{v(w,++T)},20)};v(h,0);break;case"update":case"readed":const k=(w,T)=>{if(e.dialogMsgs.find(({id:O})=>O==w.id)){i("saveDialogMsg",w),typeof w.todo!="undefined"&&i("getDialogTodo",p);return}T<=5&&setTimeout(O=>{k(w,++T)},500)};k(h,0);break;case"groupAdd":case"groupJoin":case"groupRestore":i("getDialogOne",h.id).catch(()=>{});break;case"groupUpdate":e.cacheDialogs.find(({id:w})=>w==h.id)&&i("saveDialog",h);break;case"groupExit":case"groupDelete":i("forgetDialog",h.id);break;case"updateTopMsg":i("saveDialog",{id:h.dialog_id,top_msg_id:h.top_msg_id,top_userid:h.top_userid}),i("getDialogMsgTop",p);break}})(a);break;case"project":(function(u){const{action:f,data:d}=u;switch(f){case"add":case"update":case"recovery":i("saveProject",d);break;case"detail":i("getProjectOne",d.id).catch(()=>{}),i("getTaskForProject",d.id).catch(()=>{});break;case"delete":case"archived":i("forgetProject",d.id);break;case"sort":i("getTaskForProject",d.id).catch(()=>{});break}})(a);break;case"projectColumn":(function(u){const{action:f,data:d}=u;switch(f){case"add":case"update":case"recovery":i("saveColumn",d);break;case"delete":i("forgetColumn",d.id);break}})(a);break;case"projectTask":(function(u){const{action:f,data:d}=u;switch(f){case"add":case"restore":i("addTaskSuccess",d);break;case"update":case"archived":case"recovery":i("saveTask",d);break;case"dialog":i("saveTask",d),i("getDialogOne",d.dialog_id).catch(()=>{});break;case"upload":i("getTaskFiles",d.task_id);break;case"filedelete":i("forgetTaskFile",d.id);break;case"delete":i("forgetTask",d.id);break}})(a);break;case"file":(function(u){const{action:f,data:d}=u;switch(f){case"add":case"update":i("saveFile",d);break;case"delete":i("forgetFile",d.id);break;case"compress":i("packProgress",d);break}})(a);break;case"report":(function({action:u}){u=="unreadUpdate"&&i("getReportUnread",1e3)})(a);break;case"approve":(function({action:u}){u=="unread"&&i("getApproveUnread",1e3)})(a);break}break}}},websocketSend({state:e},i){return new Promise((t,s)=>{var l;if(!$A.isJson(i)){s();return}const{type:n,data:o,callback:r}=i;let a;if(!e.ws){typeof r=="function"&&r(null,!1),s();return}typeof r=="function"&&(a=$A.randomString(16),e.wsCall[a]=r);try{(l=e.ws)==null||l.send(JSON.stringify({type:n,msgId:a,data:o})),t()}catch(c){typeof r=="function"&&r(null,!1),s(c)}})},websocketPath({state:e,dispatch:i},t){clearTimeout(e.wsPathTimeout),e.wsPathValue=t,e.wsPathTimeout=setTimeout(()=>{e.wsPathValue==t&&i("websocketSend",{type:"path",data:{path:t}}).catch(s=>{})},1e3)},websocketMsgListener({state:e},i){if(typeof i=="string"){e.wsListener[i]&&delete e.wsListener[i];return}const{name:t,callback:s}=i;typeof s=="function"?e.wsListener[t]=s:e.wsListener[t]&&delete e.wsListener[t]},websocketClose({state:e}){e.ws&&(e.ws.close(),e.ws=null)},pgpGenerate({state:e}){return new Promise(async i=>{const t=await xe({type:"ecc",curve:"curve25519",passphrase:e.clientId,userIDs:[{name:"doo",email:"admin@admin.com"}]});t.publicKeyB64=ps(t.publicKey.replace(/\s*-----(BEGIN|END) PGP PUBLIC KEY BLOCK-----\s*/g,"")),i(t)})},pgpGetLocalKey({state:e,dispatch:i}){return new Promise(async t=>{if(e.localKeyPair.privateKey)return t(e.localKeyPair);for(;e.localKeyLock===!0;)await new Promise(s=>setTimeout(s,100));if(e.localKeyPair.privateKey)return t(e.localKeyPair);e.localKeyLock=!0,e.localKeyPair=await i("pgpGenerate"),e.localKeyLock=!1,t(e.localKeyPair)})},pgpEncrypt({state:e,dispatch:i},t){return new Promise(async s=>{$A.isJson(t)||(t={message:t});const n=t.message||t.text,o=t.publicKey||t.key||(await i("pgpGetLocalKey")).publicKey,r=await Ce({armoredKey:o}),a=await Ee({message:await Le({text:n}),encryptionKeys:r});s(a)})},pgpDecrypt({state:e,dispatch:i},t){return new Promise(async s=>{$A.isJson(t)||(t={encrypted:t});const n=t.encrypted||t.text,o=t.privateKey||t.key||(await i("pgpGetLocalKey")).privateKey,r=await Me({privateKey:await Pe({armoredKey:o}),passphrase:t.passphrase||e.clientId}),{data:a}=await je({message:await Be({armoredMessage:n}),decryptionKeys:r});s(a)})},pgpEncryptApi({state:e,dispatch:i},t){return new Promise(s=>{t=$A.jsonStringify(t),i("pgpEncrypt",{message:t,publicKey:e.apiKeyData.key}).then(n=>{s(n.replace(/\s*-----(BEGIN|END) PGP MESSAGE-----\s*/g,""))})})},pgpDecryptApi({state:e,dispatch:i},t){return new Promise(s=>{i("pgpDecrypt",{encrypted:`-----BEGIN PGP MESSAGE-----

`+t+`
-----END PGP MESSAGE-----`}).then(n=>{s($A.jsonParse(n))})})},closeMeetingWindow({state:e},i){e.meetingWindow={show:!1,type:i,meetingid:0}},showMeetingWindow({state:e},{type:i,meetingid:t,meetingdisabled:s,meetingSharekey:n}){e.meetingWindow={show:!0,type:i,meetingid:t,meetingdisabled:s,meetingSharekey:n}},openOkr({state:e},i){i>0&&(window.innerWidth<910?$A.goForward({path:"/manage/apps/okr/okrDetails?data="+i}):(e.okrWindow={type:"open",model:"details",show:!0,id:i},setTimeout(()=>{e.okrWindow.show=!1,e.okrWindow.id=0},10)))}},ws={};g.use(J);var ce=new J.Store({state:ds,getters:fs,mutations:ws,actions:_s}),ys={computed:{...C(["windowWidth","windowHeight","windowActive","windowScrollY","windowTouch","windowLandscape","windowPortrait","userId","userToken"])}};var $s=function(){var e=this,i=e.$createElement;return e._self._c,e._e()},vs=[];const As={name:"PageTitle",props:{title:{type:[String,Number],default:""}},data(){return{pagePath:""}},activated(){this.updateTitle()},watch:{title:{handler(){this.initTitle()},immediate:!0}},methods:{initTitle(){this.pagePath=this.$route.path,this.updateTitle()},updateTitle(){if(this.pagePath=="")return;let e=this.title,{title:i}=document;e!==i&&this.pagePath===this.$route.path&&this.setPageTile(e)},setPageTile(e){document.title=e}}},ue={};var ks=A(As,$s,vs,!1,bs,null,null,null);function bs(e){for(let i in ue)this[i]=ue[i]}var Ts=function(){return ks.exports}(),Ss=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.visible?t("ETooltip",{attrs:{disabled:e.$isEEUiApp||e.windowTouch||e.content=="",content:e.content}},[e.type==="svg"?t("svg",{staticClass:"common-loading",attrs:{viewBox:"25 25 50 50"}},[t("circle",{staticClass:"common-path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"5","stroke-miterlimit":"10"}})]):t("div",{staticClass:"common-pureing"})]):e._e()},Is=[];const Ds={name:"Loading",props:{type:{type:String,default:"svg"},content:{type:[String,Number],default:""},delay:{type:Number,default:0}},data(){return{visible:this.delay===0,timer:null}},mounted(){this.delay>0&&(this.timer=setTimeout(e=>{this.visible=!0},this.delay))},beforeDestroy(){this.timer&&clearTimeout(this.timer)}},de={};var xs=A(Ds,Ss,Is,!1,Cs,null,null,null);function Cs(e){for(let i in de)this[i]=de[i]}var Es=function(){return xs.exports}(),Ls=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("ETooltip",{attrs:{content:e.tipText,placement:e.placement,effect:e.tooltipTheme,delay:e.delay,disabled:e.$isEEUiApp||e.windowTouch||!e.showTooltip||e.disabled,"max-width":e.tooltipMaxWidth,transfer:""}},[t("span",{ref:"content",staticClass:"common-auto-tip",on:{mouseenter:e.handleTooltipIn,click:e.onClick}},[e.existSlot?[e._t("default")]:[e._v(e._s(e.content))]],2)])},Ms=[];const Ps={name:"AutoTip",props:{content:{type:[String,Number],default:""},placement:{default:"bottom"},tooltipTheme:{default:"dark"},tooltipMaxWidth:{type:[String,Number],default:300},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1}},data(){return{showTooltip:!1,tooltipContent:""}},computed:{tipText(){const{content:e,tooltipContent:i}=this;return e||i||""},existSlot(){return!(typeof this.$slots.default=="undefined"||this.$slots.default.length<1)}},methods:{handleTooltipIn(){const e=this.$refs.content;if(!e)return;let i=document.createRange();i.setStart(e,0),i.setEnd(e,e.childNodes.length||0);const t=i.getBoundingClientRect().width;if(this.showTooltip=Math.floor(t)>Math.floor(e.offsetWidth),this.showTooltip&&this.existSlot){const s=this.$slots.default.map(n=>n.text?n.text:n.elm.innerText?n.elm.innerText:"");this.tooltipContent=s.join("")}i=null},onClick(e){this.$emit("on-click",e)}}},fe={};var js=A(Ps,Ls,Ms,!1,Bs,null,null,null);function Bs(e){for(let i in fe)this[i]=fe[i]}var Os=function(){return js.exports}(),Us=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"common-tag-input",class:{focus:e.isFocus},on:{paste:function(s){return e.pasteText(s)},click:e.focus}},[t("Draggable",{attrs:{list:e.disSource,animation:150,tag:"ul",draggable:".column-item"}},e._l(e.disSource,function(s,n){return t("div",{staticClass:"tags-item column-item"},[t("span",{staticClass:"tags-content",on:{click:function(o){return o.stopPropagation(),e.edit(e.disSource,n)}}},[e._v(e._s(s))]),t("span",{staticClass:"tags-del",on:{click:function(o){return o.stopPropagation(),e.delTag(n)}}},[e._v("\xD7")])])}),0),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"myTextarea",staticClass:"tags-input",style:{minWidth:e.minWidth+"px"},attrs:{placeholder:e.tis||e.placeholderText,enterkeyhint:e.enterkeyhint,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.content},on:{keydown:[function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.downEnter(s)},function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"delete",[8,46],s.key,["Backspace","Delete","Del"])?null:e.delTag(!1)}],keyup:e.onKeyup,focus:e.onFocus,blur:e.onBlur,input:function(s){s.target.composing||(e.content=s.target.value)}}}),e._v(" "),e.showPlaceholder||e.tis!==""?t("span",{ref:"myPlaceholder",staticClass:"tags-placeholder"},[e._v(e._s(e.tis||e.placeholderText))]):e._e()],1)},Rs=[];const Ns={name:"TagInput",components:{Draggable:Ue},props:{value:{default:""},cut:{default:","},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{default:""},max:{default:0},enterkeyhint:{type:String,default:""}},data(){var i;const e=[];return this.value&&((i=this.value)==null||i.split(",").forEach(t=>{t&&e.push(t)})),{minWidth:80,tis:"",tisTimeout:null,showPlaceholder:!0,content:"",disSource:e,isFocus:!1,editShow:!1,editData:{index:0,disSource:[],name:""},addRule:{name:[{required:!0,message:this.$L("\u8BF7\u586B\u5199\u540D\u79F0\uFF01"),trigger:"change"}]}}},mounted(){this.wayMinWidth()},watch:{placeholder(){this.wayMinWidth()},value(e){if(e&&typeof e=="string"){let i=[];e==null||e.split(",").forEach(t=>{t&&i.push(t)}),this.disSource=i}},disSource(e){let i="";e.forEach(t=>{i!=""&&(i+=this.cut),i+=t}),this.$emit("input",i),this.$emit("on-change")}},computed:{placeholderText(){return this.disSource.length>0?"":this.placeholder}},methods:{edit(e,i){this.editData.disSource=e,this.editData.index=i,this.editData.name=e[i]+"",$A.modalInput({title:"\u7F16\u8F91",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",okText:"\u786E\u5B9A",value:e[i]+"",onOk:t=>t?(this.editData.name=t,this.editData.disSource[this.editData.index]=t,this.$set(this.disSource,this.editData.index,t),!1):"\u8BF7\u8F93\u5165\u540D\u79F0"})},focus(e){const i=this.$refs.myTextarea;i.focus(e);const{cursor:t}=e||{};if(t){const s=i.value.length;switch(t){case"start":i.setSelectionRange(0,0);break;case"end":i.setSelectionRange(s,s);break;default:i.setSelectionRange(0,s)}}},wayMinWidth(){this.showPlaceholder=!0,this.$nextTick(()=>{this.$refs.myPlaceholder&&(this.minWidth=Math.max(this.minWidth,this.$refs.myPlaceholder.offsetWidth)),setTimeout(()=>{try{this.minWidth=Math.max(this.minWidth,this.$refs.myPlaceholder.offsetWidth),this.showPlaceholder=!1}catch{}$A(this.$refs.myPlaceholder).is(":visible")||this.wayMinWidth()},500)})},pasteText(e){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("text");this.addTag(!1,i)},downEnter(e){e.preventDefault()},onFocus(e){this.isFocus=!0,this.$emit("on-focus",e)},onBlur(e){this.isFocus=!1,this.addTag(!1,this.content),this.$emit("on-blur",e)},onKeyup(e){this.addTag(e,this.content),this.$emit("on-keyup",e),e.keyCode===13&&this.$nextTick(()=>{this.$emit("on-enter",e)})},addTag(e,i){if(e===!1||e.keyCode===13){i.trim()!=""&&this.disSource.indexOf(i.trim())===-1&&this.disSource.push(i.trim()),this.content="";return}if(this.max>0&&this.disSource.length>=this.max){this.content="",this.tis="\u6700\u591A\u53EA\u80FD\u6DFB\u52A0"+this.max+"\u4E2A",clearInterval(this.tisTimeout),this.tisTimeout=setTimeout(()=>{this.tis=""},2e3);return}let t=i.trim(),s=t.length-this.cut.length;t!=""&&t.substring(s)===this.cut&&(t=t.substring(0,s),t.trim()!=""&&this.disSource.indexOf(t.trim())===-1&&this.disSource.push(t.trim()),this.content="")},delTag(e){if(e===!1){if(this.content!=="")return;e=this.disSource.length-1}this.disSource.splice(e,1),this.focus()}}},he={};var Ws=A(Ns,Us,Rs,!1,Fs,null,null,null);function Fs(e){for(let i in he)this[i]=he[i]}var Vs=function(){return Ws.exports}(),zs=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"td-action",style:e.tdStyle,attrs:{"data-width":e.width,"data-height":e.height}},[t("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],ref:"action",staticClass:"td-action-container",class:{"td-action-menu":e.menu.length>0},on:{mouseenter:e.handleIn}},[e._t("default"),e._l(e.menu,function(s,n){return s.hidden!==!0?t("ETooltip",{key:n,attrs:{placement:"top",disabled:e.$isEEUiApp||e.windowTouch||!s.title,content:s.title,enterable:!1,"open-delay":600}},[s.children&&s.children.length>0?t("EDropdown",{staticClass:"menu-dropdown",attrs:{size:"medium",trigger:"click"},on:{command:e.onClick}},[s.label?t("a",{style:s.style||{},attrs:{href:s.href||"javascript:void(0)",target:s.target||"_self"}},[e._v(e._s(s.label))]):e.isAliIcon(s.icon)?t("i",{staticClass:"taskfont menu-icon",style:s.style||{},domProps:{innerHTML:e._s(s.icon)}}):t("Icon",{staticClass:"menu-icon",style:s.style||{},attrs:{type:s.icon}}),t("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(s.children,function(o,r){return o.hidden!==!0?t("EDropdownItem",{key:r,style:o.style||{},attrs:{command:o.action,disabled:!!o.disabled,divided:!!o.divided}},[t("div",[e._v(e._s(o.title))])]):e._e()}),1)],1):s.label?t("a",{style:s.style||{},attrs:{href:s.href||"javascript:void(0)",target:s.target||"_self"},on:{click:function(o){return e.onClick(s.action)}}},[e._v(e._s(s.label))]):e.isAliIcon(s.icon)?t("i",{staticClass:"taskfont menu-icon",style:s.style||{},domProps:{innerHTML:e._s(s.icon)},on:{click:function(o){return e.onClick(s.action)}}}):t("Icon",{staticClass:"menu-icon",style:s.style||{},attrs:{type:s.icon},on:{click:function(o){return e.onClick(s.action)}}})],1):e._e()})],2)])},Hs=[];g.use(Re);const Ys={name:"TableAction",props:{column:{type:Object,default:()=>({})},autoWidth:{type:Boolean,default:!0},minWidth:{type:Number,default:80},align:{type:String,default:""},menu:{type:Array,default:()=>[]}},data(){return{width:0,height:0}},mounted(){this.onUpdate()},activated(){this.onUpdate()},beforeUpdate(){this.onUpdate()},computed:{tdStyle(){const e={},{align:i}=this;switch(i.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break}return e}},methods:{isAliIcon(e){return $A.leftExists(e,"&#")},handleIn(){this.$refs.action.offsetWidth!=this.width&&this.onUpdate()},onUpdate(){this.onResize({width:this.$refs.action.offsetWidth,height:this.$refs.action.offsetHeight})},onResize({width:e,height:i}){if(!this.autoWidth)return;$A(".ivu-table-column-"+this.column.__id).each((s,n)=>{let o=$A(n).find(".td-action-container");o.length>0&&(e=Math.max(e,o[0].offsetWidth),i=Math.max(i,o[0].offsetHeight))}),this.width=e,this.height=i;let t=Math.max(this.minWidth,this.width+26);this.column.minWidth&&(t=Math.max(this.column.minWidth,t)),this.column.maxWidth&&(t=Math.min(this.column.maxWidth,t)),t!=this.column.width&&this.$nextTick(()=>{this.$set(this.column,"width",t)})},onClick(e){this.$emit("action",e)}}},pe={};var Js=A(Ys,zs,Hs,!1,Ks,null,null,null);function Ks(e){for(let i in pe)this[i]=pe[i]}var Gs=function(){return Js.exports}(),Xs={bind(e,i,t){function s(n){if(e.contains(n.target))return!1;i.expression&&i.value(n)}e.__vueClickOutside__=s,document.addEventListener("click",s)},update(){},unbind(e,i){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}},qs=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"quick-edit",class:[e.alwaysIcon?"quick-always":""]},[e.isEdit?t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.onClickOut,expression:"onClickOut"}],staticClass:"quick-input"},[e.isTag?t("TagInput",{ref:"input",attrs:{disabled:e.isLoad,enterkeyhint:"done"},on:{"on-keydown":e.onKeydown,"on-blur":e.onBlur},model:{value:e.content,callback:function(s){e.content=s},expression:"content"}}):t("Input",{ref:"input",attrs:{disabled:e.isLoad,parser:e.parser,enterkeyhint:"done"},on:{"on-keydown":e.onKeydown,"on-blur":e.onBlur},model:{value:e.content,callback:function(s){e.content=s},expression:"content"}}),e.isLoad?t("div",{staticClass:"quick-loading"},[t("Loading")],1):e._e()],1):[t("div",{staticClass:"quick-text"},[e._t("default")],2),e.disabled?e._e():t("Icon",{staticClass:"quick-icon",attrs:{type:"ios-create-outline"},on:{click:function(s){return s.stopPropagation(),e.onEdit.apply(null,arguments)}}})]],2)},Qs=[];const Zs={name:"QuickEdit",directives:{clickoutside:Xs},props:{value:{},autoEdit:{},isTag:{type:Boolean,default:!1},alwaysIcon:{type:Boolean,default:!1},clickOutSide:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},parser:{type:Function}},data(){return{isLoad:!1,isEdit:!1,content:""}},mounted(){this.autoEdit===!0&&this.onEdit()},watch:{autoEdit(e){e===!0&&setTimeout(this.onEdit,0)}},methods:{onEditChange(e){this.isEdit=e,this.$emit("on-edit-change",e)},onEdit(){this.content=this.value,this.onEditChange(!0),this.$nextTick(()=>{this.$refs.input.focus({cursor:"all"})})},onKeydown(e){e.keyCode===13?this.onEnter():e.keyCode===27&&(e.preventDefault(),e.stopPropagation(),this.isEdit=!1,this.isLoad=!1)},onEnter(){if(this.content==this.value){this.onEditChange(!1);return}this.isLoad||(this.isLoad=!0,this.$emit("input",this.content),this.$emit("on-update",this.content,()=>{this.onEditChange(!1),this.isLoad=!1}))},onClickOut(){!this.clickOutSide||this.onEnter()},onBlur(){this.clickOutSide||!this.isEdit||this.onEnter()}}},me={};var ei=A(Zs,qs,Qs,!1,ti,null,null,null);function ti(e){for(let i in me)this[i]=me[i]}var si=function(){return ei.exports}(),ii={props:{userid:{type:[String,Number],default:""},size:{type:[String,Number],default:"default"},showIcon:{type:Boolean,default:!0},showName:{type:Boolean,default:!1},nameText:{type:String,default:null},borderWitdh:{type:Number,default:0},borderColor:{type:String,default:""},clickOpenDialog:{type:Boolean,default:!1},userResult:{default:null}}},ni=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.user?t("div",{staticClass:"avatar-wrapper common-avatar",class:{"avatar-pointer":e.clickOpenDialog},on:{click:e.onClickOpen}},[e.showIcon?t("div",{class:e.boxClass,style:e.boxStyle},[t("em",{style:e.spotStyle}),e.showImg?t("EAvatar",{ref:"avatar",class:{"avatar-default":e.isDefault},attrs:{src:e.user.userimg,size:e.avatarSize,error:e.onError}},[t("span",{staticClass:"avatar-char",style:e.spotStyle},[e._v(e._s(e.nickname))])]):t("EAvatar",{staticClass:"avatar-text",attrs:{size:e.avatarSize}},[t("span",{staticClass:"avatar-char",style:e.spotStyle},[e._v(e._s(e.nickname))])])],1):e._e(),e.showName?t("div",{staticClass:"avatar-name",style:e.nameStyle},[e.user.bot?t("div",{staticClass:"taskfont bot"},[e._v("\uE68C")]):e._e(),t("span",[e._v(e._s(e.nameText||e.user.nickname))])]):e._e()]):e._e()},oi=[];const ri={name:"UserAvatar",mixins:[ii],data(){return{user:null,subscribe:null}},mounted(){this.getData(),this.subscribe=x.Store.subscribe("userActive",({type:e,data:i})=>{i.userid==this.userid&&(e==="line"?this.user&&this.$set(this.user,"online",i.online):this.setUser(i))}),this.$store.state.userAvatar[this._uid]=this.$props},beforeDestroy(){this.subscribe&&(this.subscribe.unsubscribe(),this.subscribe=null),this.$store.state.userAvatar[this._uid]!==void 0&&delete this.$store.state.userAvatar[this._uid]},computed:{boxClass(){return{"avatar-box":!0,online:this.$store.state.userId===this.userid||this.user.online||this.isBot,disabled:this.user.disable_at,deleted:this.user.delete_at}},boxStyle(){const e={},{borderWitdh:i,borderColor:t}=this;return i>0&&(e.border=i+"px solid "+(t||"#ffffff")),e},spotStyle(){let{borderWitdh:e,size:i}=this;return i==="default"&&(i=32),e>0&&(i-=e),i==32?{}:{transform:"scale("+Math.min(1.25,i/32)+")"}},nameStyle(){const{showIcon:e}=this,{delete_at:i,disable_at:t}=this.user,s={};return e||(s.marginLeft=0),(i||t)&&(s.opacity=.8,s.textDecoration="line-through"),s},avatarSize(){let{borderWitdh:e,size:i}=this;return i==="default"&&(i=32),e>0?i-e*2:i},showImg(){const{userimg:e}=this.user;return e?!$A.rightExists(e,"/avatar.png"):!1},isDefault(){const{userimg:e}=this.user;return $A.strExists(e,"/avatar")},isBot(){return!!(this.user&&this.user.bot)},nickname(){const{nickname:e}=this.user;if(!e)return"D";let i=e.substring(0,2);return/^[\u4e00-\u9fa5]+$/.test(i)&&(i=i.substring(0,1)),i||"D"}},watch:{userid(){this.getData()}},methods:{getData(){if(!this.$store.state.userId)return;const e=this.$store.state.cacheUserBasic.find(({userid:i})=>i==this.userid);e&&this.setUser(e),this.$store.dispatch("getUserBasic",{userid:this.userid})},setUser(e){try{this.user&&this.user.userimg!=e.userimg&&this.$refs.avatar&&(this.$refs.avatar.$data.isImageExist=!0)}catch{}this.user=e,typeof this.userResult=="function"&&this.userResult(e)},onClickOpen(){this.clickOpenDialog?this.openDialog():this.$emit("open-dialog",this.userid)},openDialog(){this.$store.dispatch("openDialogUserid",this.userid).then(e=>{this.goForward({name:"manage-messenger"})}).catch(({msg:e})=>{$A.modalError(e)})},onError(){return!0}}},ge={};var ai=A(ri,ni,oi,!1,li,null,null,null);function li(e){for(let i in ge)this[i]=ge[i]}var ci=function(){return ai.exports}(),ui=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("img",{attrs:{src:e.srcValue,alt:e.alt}})},di=[];const fi={name:"ImgView",props:{src:{default:""},alt:{default:""}},computed:{srcValue(){const{src:e}=this;return e.substring(0,10)==="data:image"||e.substring(0,2)==="//"||e.substring(0,7)==="http://"||e.substring(0,8)==="https://"||e.substring(0,6)==="ftp://"||e.substring(0,1)==="/"?e:$A.mainUrl(e)}}},_e={};var hi=A(fi,ui,di,!1,pi,null,null,null);function pi(e){for(let i in _e)this[i]=_e[i]}var mi=function(){return hi.exports}();function b(e){return parseInt(e,10)||0}const M=typeof window!="undefined"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch);function we(e){return e?getComputedStyle(e):{}}function R(e,i){if(e)for(const t in i){let s=i[t];typeof s=="number"&&(s=`${s}px`),e.style[t]=s}return e}var gi={name:"Scrollbar",props:{tag:{type:String,default:"div"},className:{type:String,default:""},enableX:{type:Boolean,default:!1},enableY:{type:Boolean,default:!0},hideBar:{type:Boolean,default:!1},minSize:{type:Number,default:20},touchContentBlur:{type:Boolean,default:!0}},data(){return{isReady:!1,scrollingX:!1,scrollingY:!1,moveingX:!1,moveingY:!1,containerWidth:null,containerHeight:null,contentWidth:null,contentHeight:null,contentOverflow:{x:null,y:null},thumbYHeight:null,thumbYTop:null,thumbXWidth:null,thumbXLeft:null,lastScrollTop:0,lastScrollLeft:0,timeouts:{}}},computed:{containerClass(){const e=["scrollbar-container"];return M?e.push("scrollbar-touch"):e.push("scrollbar-desktop"),this.contentWidth>this.containerWidth&&this.contentOverflow.x!=="hidden"&&this.enableX&&e.push("scrollbar-active-x"),this.contentHeight>this.containerHeight&&this.contentOverflow.y!=="hidden"&&this.enableY&&e.push("scrollbar-active-y"),this.scrollingX&&e.push("scrollbar-scrolling-x"),this.scrollingY&&e.push("scrollbar-scrolling-y"),this.moveingX&&e.push("scrollbar-moveing-x"),this.moveingY&&e.push("scrollbar-moveing-y"),(this.hideBar||!this.isReady)&&e.push("scrollbar-hidebar"),e},contentClass({className:e,enableX:i,enableY:t}){const s=["scrollbar-content"];return e&&s.push(e),i||s.push("scrollbar-disable-x"),t||s.push("scrollbar-disable-y"),s}},mounted(){this.$nextTick(()=>{this.updateBase()})},updated(){this.$nextTick(()=>{this.updateGeometry(!1)})},methods:{scrollInfo(){const e=$A(this.$refs.content),i=Math.round(e.innerHeight()),t=e.scrollTop(),s=this.$refs.content.scrollHeight;return{scale:t/(s-i),scrollY:t,scrollE:s-i-t}},scrollElement(){return this.$refs.content},querySelector(e){return this.$refs.content&&this.$refs.content.querySelector(e)},updateBase(){if(M)return;const e=we(this.$refs.container),i=we(this.$refs.content);R(this.$refs.trackX,{left:b(e.paddingLeft)+b(i.marginLeft),right:b(e.paddingRight)+b(i.marginRight),bottom:b(e.paddingBottom)+b(i.marginBottom)}),R(this.$refs.trackY,{top:b(e.paddingTop)+b(i.marginTop),bottom:b(e.paddingBottom)+b(i.marginBottom),right:b(e.paddingRight)+b(i.marginRight)}),this.contentOverflow={x:i.overflowX,y:i.overflowY}},updateGeometry(e){if(M)return;const i=this.$refs.content;if(!i)return;const t=Math.floor(i.scrollTop),s=i.getBoundingClientRect();this.containerWidth=Math.round(s.width),this.containerHeight=Math.round(s.height),this.contentWidth=i.scrollWidth,this.contentHeight=i.scrollHeight,this.thumbXWidth=Math.max(b(this.containerWidth*this.containerWidth/this.contentWidth),this.minSize),this.thumbXLeft=b(i.scrollLeft*(this.containerWidth-this.thumbXWidth)/(this.contentWidth-this.containerWidth)),this.thumbYHeight=Math.max(b(this.containerHeight*this.containerHeight/this.contentHeight),this.minSize),this.thumbYTop=b(t*(this.containerHeight-this.thumbYHeight)/(this.contentHeight-this.containerHeight)),R(this.$refs.thumbX,{left:this.thumbXLeft,width:this.thumbXWidth}),R(this.$refs.thumbY,{top:this.thumbYTop,height:this.thumbYHeight}),e&&(this.scrollingX=this.lastScrollLeft!==i.scrollLeft,this.scrollingY=this.lastScrollTop!==i.scrollTop,this.lastScrollTop=i.scrollTop,this.lastScrollLeft=i.scrollLeft,this.timeouts.scroll&&clearTimeout(this.timeouts.scroll),this.timeouts.scroll=setTimeout(()=>{this.scrollingX=!1,this.scrollingY=!1},1e3))},onContainerMouseMove(){var e;(e=this.$store)!=null&&e.state.windowTouch||setTimeout(()=>{this.isReady||(this.updateGeometry(!0),this.isReady=!0)},300)},onContentTouchStart(e){if(!this.touchContentBlur)return;const i=document.activeElement;i&&i.blur()},onContentScroll(e){this.updateGeometry(!0),this.$emit("on-scroll",e),this.isReady=!0},onContentMouseenter(){this.updateBase(),this.updateGeometry(!1)},onTrackXMouseDown(e){if(M)return;const i=this.$refs.content,t=this.$refs.trackX.getBoundingClientRect(),n=e.pageX-window.scrollX-t.left>this.thumbXLeft?1:-1;i.scrollLeft+=n*this.containerWidth,this.updateGeometry(!0),e.stopPropagation()},onTrackYMouseDown(e){if(M)return;const i=this.$refs.content,t=this.$refs.trackY.getBoundingClientRect(),n=e.pageY-window.scrollY-t.top>this.thumbYTop?1:-1;i.scrollTop+=n*this.containerHeight,this.updateGeometry(!0),e.stopPropagation()},onThumbXMouseDown(e){if(M)return;const i=this.$refs.content,t=i.getBoundingClientRect(),s=i.scrollLeft,n=e.pageX-window.scrollX,o=a=>{const l=a.pageX-n;i.scrollLeft=s+l*this.contentWidth/t.width},r=()=>{this.timeouts.moveX=setTimeout(()=>{this.moveingX=!1},100),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)};this.moveingX=!0,this.timeouts.moveX&&clearTimeout(this.timeouts.moveX),document.addEventListener("mousemove",o),document.addEventListener("mouseup",r),e.preventDefault(),e.stopPropagation()},onThumbYMouseDown(e){if(M)return;const i=this.$refs.content,t=i.getBoundingClientRect(),s=i.scrollTop,n=e.pageY-window.scrollY,o=a=>{const l=a.pageY-n;i.scrollTop=s+l*this.contentHeight/t.height},r=()=>{this.timeouts.moveY=setTimeout(()=>{this.moveingY=!1},100),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)};this.moveingY=!0,this.timeouts.moveY&&clearTimeout(this.timeouts.moveY),document.addEventListener("mousemove",o),document.addEventListener("mouseup",r),e.preventDefault(),e.stopPropagation()}},render(e){return e("div",{ref:"container",class:this.containerClass,on:{"~mousemove":this.onContainerMouseMove}},[e(this.tag,{ref:"content",class:this.contentClass,on:{touchstart:this.onContentTouchStart,scroll:this.onContentScroll,mouseenter:this.onContentMouseenter}},this.$slots.default),e("div",{ref:"trackX",class:"scrollbar-track-x",on:{mousedown:this.onTrackXMouseDown}},[e("div",{ref:"thumbX",class:"scrollbar-thumb-x",on:{mousedown:this.onThumbXMouseDown}})]),e("div",{ref:"trackY",class:"scrollbar-track-y",on:{mousedown:this.onTrackYMouseDown}},[e("div",{ref:"thumbY",class:"scrollbar-thumb-y",on:{mousedown:this.onThumbYMouseDown}})])])}};const G=!!(window&&window.process&&window.process.type),X=window&&window.navigator&&/eeui/i.test(window.navigator.userAgent),q=G||X,S=$A.urlParameterAll();if(S.language||S.theme||S.userid||S.token){S.language&&window.localStorage.setItem("__system:languageName__",S.language),S.theme&&window.localStorage.setItem("__system:themeConf__",S.language),S.userid&&window.localStorage.setItem("__system:userId__",S.userid),S.token&&window.localStorage.setItem("__system:userToken__",S.token);const e=$A.removeURLParameter(window.location.href,["theme","language","userid","token"]);window.history.replaceState(null,"",e)}g.use(J);g.use(N);g.use(Oe,{config:{autoSetContainer:!0}});g.use(I,{modal:{checkEscClose:!0}});g.component("PageTitle",Ts);g.component("Loading",Es);g.component("AutoTip",Os);g.component("TagInput",Vs);g.component("TableAction",Gs);g.component("QuickEdit",si);g.component("UserAvatar",ci);g.component("ImgView",mi);g.component("Scrollbar",gi);g.component("EAvatar",B.exports.Avatar);g.component("ETooltip",B.exports.Tooltip);g.component("EPopover",B.exports.Popover);g.component("EDropdown",B.exports.Dropdown);g.component("EDropdownMenu",B.exports.DropdownMenu);g.component("EDropdownItem",B.exports.DropdownItem);const _i=N.prototype.push;N.prototype.push=function(i){return _i.call(this,i).catch(t=>t)};const Y=new N({mode:q&&!/https*:/i.test(window.location.protocol)?"hash":"history",routes:cs});q||(I.LoadingBar.config({color:"#3fcc25",failedColor:"#ff0000"}),Y.beforeEach((e,i,t)=>{I.LoadingBar._timer&&clearTimeout(I.LoadingBar._timer),I.LoadingBar._timer=setTimeout(s=>{I.LoadingBar._load=!0,I.LoadingBar.start()},300),t()}),Y.afterEach(()=>{I.LoadingBar._timer&&clearTimeout(I.LoadingBar._timer),I.LoadingBar._load===!0&&(I.LoadingBar._load=!1,I.LoadingBar.finish())}));g.prototype.goForward=function(e,i){typeof e=="string"&&(e={name:e}),y.$store.state.routeHistorys.length===0&&y.$store.state.routeHistorys.push(y.$route),i===!0?y.$router.replace(e).then(t=>{y.$store.state.routeHistorys.pop(),y.$store.state.routeHistorys.push(t)}).catch(t=>{}):y.$router.push(e).then(t=>{const s=y.$store.state.routeHistorys.push(t);s>120&&y.$store.state.routeHistorys.splice(s-100),y.$store.state.routeHistoryLast=s>=2?y.$store.state.routeHistorys[s-2]:{}}).catch(t=>{})};g.prototype.goBack=function(){if(y.$store.state.routeHistorys.length>1){y.$router.back(),y.$store.state.routeHistorys.pop();const e=y.$store.state.routeHistorys.length;y.$store.state.routeHistoryLast=e>=2?y.$store.state.routeHistorys[e-2]:{}}else y.$router.replace({path:"/"}).catch(e=>{}),y.$store.state.routeHistorys=[],y.$store.state.routeHistoryLast={}};g.prototype.copyText=function(e){if($A.isJson(e)||(e={text:e,success:"\u590D\u5236\u6210\u529F",error:"\u590D\u5236\u5931\u8D25"}),$A.isEEUiApp){$A.eeuiAppCopyText(e.text),e.success&&$A.messageSuccess(e.success);return}y.$copyText(e.text).then(i=>{e.success&&$A.messageSuccess(e.success)}).catch(i=>{e.error&&$A.messageError(e.error)})};$A.L=K;$A.Electron=null;$A.Platform="web";$A.isMainElectron=!1;$A.isSubElectron=!1;$A.isEEUiApp=X;$A.isElectron=G;$A.isSoftware=q;$A.openLog=!1;G?($A.Electron=electron,$A.Platform=/macintosh|mac os x/i.test(navigator.userAgent)?"mac":"win",$A.isMainElectron=/\s+MainTaskWindow\//.test(window.navigator.userAgent),$A.isSubElectron=/\s+SubTaskWindow\//.test(window.navigator.userAgent)):X&&($A.Platform=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":"android");$A.execMainDispatch=(e,i)=>{$A.isSubElectron&&$A.Electron.sendMessage("sendForwardMain",{channel:"dispatch",data:{action:e,data:i}})};window.execMainCacheData={};$A.execMainCacheJudge=e=>{const i=window.execMainCacheData[e]||!1;return window.execMainCacheData[e]=!0,i};$A.bindScreenshotKey=e=>{let i="";const t=(e.screenshot_key||"").trim().toLowerCase();t&&(i=/macintosh|mac os x/i.test(navigator.userAgent)?"command":"ctrl",i=`${i}+shift+${t.toLowerCase()}`),$A.Electron.sendMessage("bindScreenshotKey",{key:i})};g.prototype.$A=$A;g.prototype.$L=K;g.prototype.$Electron=$A.Electron;g.prototype.$Platform=$A.Platform;g.prototype.$isMainElectron=$A.isMainElectron;g.prototype.$isSubElectron=$A.isSubElectron;g.prototype.$isEEUiApp=$A.isEEUiApp;g.prototype.$isSoftware=$A.isSoftware;g.config.productionTip=!1;g.mixin(ys);let y;ce.dispatch("init").then(e=>{Ne(),y=new g({router:Y,store:ce,render:i=>i(ls),template:"<App/>"}).$mount("#app"),$A.goForward=y.goForward,$A.goBack=y.goBack,$A.Message=y.$Message,$A.Notice=y.$Notice,$A.Modal=y.$Modal,e==="handleClearCache"&&$A.messageSuccess("\u6E05\u9664\u6210\u529F")});export{mi as I,Ye as M,St as N,Ut as T,zt as U,Fe as a,en as b,Xs as c,Zi as d,ds as e,Ve as f,tn as i,P as l,ii as m,A as n,ce as s};
